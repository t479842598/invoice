import"./_vue-cropper-aa77d280.js";import{_ as E}from"./index-823f4b27.js";import{ai as p,aT as r,aF as P,c as W,W as e,bD as a,aX as i,o as z,U as u,a as n,aP as F,aM as G}from"./_@vue-5ba92de9.js";import"./__vendor-5e6ac033.js";import"./_@element-plus-ad4c9002.js";import"./_crypto-js-0812dcff.js";import"./_element-plus-8c7ce171.js";import"./_@popperjs-c75af06c.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";const s=x=>(F("data-v-81a5518b"),x=x(),G(),x),H={class:"system-setting",style:{position:"relative"}},X={style:{width:"100%","text-align":"center"}},A=s(()=>n("br",null,null,-1)),K=s(()=>n("br",null,null,-1)),L=s(()=>n("br",null,null,-1)),Q=s(()=>n("br",null,null,-1)),R=s(()=>n("br",null,null,-1)),Y=s(()=>n("br",null,null,-1)),Z=s(()=>n("br",null,null,-1)),$=s(()=>n("br",null,null,-1)),h=s(()=>n("br",null,null,-1)),ee=s(()=>n("br",null,null,-1)),le=s(()=>n("br",null,null,-1)),ae=s(()=>n("br",null,null,-1)),te=s(()=>n("br",null,null,-1)),oe=s(()=>n("br",null,null,-1)),ue=s(()=>n("br",null,null,-1)),de={__name:"systemsetting",props:{query:{type:String,default:()=>""}},setup(x){const c=p("ajax"),g=p("utils"),N=p("qs");p("config");const B=p("index_userinfo");r(null),r(!1);const O=r({img:"",outputType:"png",autoCrop:!0,autoCropWidth:200,autoCropHeight:200,centerBox:!0});p("ElSelectflow");const U=r("");localStorage.getItem("sobInfo")!=""&&(U.value=JSON.parse(localStorage.getItem("sobInfo"))),p("index_openmenu"),p("index_removetab");const j=p("index_refreshtab"),q=r({prop:"taxUnit",order:"descending"});r(g.getPager(q.value));const w=r(!1);r("");const l=r({departcode:"",departname:"",systemid:"",systemname:"",emailtitle:"",emailtext:"",vatSpecialManagement:"",taxrate:"无",默认发票类型:"",不排除负数量项目:!1,自动截取超长字段:!1,导入折扣:!1,赠品方式折扣:!1,按比例折扣:!1,折扣比例:0,允许多行折扣:!1,不显示确认开票对话框:!1,明细合并时金额税额调整:!1,按价税合计合并:!1,按金额合并:!1,推送客户邮箱:!1,是否抄送公司邮箱:!1,是否默认选中购买方:!1,是否默认选中销售方:!1,是否默认选中购买方地址电话:!1,是否默认选中销售方地址电话:!1,汇总折扣行:!1});P(()=>{O.value.img=B.value.headerImg,D()});const D=async()=>{w.value=!0;try{const f=await c.post("/Systemset/Get?srcorgid="+U.value.id,{});w.value=!1,l.value=f.data.invoicesystemset}catch{w.value=!1}},v=async()=>{try{const f=await c.post("/Systemset/Save?srcorgid="+U.value.id,N.stringify({systemsetJSON:JSON.stringify(l.value)}));g.msg(f.success?"保存成功！":"保存失败！",f.success,!1),j()}catch{g.msg("保存失败！",!1,!1)}};return(f,t)=>{const y=i("el-input"),m=i("el-form-item"),V=i("el-button"),_=i("el-form"),b=i("el-tab-pane"),d=i("el-checkbox"),J=i("el-input-number"),S=i("el-divider"),C=i("el-col"),k=i("el-row"),I=i("el-option"),M=i("el-select"),T=i("el-tabs");return z(),W("div",H,[e(T,{"tab-position":"top",style:{height:"70vh"}},{default:a(()=>[e(b,{label:"单位信息"},{default:a(()=>[e(_,{ref:"topform",model:l.value},{default:a(()=>[e(m,{label:"单位编号"},{default:a(()=>[e(y,{style:{width:"200px"},modelValue:l.value.departcode,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.departcode=o)},null,8,["modelValue"])]),_:1}),e(m,{label:"单位名称"},{default:a(()=>[e(y,{style:{width:"200px"},modelValue:l.value.departname,"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.departname=o)},null,8,["modelValue"])]),_:1}),e(m,{label:""},{default:a(()=>[e(V,{type:"primary",onClick:v},{default:a(()=>[u("保存")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(b,{label:"系统设置"},{default:a(()=>[n("div",null,[n("div",X,[e(_,{ref:"topform",model:l.value},{default:a(()=>[e(m,{label:"系统名称"},{default:a(()=>[e(y,{style:{width:"200px"},modelValue:l.value.systemname,"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.systemname=o)},null,8,["modelValue"])]),_:1}),e(m,{label:""},{default:a(()=>[e(V,{type:"primary",onClick:v},{default:a(()=>[u("保存")]),_:1})]),_:1})]),_:1},8,["model"])])])]),_:1}),e(b,{label:"邮件模板"},{default:a(()=>[e(_,{ref:"topform",model:l.value},{default:a(()=>[e(m,{label:"邮件标题"},{default:a(()=>[e(y,{style:{width:"200px"},modelValue:l.value.emailtitle,"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.emailtitle=o)},null,8,["modelValue"])]),_:1}),e(m,{label:"底部内容"},{default:a(()=>[e(y,{type:"textarea",rows:6,style:{width:"200px"},modelValue:l.value.emailtext,"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.emailtext=o)},null,8,["modelValue"])]),_:1}),e(m,{label:""},{default:a(()=>[e(V,{type:"primary",onClick:v},{default:a(()=>[u("保存")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(b,{label:"导入发票"},{default:a(()=>[e(_,{model:l.value,inline:""},{default:a(()=>[e(d,{modelValue:l.value.不排除负数量项目,"onUpdate:modelValue":t[5]||(t[5]=o=>l.value.不排除负数量项目=o),label:"不排除负数量项目"},{default:a(()=>[u("不排除负数量项目")]),_:1},8,["modelValue"]),A,e(d,{modelValue:l.value.自动截取超长字段,"onUpdate:modelValue":t[6]||(t[6]=o=>l.value.自动截取超长字段=o),label:"自动截取超长字段"},{default:a(()=>[u("自动截取超长字段")]),_:1},8,["modelValue"]),K,e(d,{modelValue:l.value.赠品方式折扣,"onUpdate:modelValue":t[7]||(t[7]=o=>l.value.赠品方式折扣=o),label:"导入折扣"},{default:a(()=>[u("赠品方式折扣")]),_:1},8,["modelValue"]),L,e(d,{modelValue:l.value.汇总折扣行,"onUpdate:modelValue":t[8]||(t[8]=o=>l.value.汇总折扣行=o),label:"导入折扣"},{default:a(()=>[u("汇总折扣行")]),_:1},8,["modelValue"]),Q,e(d,{modelValue:l.value.导入折扣,"onUpdate:modelValue":t[9]||(t[9]=o=>l.value.导入折扣=o),label:"导入折扣"},{default:a(()=>[u("导入折扣")]),_:1},8,["modelValue"]),R,n("div",null,[e(d,{modelValue:l.value.按比例折扣,"onUpdate:modelValue":t[10]||(t[10]=o=>l.value.按比例折扣=o),label:"按比例折扣"},{default:a(()=>[u("按比例折扣")]),_:1},8,["modelValue"]),e(J,{modelValue:l.value.折扣比例,"onUpdate:modelValue":t[11]||(t[11]=o=>l.value.折扣比例=o),min:0,max:100,controls:!1,size:"small",style:{width:"50px","margin-top":"-10px"}},null,8,["modelValue"])]),e(d,{modelValue:l.value.允许多行折扣,"onUpdate:modelValue":t[12]||(t[12]=o=>l.value.允许多行折扣=o),style:{"margin-left":"22px"},label:"允许多行折扣"},{default:a(()=>[u("允许多行折扣")]),_:1},8,["modelValue"]),Y,e(d,{modelValue:l.value.不显示确认开票对话框,"onUpdate:modelValue":t[13]||(t[13]=o=>l.value.不显示确认开票对话框=o),label:"不显示确认开票对话框"},{default:a(()=>[u("不显示确认开票对话框")]),_:1},8,["modelValue"]),Z,e(m,{label:""},{default:a(()=>[e(V,{type:"primary",onClick:v},{default:a(()=>[u("保存")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(b,{label:"发票明细合并"},{default:a(()=>[n("div",null,[e(S,{"content-position":"left"},{default:a(()=>[u("发票明细合并规则")]),_:1}),e(k,null,{default:a(()=>[e(C,null,{default:a(()=>[e(_,{model:l.value,inline:""},{default:a(()=>[e(d,{modelValue:l.value.不合并,"onUpdate:modelValue":t[14]||(t[14]=o=>l.value.不合并=o),label:"不合并"},{default:a(()=>[u("不合并")]),_:1},8,["modelValue"]),$,e(d,{modelValue:l.value.存货单价税率相同者合并,"onUpdate:modelValue":t[15]||(t[15]=o=>l.value.存货单价税率相同者合并=o),label:"存货单价税率相同者合并"},{default:a(()=>[u("存货单价税率相同者合并")]),_:1},8,["modelValue"]),h,e(d,{modelValue:l.value.存货税率相同者合并,"onUpdate:modelValue":t[16]||(t[16]=o=>l.value.存货税率相同者合并=o),label:"存货税率相同者合并"},{default:a(()=>[u("存货税率相同者合并")]),_:1},8,["modelValue"]),ee,e(d,{modelValue:l.value.存货相同者合并,"onUpdate:modelValue":t[17]||(t[17]=o=>l.value.存货相同者合并=o),label:"存货相同者合并"},{default:a(()=>[u("存货相同者合并")]),_:1},8,["modelValue"]),le]),_:1},8,["model"])]),_:1})]),_:1})]),n("div",null,[e(S,{"content-position":"left"},{default:a(()=>[u("发票明细合并方式")]),_:1}),e(k,null,{default:a(()=>[e(C,null,{default:a(()=>[e(_,{model:l.value,inline:""},{default:a(()=>[e(d,{modelValue:l.value.按价税合计合并,"onUpdate:modelValue":t[18]||(t[18]=o=>l.value.按价税合计合并=o),label:"按价税合计合并"},{default:a(()=>[u("按价税合计合并（调整金额税额）")]),_:1},8,["modelValue"]),ae,e(d,{modelValue:l.value.按金额合并,"onUpdate:modelValue":t[19]||(t[19]=o=>l.value.按金额合并=o),label:"按金额合并"},{default:a(()=>[u("按金额合并（调整税额价税合计）")]),_:1},8,["modelValue"]),te,e(d,{modelValue:l.value.推送客户邮箱,"onUpdate:modelValue":t[20]||(t[20]=o=>l.value.推送客户邮箱=o),label:"推送客户邮箱"},{default:a(()=>[u("推送客户邮箱")]),_:1},8,["modelValue"]),oe,e(d,{modelValue:l.value.是否抄送公司邮箱,"onUpdate:modelValue":t[21]||(t[21]=o=>l.value.是否抄送公司邮箱=o),label:"是否抄送公司邮箱"},{default:a(()=>[u("是否抄送公司邮箱")]),_:1},8,["modelValue"]),ue]),_:1},8,["model"])]),_:1})]),_:1})]),e(m,{label:""},{default:a(()=>[e(V,{type:"primary",onClick:v},{default:a(()=>[u("保存")]),_:1})]),_:1})]),_:1}),e(b,{label:"发票类型显示设置"},{default:a(()=>[e(_,{model:l.value,style:{"margin-top":"20px",padding:"0 10px"}},{default:a(()=>[e(m,null,{default:a(()=>[e(d,{modelValue:l.value.是否默认选中购买方,"onUpdate:modelValue":t[22]||(t[22]=o=>l.value.是否默认选中购买方=o),label:"是否默认选中购买方"},{default:a(()=>[u("是否默认选中购买方")]),_:1},8,["modelValue"]),e(d,{modelValue:l.value.是否默认选中销售方,"onUpdate:modelValue":t[23]||(t[23]=o=>l.value.是否默认选中销售方=o),label:"是否默认选中销售方"},{default:a(()=>[u("是否默认选中销售方")]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:a(()=>[e(d,{modelValue:l.value.是否默认选中购买方地址电话,"onUpdate:modelValue":t[24]||(t[24]=o=>l.value.是否默认选中购买方地址电话=o),label:"是否默认选中购买方地址电话"},{default:a(()=>[u("是否默认选中购买方地址电话")]),_:1},8,["modelValue"]),e(d,{modelValue:l.value.是否默认选中销售方地址电话,"onUpdate:modelValue":t[25]||(t[25]=o=>l.value.是否默认选中销售方地址电话=o),label:"是否默认选中销售方地址电话"},{default:a(()=>[u("是否默认选中销售方地址电话")]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"默认发票类型"},{default:a(()=>[e(M,{modelValue:l.value.默认发票类型,"onUpdate:modelValue":t[26]||(t[26]=o=>l.value.默认发票类型=o),style:{width:"200px"},placeholder:"默认发票类型"},{default:a(()=>[e(I,{label:"全电专用发票",value:"01"}),e(I,{label:"全电普通发票",value:"02"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:""},{default:a(()=>[e(V,{type:"primary",onClick:v},{default:a(()=>[u("保存")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})])}}},ye=E(de,[["__scopeId","data-v-81a5518b"]]);export{ye as default};
