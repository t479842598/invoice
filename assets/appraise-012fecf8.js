import{ai as f,aT as v,aF as R,H as h,bD as d,aX as r,o as i,W as n,a as t,b9 as g,c as _,aV as V,bi as c,F as w,U as y,bF as K,bv as L}from"./_@vue-5ba92de9.js";import{d as M}from"./form-design-8c117009.js";import"./index-823f4b27.js";import"./__vendor-5e6ac033.js";import"./_@element-plus-ad4c9002.js";import"./_crypto-js-0812dcff.js";import"./_element-plus-8c7ce171.js";import"./_@popperjs-c75af06c.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";import"./_jquery-3a83ed9f.js";const W={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},X=t("th",{style:{width:"60px"}},"控件id",-1),z={class:"roadui_formfont"},G=t("th",null,"绑定字段",-1),P={class:"roadui_note1"},Q={style:{"margin-left":"12px"}},Y=t("th",null,"默认值",-1),Z=t("th",null,"图标",-1),$={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},ee=t("th",{style:{width:"50px"}},"事件",-1),le=t("th",null,"脚本",-1),ve={__name:"appraise",props:{query:{type:String,default:()=>""}},setup(k){const s=f("utils"),N=f("ElSelectico"),O=f("ElCodemirror"),I=k,J=s.query("editorname",I.query),m=window.parent.CKEDITOR.instances[J],b=m.formAttributeJSON,l=v({}),u=v({}),p=v(""),x=v([]),F=M.defaultValueOptions();R(()=>{b&&s.getConnTableFields(b.dbConn,b.dbTable).then(a=>{x.value=a}),E()});const T=a=>{s.length(a)!==0&&(l.value.defaultValue+=a[a.length-1])},E=a=>{l.value={id:"",label:"",field:"",width:"",defaultValue:"",customIcon:"",allowHalf:!1,allowClear:!1,count:5},u.value={},a||(a=m.currentSelectEditorElement),a&&(l.value.id=a.getAttribute("data-id"),l.value.label=a.getAttribute("data-label"),l.value.field=a.getAttribute("data-bindfiled"),l.value.defaultValue=s.decodeURI(a.getAttribute("data-defaultvalue")),l.value.customIcon=a.getAttribute("data-customicon"),l.value.allowHalf=a.getAttribute("data-allowhalf")=="true",l.value.allowClear=a.getAttribute("data-allowclear")=="true",l.value.count=parseInt(a.getAttribute("data-count"))||5,u.value=s.getArrayObj(m.formEventsJSON,l.value.id,"id"),s.isUndef(u.value)?(u.value={id:l.value.id,events:[{name:"change",script:""}]},m.formEventsJSON.push(u.value)):s.length(u.value.events)===0&&(u.value={id:l.value.id,events:[{name:"change",script:""}]}),p.value=u.value.events[0].name),m.currentSelectEditorElementJson=l.value,m.initFunction_appraise=E};return(a,o)=>{const U=r("el-option"),S=r("el-select"),A=r("el-input"),D=r("el-cascader"),H=r("el-input-number"),B=r("el-checkbox"),C=r("el-tab-pane"),j=r("el-tabs");return i(),h(j,null,{default:d(()=>[n(C,{name:"0",label:"属性",style:{height:"100%"}},{default:d(()=>[t("table",W,[t("tr",null,[X,t("td",z,g(l.value.id),1)]),t("tr",null,[G,t("td",null,[n(S,{modelValue:l.value.field,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value.field=e),filterable:"",style:{width:"260px"},clearable:""},{default:d(()=>[(i(!0),_(w,null,V(x.value,e=>(i(),h(U,{key:e.name,value:e.name,label:e.name+(c(s).length(e.comment)>0?" - "+e.comment:"")},{default:d(()=>[t("span",null,g(e.name),1),t("span",P,g(c(s).length(e.comment)>0?" - "+e.comment:""),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"]),t("span",Q,[y(" 标签"),n(A,{modelValue:l.value.label,"onUpdate:modelValue":o[1]||(o[1]=e=>l.value.label=e),placeholder:"控件label",style:{width:"285px","margin-left":"12px"},clearable:""},null,8,["modelValue"])])])]),t("tr",null,[Y,t("td",null,[n(D,{placeholder:"选择默认值",options:c(F),props:{expandTrigger:"hover",checkStrictly:!1},clearable:"",onChange:T,style:{width:"260px","margin-right":"18px"}},null,8,["options"]),n(A,{modelValue:l.value.defaultValue,"onUpdate:modelValue":o[2]||(o[2]=e=>l.value.defaultValue=e),style:{width:"323px"},clearable:""},null,8,["modelValue"])])]),t("tr",null,[Z,t("td",null,[n(c(N),{modelValue:l.value.customIcon,"onUpdate:modelValue":o[3]||(o[3]=e=>l.value.customIcon=e),clearable:"",style:{"margin-right":"12px",width:"190px"}},null,8,["modelValue"]),t("span",null,[y(" 总数 "),n(H,{modelValue:l.value.count,"onUpdate:modelValue":o[4]||(o[4]=e=>l.value.count=e),"controls-position":"right",style:{margin:"0 20px 0 12px",width:"100px"}},null,8,["modelValue"])]),n(B,{modelValue:l.value.allowHalf,"onUpdate:modelValue":o[5]||(o[5]=e=>l.value.allowHalf=e),style:{"vertical-align":"middle"}},{default:d(()=>[y("允许半选")]),_:1},8,["modelValue"])])])])]),_:1}),n(C,{name:"1",label:"事件",style:{height:"100%"}},{default:d(()=>[t("table",$,[t("tr",null,[ee,t("td",null,[n(S,{modelValue:p.value,"onUpdate:modelValue":o[6]||(o[6]=e=>p.value=e)},{default:d(()=>[(i(!0),_(w,null,V(u.value.events,e=>(i(),h(U,{key:e.name,value:e.name,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),t("tr",null,[le,t("td",null,[(i(!0),_(w,null,V(u.value.events,e=>K((i(),_("div",{style:{width:"620px"},key:"script_"+e.name},[n(c(O),{modelValue:e.script,"onUpdate:modelValue":q=>e.script=q,height:"260px"},null,8,["modelValue","onUpdate:modelValue"])])),[[L,p.value==e.name]])),128))])])])]),_:1})]),_:1})}}};export{ve as default};
