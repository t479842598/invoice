import{ai as A,aT as b,aF as z,by as G,H as S,bD as n,aX as i,o as r,W as o,a as t,b9 as q,c,aV as _,bi as m,F as V,U as v,bF as f,bv as g}from"./_@vue-5ba92de9.js";import{d as C}from"./form-design-8c117009.js";import"./index-823f4b27.js";import"./__vendor-5e6ac033.js";import"./_@element-plus-ad4c9002.js";import"./_crypto-js-0812dcff.js";import"./_element-plus-8c7ce171.js";import"./_@popperjs-c75af06c.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";import"./_jquery-3a83ed9f.js";const P={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},Y=t("th",{style:{width:"60px"}},"控件id",-1),Z={class:"roadui_formfont"},$=t("th",null,"绑定字段",-1),ee={class:"roadui_note1"},le={style:{"margin-left":"12px"}},te=t("th",null,"默认值",-1),ae=t("th",null,"样式",-1),ue=t("th",null,"选项来源",-1),oe={style:{"margin-left":"12px"}},ne=t("th",null,"字典项",-1),de=t("th",null,"字符串",-1),re=t("th",null,"SQL",-1),se=t("th",null,"URL",-1),ie={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},ce=t("th",{style:{width:"50px"}},"事件",-1),me=t("th",null,"脚本",-1),we={__name:"checkbox",props:{query:{type:String,default:()=>""}},setup(T){const d=A("utils"),I=A("ElSelectdict"),j=A("ElCodemirror"),B=T,L=d.query("editorname",B.query),p=window.parent.CKEDITOR.instances[L],D=p.formAttributeJSON,l=b({}),s=b({}),y=b(""),O=b([]),Q=C.defaultValueOptions(),E=b([]),H=C.dataSourceOptions(),K=C.dictValueFieldOptions(),F=b(null);z(()=>{D&&d.getConnTableFields(D.dbConn,D.dbTable).then(u=>{O.value=u}),N()}),G(()=>l.value.dataSource,u=>{u=="sql"&&d.getConns().then(a=>{E.value=a})});const M=u=>{d.length(u)!==0&&(l.value.defaultValue+=u[u.length-1])},N=u=>{l.value={id:"",label:"",field:"",width:"",defaultValue:"",buttonStyle:"normal",dataSource:"",dataSourceDict:"",dataSourceDictValueField:"",dataSourceString:"",dataSourceSqlConn:"",dataSourceSql:"",dataSourceUrl:""},s.value={},u||(u=p.currentSelectEditorElement),u&&(l.value.id=u.getAttribute("data-id"),l.value.label=u.getAttribute("data-label"),l.value.field=u.getAttribute("data-bindfiled"),l.value.defaultValue=d.decodeURI(u.getAttribute("data-defaultvalue")),l.value.buttonStyle=u.getAttribute("data-buttonstyle"),l.value.dataSource=u.getAttribute("data-datasource"),l.value.dataSourceDict=u.getAttribute("data-datasourcedict"),l.value.dataSourceDictValueField=u.getAttribute("data-datasourcedictvaluefield"),l.value.dataSourceString=d.decodeURI(u.getAttribute("data-datasourcestring")),l.value.dataSourceSqlConn=u.getAttribute("data-datasourcesqlconn"),l.value.dataSourceSql=d.decodeURI(u.getAttribute("data-datasourcesql")),l.value.dataSourceUrl=d.decodeURI(u.getAttribute("data-datasourceurl")),F.value.initTitle(l.value.dataSourceDict),s.value=d.getArrayObj(p.formEventsJSON,l.value.id,"id"),d.isUndef(s.value)?(s.value={id:l.value.id,events:[{name:"change",script:""}]},p.formEventsJSON.push(s.value)):d.length(s.value.events)===0&&(s.value={id:l.value.id,events:[{name:"change",script:""}]}),y.value=s.value.events[0].name),p.currentSelectEditorElementJson=l.value,p.initFunction_checkbox=N};return(u,a)=>{const x=i("el-option"),U=i("el-select"),h=i("el-input"),W=i("el-cascader"),w=i("el-radio"),R=i("el-radio-group"),J=i("el-tab-pane"),X=i("el-tabs");return r(),S(X,null,{default:n(()=>[o(J,{name:"0",label:"属性",style:{height:"100%"}},{default:n(()=>[t("table",P,[t("tr",null,[Y,t("td",Z,q(l.value.id),1)]),t("tr",null,[$,t("td",null,[o(U,{modelValue:l.value.field,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.field=e),filterable:"",style:{width:"260px"},clearable:""},{default:n(()=>[(r(!0),c(V,null,_(O.value,e=>(r(),S(x,{key:e.name,value:e.name,label:e.name+(m(d).length(e.comment)>0?" - "+e.comment:"")},{default:n(()=>[t("span",null,q(e.name),1),t("span",ee,q(m(d).length(e.comment)>0?" - "+e.comment:""),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"]),t("span",le,[v(" 标签"),o(h,{modelValue:l.value.label,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.label=e),placeholder:"控件label",style:{width:"285px","margin-left":"12px"},clearable:""},null,8,["modelValue"])])])]),t("tr",null,[te,t("td",null,[o(W,{placeholder:"选择默认值",options:m(Q),props:{expandTrigger:"hover",checkStrictly:!1},clearable:"",onChange:M,style:{width:"260px","margin-right":"18px"}},null,8,["options"]),o(h,{modelValue:l.value.defaultValue,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.defaultValue=e),style:{width:"323px"},clearable:""},null,8,["modelValue"])])]),t("tr",null,[ae,t("td",null,[o(R,{modelValue:l.value.buttonStyle,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.buttonStyle=e),clearable:""},{default:n(()=>[o(w,{label:"normal"},{default:n(()=>[v("常规checkbox")]),_:1}),o(w,{label:"button"},{default:n(()=>[v("按钮")]),_:1}),o(w,{label:"border"},{default:n(()=>[v("边框")]),_:1})]),_:1},8,["modelValue"])])]),t("tr",null,[ue,t("td",null,[o(R,{modelValue:l.value.dataSource,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.dataSource=e),clearable:"",style:{"vertical-align":"middle"}},{default:n(()=>[(r(!0),c(V,null,_(m(H),e=>(r(),S(w,{key:e.value,label:e.value},{default:n(()=>[v(q(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),f(t("span",oe,[v(" 数据连接 "),o(U,{modelValue:l.value.dataSourceSqlConn,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.dataSourceSqlConn=e),placeholder:"选择执行SQL的数据连接",clearable:"",style:{width:"200px",margin:"0 12px","vertical-align":"middle"}},{default:n(()=>[(r(!0),c(V,null,_(E.value,(e,k)=>(r(),S(x,{key:"conn_"+k,value:e.id,label:e.title},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])],512),[[g,l.value.dataSource=="sql"]])])]),f(t("tr",null,[ne,t("td",null,[o(m(I),{modelValue:l.value.dataSourceDict,"onUpdate:modelValue":a[6]||(a[6]=e=>l.value.dataSourceDict=e),ref_key:"dataSourceDictRef",ref:F,style:{width:"400px","margin-right":"12px"},clearable:""},null,8,["modelValue"]),v(" 值字段 "),o(U,{modelValue:l.value.dataSourceDictValueField,"onUpdate:modelValue":a[7]||(a[7]=e=>l.value.dataSourceDictValueField=e),style:{width:"127px","margin-left":"12px"},clearable:""},{default:n(()=>[(r(!0),c(V,null,_(m(K),e=>(r(),S(x,{key:e.value,value:e.value,label:e.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])],512),[[g,l.value.dataSource=="dict"]]),f(t("tr",null,[de,t("td",null,[o(h,{type:"textarea",rows:3,modelValue:l.value.dataSourceString,"onUpdate:modelValue":a[8]||(a[8]=e=>l.value.dataSourceString=e),placeholder:"格式：选项1值,选项1标题;选项2值,选项2标题...（字符串不能有单引号)"},null,8,["modelValue"])])],512),[[g,l.value.dataSource=="string"]]),f(t("tr",null,[re,t("td",null,[o(h,{type:"textarea",rows:3,modelValue:l.value.dataSourceSql,"onUpdate:modelValue":a[9]||(a[9]=e=>l.value.dataSourceSql=e),placeholder:"查询返回两个字段，选项值和选项标题。如果只返回一个字段，则选项值和选项标题一样。"},null,8,["modelValue"])])],512),[[g,l.value.dataSource=="sql"]]),f(t("tr",null,[se,t("td",null,[o(h,{type:"textarea",rows:3,modelValue:l.value.dataSourceUrl,"onUpdate:modelValue":a[10]||(a[10]=e=>l.value.dataSourceUrl=e),placeholder:"post一个url地址，地址返回[{value:'值',label:'标题'},...]格式json字符串。"},null,8,["modelValue"])])],512),[[g,l.value.dataSource=="url"]])])]),_:1}),o(J,{name:"1",label:"事件",style:{height:"100%"}},{default:n(()=>[t("table",ie,[t("tr",null,[ce,t("td",null,[o(U,{modelValue:y.value,"onUpdate:modelValue":a[11]||(a[11]=e=>y.value=e)},{default:n(()=>[(r(!0),c(V,null,_(s.value.events,e=>(r(),S(x,{key:e.name,value:e.name,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),t("tr",null,[me,t("td",null,[(r(!0),c(V,null,_(s.value.events,e=>f((r(),c("div",{style:{width:"620px"},key:"script_"+e.name},[o(m(j),{modelValue:e.script,"onUpdate:modelValue":k=>e.script=k,height:"320px"},null,8,["modelValue","onUpdate:modelValue"])])),[[g,y.value==e.name]])),128))])])])]),_:1})]),_:1})}}};export{we as default};
