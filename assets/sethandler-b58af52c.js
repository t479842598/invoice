import{ai as n,aT as g,aF as k,c as r,a,F,aV as N,W as i,bD as b,aX as C,o as d,b9 as D,bi as h,U as y}from"./_@vue-5ba92de9.js";const B={cellpadding:"0",cellspacing:"0",border:"0",style:{width:"100%"}},E={style:{margin:"12px 0 15px 0"}},U={style:{padding:"10px 0 0 0"}},T={__name:"sethandler",props:{query:{type:String,default:()=>""}},setup(_){const c=n("ajax"),u=n("utils"),w=n("qs"),x=n("ElSelectorg"),m=n("flowrun_dialogshow"),p=_,o=g([]),t=g(!1),f=u.getQuery(p.query),S=u.query("ismobile",p.query);k(()=>{V()});const V=()=>{t.value=!0,c.post("/Flow/GetAllNextSteps?"+f).then(s=>{s.success?o.value=s.data:u.msg("加载步骤失败！",!1),t.value=!1}).catch(()=>{t.value=!1})},q=()=>{let s=[];for(let e=0;e<o.value.length;e++)s.push({id:o.value[e].id,members:o.value[e].members});t.value=!0,c.post("/Flow/SaveSetHandler?"+f,w.stringify({json:JSON.stringify(s)})).then(e=>{u.msg(e.success?"设置成功！":"设置失败！",e.success),e.success&&(m.value=!1),t.value=!1}).catch(()=>{t.value=!1})};return(s,e)=>{const v=C("el-button");return d(),r("div",null,[a("table",B,[(d(!0),r(F,null,N(o.value,l=>(d(),r("tr",{key:l.id},[a("td",null,[a("div",null,D(l.name),1),a("div",E,[i(h(x),{style:{width:"100%"},placeholder:"选择处理人","show-search":h(S)!="1",modelValue:l.members,"onUpdate:modelValue":j=>l.members=j},null,8,["show-search","modelValue","onUpdate:modelValue"])])])]))),128)),a("tr",null,[a("td",U,[i(v,{disabled:t.value,onClick:e[0]||(e[0]=l=>q()),type:"primary"},{default:b(()=>[y("保存")]),_:1},8,["disabled"]),i(v,{onClick:e[1]||(e[1]=l=>m.value=!1)},{default:b(()=>[y("取消")]),_:1})])])])])}}};export{T as default};
