import{ai as c,aT as f,aF as T,c as B,bF as E,H as N,bD as o,aX as r,aY as P,o as V,W as e,U as h,bi as R}from"./_@vue-5ba92de9.js";const G={__name:"chart",props:{query:{type:String,default:()=>""}},setup(x){const v=c("ajax"),i=c("utils"),k=c("qs"),w=c("ElCodemirror"),b=x,_=i.query("programid",b.query),C={},g=f(null),u=f(!1),m=f(!1),a=f({});T(()=>{q()});const q=()=>{i.length(_)>0?(u.value=!0,v.post("/Program/GetChart?programid="+_).then(n=>{n.code==1?i.msg("加载数据失败！",n.success):a.value=n.data,u.value=!1,m.value=!1}).catch(()=>{u.value=!1,m.value=!1})):m.value=!1},D=async n=>{n&&await n.validate(l=>{l&&(u.value=!0,v.post("/Program/SaveChart"+b.query,k.stringify(a.value)).then(s=>{let p=s.msg;i.length(p)===0&&(p=s.success?"保存成功！":"保存失败！"),i.msg(p,s.success),u.value=!1}).catch(()=>{u.value=!1}))})};return(n,l)=>{const s=r("el-option"),p=r("el-select"),y=r("el-input"),d=r("el-form-item"),L=r("el-checkbox"),U=r("el-button"),j=r("el-form"),F=P("loading");return V(),B("div",null,[E((V(),N(j,{model:a.value,ref_key:"ruleFormRef",ref:g,rules:C,"label-width":"80px"},{default:o(()=>[e(d,{label:"显示设置",prop:"name"},{default:o(()=>[e(p,{modelValue:a.value.showType,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value.showType=t),clearable:"",style:{width:"180px"}},{default:o(()=>[e(s,{value:0,label:"只显示列表"}),e(s,{value:1,label:"只显示图表"}),e(s,{value:2,label:"列表和图表-默认列表"}),e(s,{value:3,label:"列表和图表-默认图表"})]),_:1},8,["modelValue"]),e(d,{label:"列表标题",prop:"listLabel"},{default:o(()=>[e(y,{modelValue:a.value.listLabel,"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.listLabel=t),clearable:"",style:{width:"130px"}},null,8,["modelValue"])]),_:1}),e(d,{label:"图表标题",prop:"chartLabel"},{default:o(()=>[e(y,{modelValue:a.value.chartLabel,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.chartLabel=t),clearable:"",style:{width:"130px"}},null,8,["modelValue"])]),_:1}),e(d,{label:"",prop:"dark"},{default:o(()=>[e(L,{modelValue:a.value.dark,"onUpdate:modelValue":l[3]||(l[3]=t=>a.value.dark=t),"true-label":1,"false-label":0,style:{"margin-left":"12px"}},{default:o(()=>[h("深色模式")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{label:"图表设置",prop:"name"},{default:o(()=>[e(R(w),{modelValue:a.value.option,"onUpdate:modelValue":l[4]||(l[4]=t=>a.value.option=t),type:"json",autofocus:!1,height:"430px",width:"99%"},null,8,["modelValue"])]),_:1}),e(d,null,{default:o(()=>[e(U,{type:"primary",disabled:u.value,onClick:l[5]||(l[5]=t=>D(g.value))},{default:o(()=>[h("保存")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])),[[F,m.value]])])}}};export{G as default};
