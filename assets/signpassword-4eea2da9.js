import{ai as e,aT as d,c as B,W as t,bD as f,aX as i,o as F,U as N}from"./_@vue-5ba92de9.js";const S={__name:"signpassword",props:{query:{type:String,default:()=>""}},setup(m){const w=e("ajax"),n=e("utils"),g=e("qs"),v=m,b=e("flowrun_step"),y=e("flowrun_sign"),k=e("flowrun_dialogshow"),x=e("flowrun_send"),q=e("flowrun_freesend"),V=e("flowrun_back"),h=e("flowrun_completed"),a=d(!1),r=d({}),p=d(null),j={password:[{required:!0,message:"请输入密码",trigger:"blur"}]},u=n.query("signaction",v.query),C=async c=>{c&&await c.validate(l=>{l&&(a.value=!0,w.post("/User/ValidateSignPassword",g.stringify({password:n.aes(r.value.password)})).then(s=>{if(a.value=!1,s.success)b.value.sign=1,y(),k.value=!1,u=="1"?x():u=="2"?V():u=="3"?q():u=="4"&&h();else{let o=s.msg;n.length(o)===0&&(s.code==1?o="未找到当前用户！":s.code==2?o="密码不能为空！":s.code==3&&(o="密码错误！")),n.msg(o,s.success)}}).catch(()=>{a.value=!1}))})};return(c,l)=>{const s=i("el-input"),o=i("el-form-item"),D=i("el-button"),U=i("el-form");return F(),B("div",null,[t(U,{model:r.value,ref_key:"ruleFormRef",ref:p,rules:j,"label-width":"60px"},{default:f(()=>[t(o,{prop:"password",label:"密码"},{default:f(()=>[t(s,{type:"password",modelValue:r.value.password,"onUpdate:modelValue":l[0]||(l[0]=_=>r.value.password=_),clearable:"","show-password":""},null,8,["modelValue"])]),_:1}),t(o,null,{default:f(()=>[t(D,{type:"primary",disabled:a.value,onClick:l[1]||(l[1]=_=>C(p.value))},{default:f(()=>[N("确定")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])])}}};export{S as default};
