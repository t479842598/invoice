import{ai as v,aT as m,aF as B,bF as S,c,a as n,W as f,F as g,aV as w,aX as x,aY as j,o as i,b9 as k,bD as L,ay as z,bi as y,H as G,aZ as J}from"./_@vue-5ba92de9.js";const M={class:"roadui_page"},N={class:"roadui_flowstar_title"},E=["onClick"],H={class:"roadui_flowstar_flowtitle"},U={__name:"starts",setup(I){const C=v("ajax"),a=v("utils"),F=v("index_openmenu"),d=m(!1);B(()=>{b()});const h=m(""),u=m([]);var s=[];const b=()=>{d.value=!0,C.post("/Flow/GetStarts").then(e=>{if(e.success)u.value=e.data,s=a.cloneJson(e.data);else{let t=e.msg;a.length(t)===0&&(t=e.code==1?"用户id错误！":"流程加载失败！"),a.msg(t,!1)}d.value=!1}).catch(()=>{d.value=!1})},V=e=>{if(a.length(e)===0){u.value=a.cloneJson(s);return}let t=[];for(let l=0;l<s.length;l++){const _=s[l].children.filter(p=>p.name.toLowerCase().indexOf(e.toLowerCase())>=0);_.length>0&&t.push({id:s[l].id,title:s[l].title,title_en:s[l].title_en,title_tw:s[l].title_tw,children:_})}u.value=t},D=e=>{const t=a.length(e.address)===0?"/flow/run/index.vue?flowid="+e.id:e.address;F({id:"task_"+a.createGuid(!1),title:e.name,url:t,ico:e.ico,openMode:0})};return(e,t)=>{const l=x("el-input"),_=x("el-space"),p=j("loading");return S((i(),c("div",M,[n("div",null,[f(l,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=r=>h.value=r),placeholder:"输入关键字查询",clearable:"",onInput:V,style:{width:"300px"}},null,8,["modelValue"])]),n("div",null,[(i(!0),c(g,null,w(u.value,r=>(i(),c("div",{key:r.id},[n("div",N,k(r.title),1),f(_,{wrap:"",size:36},{default:L(()=>[(i(!0),c(g,null,w(r.children,o=>(i(),c("div",{key:o.id,onClick:K=>D(o),class:"roadui_flowstar_flow"},[n("div",{class:"roadui_flowstar_flowico",style:z("background-color:"+(y(a).length(o.color)===0?"var(--el-color-primary)":o.color))},[(i(),G(J(y(a).length(o.ico)>0?o.ico:"ship")))],4),n("div",H,[n("span",null,k(o.name),1)])],8,E))),128))]),_:2},1024)]))),128))])])),[[p,d.value]])}}};export{U as default};
