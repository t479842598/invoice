import{B as X}from"./_@element-plus-ad4c9002.js";import"./_vue-cropper-aa77d280.js";import{_ as K}from"./index-823f4b27.js";import{ai as c,aT as b,aF as Q,c as T,W as e,bD as o,aX as m,o as B,U as i,a as s,bi as E,H as Y,aP as Z,aM as ee}from"./_@vue-5ba92de9.js";import"./__vendor-5e6ac033.js";import"./_crypto-js-0812dcff.js";import"./_element-plus-8c7ce171.js";import"./_@popperjs-c75af06c.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";const n=x=>(Z("data-v-e881c209"),x=x(),ee(),x),le={class:"system-setting"},ae={style:{display:"flex",width:"82vw","align-items":"stretch"}},te={style:{display:"block",border:"1px solid #eee",padding:"0 10px","flex-grow":"1"}},oe=n(()=>s("h3",{class:"before"},"单位信息",-1)),se={style:{"margin-top":"20px"}},ue=n(()=>s("h3",{class:"before"},"系统设置",-1)),de={style:{width:"100%","text-align":"center"}},ne={cellpadding:"0",cellspacing:"0",border:"0",style:{width:"40%"}},ie={style:{"padding-left":"50px"}},re=["src"],me={style:{width:"210px",height:"178px","margin-left":"5px","text-align":"center"}},pe={style:{"padding-top":"5px"}},ve={style:{display:"block","text-align":"center"}},fe={style:{"margin-left":"1%"}},_e=n(()=>s("h3",{class:"before"},"邮件模板设置",-1)),ce={class:"cardsetting",style:{display:"block",border:"1px solid #eee","padding-left":"10px","flex-grow":"1"}},be={class:"box-card1"},ge=n(()=>s("h3",{class:"before"},"导入发票设置",-1)),ye=n(()=>s("br",null,null,-1)),Ve=n(()=>s("br",null,null,-1)),xe=n(()=>s("br",null,null,-1)),he=n(()=>s("br",null,null,-1)),we=n(()=>s("br",null,null,-1)),Ue=n(()=>s("br",null,null,-1)),Se=n(()=>s("h3",{class:"before"},"发票明细合并规则",-1)),Ce=n(()=>s("br",null,null,-1)),ke=n(()=>s("br",null,null,-1)),Ie=n(()=>s("br",null,null,-1)),Be=n(()=>s("br",null,null,-1)),je=n(()=>s("h3",{class:"before"},"发票明细合并方式",-1)),De=n(()=>s("br",null,null,-1)),Te=n(()=>s("br",null,null,-1)),Ee=n(()=>s("br",null,null,-1)),He=n(()=>s("br",null,null,-1)),Me={style:{display:"block","flex-grow":"1",border:"1px solid #eee"}},Ne=n(()=>s("h3",{class:"before"},"优惠政策设置",-1)),Oe=n(()=>s("h3",{class:"before"},"发票类型显示设置",-1)),Re={__name:"systemsetting copy",props:{query:{type:String,default:()=>""}},setup(x){const h=c("ajax"),f=c("utils"),w=b("");localStorage.getItem("sobInfo")!=""&&(w.value=JSON.parse(localStorage.getItem("sobInfo")));const j=c("qs"),H=c("config"),U=c("index_userinfo"),D=b(null),y=b(!1),p=b({img:"",outputType:"png",autoCrop:!0,autoCropWidth:200,autoCropHeight:200,centerBox:!0});c("ElSelectflow"),c("index_openmenu"),c("index_removetab");const M=c("index_refreshtab"),N=b({prop:"taxUnit",order:"descending"});b(f.getPager(N.value));const S=b(!1);b("");const a=b({departcode:"",departname:"",systemid:"",systemname:"",emailtitle:"",emailtext:"",vatSpecialManagement:"",taxrate:"无",默认发票类型:"",不排除负数量项目:!1,自动截取超长字段:!1,导入折扣:!1,赠品方式折扣:!1,按比例折扣:!1,折扣比例:0,允许多行折扣:!1,不显示确认开票对话框:!1,明细合并时金额税额调整:!1,按价税合计合并:!1,按金额合并:!1,推送客户邮箱:!1,是否抄送公司邮箱:!1,是否默认选中购买方:!1,是否默认选中销售方:!1});Q(()=>{p.value.img=U.value.headerImg,O()});const O=async()=>{S.value=!0;try{const d=await h.post("/Systemset/Get?srcorgid="+w.value.id,{});S.value=!1,a.value=d.data.invoicesystemset}catch{S.value=!1}},R=async()=>{try{const d=await h.post("/Systemset/Save?srcorgid="+w.value.id,j.stringify({systemsetJSON:JSON.stringify(a.value)}));f.msg(d.success?"保存成功！":"保存失败！",d.success,!1),M()}catch{f.msg("保存失败！",!1,!1)}},W=(d,l)=>{const _=new FileReader;_.addEventListener("load",()=>l(_.result)),_.readAsDataURL(d)},A=d=>{if(["image/jpeg","image/png","image/gif"].includes(d.type)){if(d.size/1024/1024>1)return f.msg("上传的图片文件不能大于1M!",!1),!1}else return f.msg("头像必须是图片格式!",!1),!1;return!0},q=async(d,l)=>{await W(l.raw,_=>{p.value.img=_})},F=async()=>{if(f.length(p.value.img)<=0){f.msg("没有要保存的头像！",!1);return}try{y.value=!0;const d=await D.value.getCropData(),l=await h.post("/User/SaveHeader",j.stringify({img:d}));f.msg(l.success?"保存成功！":"保存失败！",l.success),l.success&&(U.value.headerImg=d,y.value=!1)}catch{y.value=!1}},J=async()=>{try{const d=await h.post("/User/ResetHeader");f.msg(d.success?"恢复成功！":"恢复失败！",d.success),d.success&&(p.value.img="",U.value.headerImg="",y.value=!1)}catch{y.value=!1}};return(d,l)=>{const _=m("el-button"),v=m("el-form-item"),V=m("el-input"),g=m("el-form"),L=m("el-icon"),z=m("el-upload"),G=m("vueCropper"),r=m("el-checkbox"),P=m("el-input-number"),C=m("el-col"),k=m("el-row"),u=m("el-option"),I=m("el-select"),$=m("el-card");return B(),T("div",le,[e($,{class:"box-card card",shadow:"never"},{default:o(()=>[e(v,null,{default:o(()=>[e(_,{type:"primary",style:{width:"100px"},onClick:R},{default:o(()=>[i("保存")]),_:1})]),_:1}),s("div",ae,[s("div",te,[oe,e(g,{ref:"topform",style:{"margin-top":"20px"},model:a.value},{default:o(()=>[e(v,{label:"单位编号"},{default:o(()=>[e(V,{style:{width:"80%"},modelValue:a.value.departcode,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value.departcode=t)},null,8,["modelValue"])]),_:1}),e(v,{label:"单位名称"},{default:o(()=>[e(V,{style:{width:"80%"},modelValue:a.value.departname,"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.departname=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),s("div",se,[s("div",null,[ue,s("div",de,[e(g,{ref:"topform",model:a.value},{default:o(()=>[e(v,{label:"系统名称"},{default:o(()=>[e(V,{style:{width:"80%"},modelValue:a.value.systemname,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.systemname=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),s("table",ne,[s("tr",null,[s("td",null,[s("div",ie,[e(z,{action:E(H).SERVER_WEBADDRESS+"/Files/SaveFiles","show-file-list":!1,"with-credentials":"",accept:".jpg,.jpeg,.png,.gif",data:{filetype:".jpg,.jpeg,.png,.gif",uploadtype:4},"on-success":q,"before-upload":A},{default:o(()=>[d.imageUrl?(B(),T("img",{key:0,src:d.imageUrl,class:"avatar"},null,8,re)):(B(),Y(L,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[e(E(X))]),_:1}))]),_:1},8,["action","data"]),s("div",me,[e(G,{ref_key:"cropper",ref:D,img:p.value.img,autoCrop:p.value.autoCrop,autoCropWidth:p.value.autoCropWidth,autoCropHeight:p.value.autoCropHeight,centerBox:p.value.centerBox,outputType:p.value.outputType},null,8,["img","autoCrop","autoCropWidth","autoCropHeight","centerBox","outputType"])])])])]),s("tr",null,[s("td",pe,[s("div",ve,[e(_,{style:{width:"100px"},type:"primary",disabled:y.value,onClick:l[3]||(l[3]=t=>F())},{default:o(()=>[i("保存LOGO")]),_:1},8,["disabled"]),e(_,{style:{width:"100px"},type:"primary",disabled:y.value,onClick:l[4]||(l[4]=t=>J())},{default:o(()=>[i("恢复默认")]),_:1},8,["disabled"])])])])])])]),s("div",fe,[_e,e(g,{ref:"topform",model:a.value},{default:o(()=>[e(v,{label:"邮件标题"},{default:o(()=>[e(V,{style:{width:"80%"},modelValue:a.value.emailtitle,"onUpdate:modelValue":l[5]||(l[5]=t=>a.value.emailtitle=t)},null,8,["modelValue"])]),_:1}),e(v,{label:"底部内容"},{default:o(()=>[e(V,{type:"textarea",rows:6,style:{width:"80%"},modelValue:a.value.emailtext,"onUpdate:modelValue":l[6]||(l[6]=t=>a.value.emailtext=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])])]),s("div",ce,[s("div",be,[s("div",null,[ge,e(k,null,{default:o(()=>[e(C,null,{default:o(()=>[e(g,{model:a.value,inline:""},{default:o(()=>[e(r,{modelValue:a.value.不排除负数量项目,"onUpdate:modelValue":l[7]||(l[7]=t=>a.value.不排除负数量项目=t),label:"不排除负数量项目"},{default:o(()=>[i("不排除负数量项目")]),_:1},8,["modelValue"]),ye,e(r,{modelValue:a.value.自动截取超长字段,"onUpdate:modelValue":l[8]||(l[8]=t=>a.value.自动截取超长字段=t),label:"自动截取超长字段"},{default:o(()=>[i("自动截取超长字段")]),_:1},8,["modelValue"]),Ve,e(r,{modelValue:a.value.赠品方式折扣,"onUpdate:modelValue":l[9]||(l[9]=t=>a.value.赠品方式折扣=t),label:"导入折扣"},{default:o(()=>[i("赠品方式折扣")]),_:1},8,["modelValue"]),xe,e(r,{modelValue:a.value.导入折扣,"onUpdate:modelValue":l[10]||(l[10]=t=>a.value.导入折扣=t),label:"导入折扣"},{default:o(()=>[i("导入折扣")]),_:1},8,["modelValue"]),he,s("div",null,[e(r,{modelValue:a.value.按比例折扣,"onUpdate:modelValue":l[11]||(l[11]=t=>a.value.按比例折扣=t),label:"按比例折扣"},{default:o(()=>[i("按比例折扣")]),_:1},8,["modelValue"]),e(P,{modelValue:a.value.折扣比例,"onUpdate:modelValue":l[12]||(l[12]=t=>a.value.折扣比例=t),min:0,max:100,controls:!1,size:"small",style:{width:"50px","margin-top":"-10px"}},null,8,["modelValue"])]),e(r,{modelValue:a.value.允许多行折扣,"onUpdate:modelValue":l[13]||(l[13]=t=>a.value.允许多行折扣=t),style:{"margin-left":"22px"},label:"允许多行折扣"},{default:o(()=>[i("允许多行折扣")]),_:1},8,["modelValue"]),we,e(r,{modelValue:a.value.不显示确认开票对话框,"onUpdate:modelValue":l[14]||(l[14]=t=>a.value.不显示确认开票对话框=t),label:"不显示确认开票对话框"},{default:o(()=>[i("不显示确认开票对话框")]),_:1},8,["modelValue"]),Ue]),_:1},8,["model"])]),_:1})]),_:1})]),s("div",null,[Se,e(k,null,{default:o(()=>[e(C,null,{default:o(()=>[e(g,{model:a.value,inline:""},{default:o(()=>[e(r,{modelValue:a.value.不合并,"onUpdate:modelValue":l[15]||(l[15]=t=>a.value.不合并=t),label:"不合并"},{default:o(()=>[i("不合并")]),_:1},8,["modelValue"]),Ce,e(r,{modelValue:a.value.存货单价税率相同者合并,"onUpdate:modelValue":l[16]||(l[16]=t=>a.value.存货单价税率相同者合并=t),label:"存货单价税率相同者合并"},{default:o(()=>[i("存货单价税率相同者合并")]),_:1},8,["modelValue"]),ke,e(r,{modelValue:a.value.存货税率相同者合并,"onUpdate:modelValue":l[17]||(l[17]=t=>a.value.存货税率相同者合并=t),label:"存货税率相同者合并"},{default:o(()=>[i("存货税率相同者合并")]),_:1},8,["modelValue"]),Ie,e(r,{modelValue:a.value.存货相同者合并,"onUpdate:modelValue":l[18]||(l[18]=t=>a.value.存货相同者合并=t),label:"存货相同者合并"},{default:o(()=>[i("存货相同者合并")]),_:1},8,["modelValue"]),Be]),_:1},8,["model"])]),_:1})]),_:1})]),s("div",null,[je,e(k,null,{default:o(()=>[e(C,null,{default:o(()=>[e(g,{model:a.value,inline:""},{default:o(()=>[e(r,{modelValue:a.value.按价税合计合并,"onUpdate:modelValue":l[19]||(l[19]=t=>a.value.按价税合计合并=t),label:"按价税合计合并"},{default:o(()=>[i("按价税合计合并（调整金额税额）")]),_:1},8,["modelValue"]),De,e(r,{modelValue:a.value.按金额合并,"onUpdate:modelValue":l[20]||(l[20]=t=>a.value.按金额合并=t),label:"按金额合并"},{default:o(()=>[i("按金额合并（调整税额价税合计）")]),_:1},8,["modelValue"]),Te,e(r,{modelValue:a.value.推送客户邮箱,"onUpdate:modelValue":l[21]||(l[21]=t=>a.value.推送客户邮箱=t),label:"推送客户邮箱"},{default:o(()=>[i("推送客户邮箱")]),_:1},8,["modelValue"]),Ee,e(r,{modelValue:a.value.是否抄送公司邮箱,"onUpdate:modelValue":l[22]||(l[22]=t=>a.value.是否抄送公司邮箱=t),label:"是否抄送公司邮箱"},{default:o(()=>[i("是否抄送公司邮箱")]),_:1},8,["modelValue"]),He]),_:1},8,["model"])]),_:1})]),_:1})])])]),s("div",Me,[Ne,e(g,{model:a.value,style:{"margin-top":"20px",padding:"0 10px"}},{default:o(()=>[e(v,{label:"优惠政策类型"},{default:o(()=>[e(I,{modelValue:a.value.vatSpecialManagement,"onUpdate:modelValue":l[23]||(l[23]=t=>a.value.vatSpecialManagement=t),style:{width:"80%"},placeholder:"请选择优惠政策类型"},{default:o(()=>[e(u,{label:"不征税",value:"不征税"}),e(u,{label:"免税",value:"免税"}),e(u,{label:"先征后退",value:"先征后退"}),e(u,{label:"100%先征后退",value:"100%先征后退"}),e(u,{label:"50%先征后退",value:"50%先征后退"}),e(u,{label:"简易征收",value:"简易征收"}),e(u,{label:"即征即退30%",value:"即征即退30%"}),e(u,{label:"即征即退50%",value:"即征即退50%"}),e(u,{label:"即征即退70%",value:"即征即退70%"}),e(u,{label:"即征即退100%",value:"即征即退100%"}),e(u,{label:"超税负3%即征即退",value:"超税负3%即征即退"}),e(u,{label:"超税负6%即征即退",value:"超税负6%即征即退"}),e(u,{label:"超税负8%即征即退",value:"超税负8%即征即退"}),e(u,{label:"超税负12%即征即退",value:"超税负12%即征即退"}),e(u,{label:"稀土产品",value:"稀土产品"}),e(u,{label:"按5%简易征收减按1.5%计征",value:"按5%简易征收减按1.5%计征"}),e(u,{label:"按5%简易征收",value:"按5%简易征收"}),e(u,{label:"按3%简易征收",value:"按3%简易征收"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"优惠政策税率"},{default:o(()=>[e(I,{modelValue:a.value.taxrate,"onUpdate:modelValue":l[24]||(l[24]=t=>a.value.taxrate=t),style:{width:"80%"},placeholder:"请选择优惠政策税率"},{default:o(()=>[e(u,{label:"无",value:"无"}),e(u,{label:"0",value:"0"}),e(u,{label:"1%",value:"0.01"}),e(u,{label:"3%",value:"0.03"}),e(u,{label:"6%",value:"0.06"}),e(u,{label:"9%",value:"0.09"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),Oe,e(g,{model:a.value,style:{"margin-top":"20px",padding:"0 10px"}},{default:o(()=>[e(v,null,{default:o(()=>[e(r,{modelValue:a.value.是否默认选中购买方,"onUpdate:modelValue":l[25]||(l[25]=t=>a.value.是否默认选中购买方=t),label:"是否默认选中购买方"},{default:o(()=>[i("是否默认选中购买方")]),_:1},8,["modelValue"]),e(r,{modelValue:a.value.是否默认选中销售方,"onUpdate:modelValue":l[26]||(l[26]=t=>a.value.是否默认选中销售方=t),label:"自动截取超长字段"},{default:o(()=>[i("是否默认选中销售方")]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"默认发票类型"},{default:o(()=>[e(I,{modelValue:a.value.默认发票类型,"onUpdate:modelValue":l[27]||(l[27]=t=>a.value.默认发票类型=t),style:{width:"80%"},placeholder:"默认发票类型"},{default:o(()=>[e(u,{label:"全电专用发票",value:"01"}),e(u,{label:"全电普通发票",value:"02"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])])]),_:1})])}}},Ke=K(Re,[["__scopeId","data-v-e881c209"]]);export{Ke as default};
