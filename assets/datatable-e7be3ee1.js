import{ai as z,aT as p,aF as L,by as N,c as g,a,b9 as _,W as u,bD as d,U as n,bF as R,bv as B,aX as s,o as c,F as U,aV as A,H as q,bi as C}from"./_@vue-5ba92de9.js";const D={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},J=a("th",{style:{width:"60px"}},"控件id",-1),O={class:"roadui_formfont"},I=a("th",null,"绑定字段",-1),Q={class:"roadui_note1"},j={style:{"margin-left":"12px"}},H=a("th",null,"尺寸",-1),K=a("th",null,"数据来源",-1),M=a("th",null,"SQL/URL",-1),W=a("th",null,"列设置",-1),G={__name:"datatable",props:{query:{type:String,default:()=>""}},setup(T){const r=z("utils"),k=T,E=r.query("editorname",k.query),v=window.parent.CKEDITOR.instances[E],b=v.formAttributeJSON,e=p({}),V=p([]),f=p([]);L(()=>{b&&r.getConnTableFields(b.dbConn,b.dbTable).then(o=>{V.value=o}),h()}),N(()=>e.value.dataSource,o=>{o=="sql"&&r.getConns().then(t=>{f.value=t})});const h=o=>{e.value={id:"",field:"",label:"",title:!1,width:"",height:"",border:!1,stripe:!1,columns:"",dataSource:"",dataSourceSqlConn:"",dataSourceText:"",size:""},o||(o=v.currentSelectEditorElement),o&&(e.value.id=o.getAttribute("data-id"),e.value.label=o.getAttribute("data-label"),e.value.field=o.getAttribute("data-bindfiled"),e.value.title=o.getAttribute("data-title")=="true",e.value.width=o.getAttribute("data-width"),e.value.height=o.getAttribute("data-height"),e.value.border=o.getAttribute("data-border")=="true",e.value.stripe=o.getAttribute("data-stripe")=="true",e.value.size=o.getAttribute("data-size"),e.value.columns=r.decodeURI(o.getAttribute("data-columns")),e.value.dataSource=o.getAttribute("data-datasource"),e.value.dataSourceSqlConn=o.getAttribute("data-datasourcesqlconn"),e.value.dataSourceText=r.decodeURI(o.getAttribute("data-datasourcetext"))),v.currentSelectEditorElementJson=e.value,v.initFunction_datatable=h};return(o,t)=>{const x=s("el-option"),S=s("el-select"),i=s("el-input"),m=s("el-radio"),y=s("el-radio-group"),w=s("el-checkbox");return c(),g("table",D,[a("tr",null,[J,a("td",O,_(e.value.id),1)]),a("tr",null,[I,a("td",null,[u(S,{modelValue:e.value.field,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.field=l),filterable:"",style:{width:"260px"},clearable:""},{default:d(()=>[(c(!0),g(U,null,A(V.value,l=>(c(),q(x,{key:l.name,value:l.name,label:l.name+(C(r).length(l.comment)>0?" - "+l.comment:"")},{default:d(()=>[a("span",null,_(l.name),1),a("span",Q,_(C(r).length(l.comment)>0?" - "+l.comment:""),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"]),a("span",j,[n(" 标签"),u(i,{modelValue:e.value.label,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.label=l),placeholder:"控件label",style:{width:"275px","margin-left":"12px"},clearable:""},null,8,["modelValue"])])])]),a("tr",null,[H,a("td",null,[u(y,{modelValue:e.value.size,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.size=l),style:{"margin-right":"12px","vertical-align":"middle"}},{default:d(()=>[u(m,{label:"default"},{default:d(()=>[n("默认")]),_:1}),u(m,{label:"large"},{default:d(()=>[n("大")]),_:1}),u(m,{label:"small"},{default:d(()=>[n("小")]),_:1})]),_:1},8,["modelValue"]),u(w,{modelValue:e.value.border,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.border=l),style:{"vertical-align":"middle","margin-right":"12px"}},{default:d(()=>[n("边框")]),_:1},8,["modelValue"]),u(w,{modelValue:e.value.stripe,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.stripe=l),style:{"vertical-align":"middle","margin-right":"12px"}},{default:d(()=>[n("斑马纹")]),_:1},8,["modelValue"]),n(" 宽度 "),u(i,{modelValue:e.value.width,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.width=l),style:{width:"90px",margin:"0 12px"}},null,8,["modelValue"]),n(" 高度"),u(i,{modelValue:e.value.height,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.height=l),style:{width:"90px","margin-left":"12px"}},null,8,["modelValue"])])]),a("tr",null,[K,a("td",null,[u(y,{modelValue:e.value.dataSource,"onUpdate:modelValue":t[7]||(t[7]=l=>e.value.dataSource=l),style:{"margin-right":"12px","vertical-align":"middle"}},{default:d(()=>[u(m,{label:"sql"},{default:d(()=>[n("SQL")]),_:1}),u(m,{label:"url"},{default:d(()=>[n("URL")]),_:1})]),_:1},8,["modelValue"]),R(a("span",null,[n(" 数据连接 "),u(S,{modelValue:e.value.dataSourceSqlConn,"onUpdate:modelValue":t[8]||(t[8]=l=>e.value.dataSourceSqlConn=l),style:{width:"210px","margin-left":"12px","vertical-align":"middle"}},{default:d(()=>[(c(!0),g(U,null,A(f.value,(l,F)=>(c(),q(x,{key:"conn_"+F,value:l.id,label:l.title},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])],512),[[B,e.value.dataSource=="sql"]])])]),a("tr",null,[M,a("td",null,[u(i,{type:"textarea",rows:3,modelValue:e.value.dataSourceText,"onUpdate:modelValue":t[9]||(t[9]=l=>e.value.dataSourceText=l)},null,8,["modelValue"])])]),a("tr",null,[W,a("td",null,[u(i,{type:"textarea",rows:5,modelValue:e.value.columns,"onUpdate:modelValue":t[10]||(t[10]=l=>e.value.columns=l),placeholder:"<el-table-column type='selection' width='45'/>..."},null,8,["modelValue"])])])])}}};export{G as default};
