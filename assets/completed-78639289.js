import{ai as g,aT as _,c as p,a as i,W as l,bD as o,bF as x,F as G,aV as H,bv as W,aX as a,aY as N,o as d,U as r,H as X,b9 as u,bi as D,I as Y}from"./_@vue-5ba92de9.js";const J={style:{height:"inherit"}},K={class:"roaduim_title"},O=i("span",null,"已办事项",-1),P={style:{padding:"0 12px"}},Q=["infinite-scroll-disabled"],R=["onClick"],Z={class:"roaduim_main_todonote"},ee={class:"roadui_note",style:{"text-align":"center",padding:"10px 0"}},ae={__name:"completed",setup(te){const k=g("ajax"),w=g("utils"),F=g("qs"),I=g("indexm_openurl"),m=_(!1),c=_(!1),T=_(0);let v=0;const s=_({status:0}),f=_([]),U=()=>{c.value||(v++,b(!1))},b=n=>{n&&(f.value=new Array,v=1),m.value=!0,c.value=!0,s.value.size=8,s.value.number=v,s.value.order="completedtime desc",k.post("/Flow/GetCompletedList",F.stringify(s.value)).then(t=>{f.value=f.value.concat(t.data.rows),T.value=t.data.total,c.value=v>=Math.ceil(t.data.total/8),m.value=!1}).catch(()=>{m.value=!1})},B=n=>{const t="task_completed_"+n.id,y="/flow/run/index.vue?flowid="+n.flowId+"&stepid="+n.stepId+"&taskid="+n.id+"&groupid="+n.groupId+"&instanceid="+n.instanceId+"&ismobile=1";I(t,y)};return(n,t)=>{const y=a("FolderChecked"),C=a("el-icon"),$=a("el-input"),h=a("el-form-item"),V=a("el-radio-button"),j=a("el-radio-group"),L=a("el-button"),q=a("el-form"),z=a("el-tag"),M=a("User"),S=a("el-space"),A=N("infinite-scroll"),E=N("loading");return d(),p("div",J,[i("div",K,[l(C,null,{default:o(()=>[l(y)]),_:1}),O]),x((d(),p("div",null,[i("div",P,[l(q,{inline:!0},{default:o(()=>[l(h,{label:"",style:{margin:"0 12px 0 0",width:"100px"}},{default:o(()=>[l($,{modelValue:s.value.title,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value.title=e),placeholder:`共${T.value}项`,clearable:""},null,8,["modelValue","placeholder"])]),_:1}),l(h,{label:"",style:{margin:"0 12px 0 0"}},{default:o(()=>[l(j,{modelValue:s.value.status,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.status=e),onChange:t[2]||(t[2]=e=>b(!0))},{default:o(()=>[l(V,{label:"0"},{default:o(()=>[r("进行中")]),_:1}),l(V,{label:"1"},{default:o(()=>[r("已结束")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(h,{style:{margin:"0"}},{default:o(()=>[l(L,{type:"primary",onClick:t[3]||(t[3]=e=>b(!0))},{default:o(()=>[r("查询")]),_:1})]),_:1})]),_:1})]),x((d(),p("div",{style:{padding:"0 6px"},"infinite-scroll-disabled":c.value,"infinite-scroll-immediate":!0},[(d(!0),p(G,null,H(f.value,e=>(d(),p("div",{key:e.id,class:"roaduim_main_todoitem",onClick:le=>{B(e)}},[i("div",null,[e.taskType>0?(d(),X(z,{key:0,effect:"dark",style:{"margin-right":"5px","border-width":"0"},color:D(w).getTaskTypeColor(e.taskType)},{default:o(()=>[r(u(D(w).getTaskTypeTitle(e.taskType)),1)]),_:2},1032,["color"])):Y("",!0),r(" "+u(e.title),1)]),i("div",Z,[l(S,{size:15,wrap:""},{default:o(()=>[i("span",null,[l(C,null,{default:o(()=>[l(M)]),_:1}),r(u(e.senderName),1)]),i("span",null,u(e.flowName)+" - "+u(e.stepName),1),i("span",null,u(e.completedTime),1)]),_:2},1024)])],8,R))),128)),x(i("div",ee,"没有更多了",512),[[W,c.value]])],8,Q)),[[A,U]])])),[[E,m.value]])])}}};export{ae as default};
