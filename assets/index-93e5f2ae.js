import{ai as h,aT as i,aF as q,c as H,a as f,W as a,bD as o,bF as I,H as N,aX as u,aY as O,o as w,bi as y,U as _,b9 as k,I as A}from"./_@vue-5ba92de9.js";const E={class:"roadui_page"},G=["onClick"],L={class:"roadui_pagerdiv"},J={__name:"index",setup(W){const T=h("ajax"),s=h("utils"),U=h("qs"),b=i(!1),v=i(!1),n=i({}),d=i([]),C=i([]),V=i({prop:"writetime",order:"descending"}),l=i(s.getPager(V.value));q(()=>{c()});const S=r=>{l.value.size=r,c(!1)},B=r=>{l.value.number=r,c(!1)},Y=r=>{l.value.order=s.getOrder(r),c(!1)},c=r=>{r&&(l.value.number=1),b.value=!0,v.value=!0,n.value.size=l.value.size,n.value.number=l.value.number,n.value.order=l.value.order,n.value.date1=s.length(d.value)>0?d.value[0]:"",n.value.date2=s.length(d.value)>1?d.value[1]:"",T.post("/FlowArchive/GetList",U.stringify(n.value)).then(t=>{C.value=t.data.rows,l.value.total=t.data.total,v.value=!1,b.value=!1}).catch(()=>{v.value=!1,b.value=!1})},z=r=>{s.open("?loadurl="+encodeURIComponent("/flow/archive/print.vue?archiveid="+r.id),1e3,600,r.title)};return(r,t)=>{const g=u("el-input"),m=u("el-form-item"),j=u("el-date-picker"),x=u("el-button"),P=u("el-form"),D=u("el-tag"),p=u("el-table-column"),F=u("el-table"),M=u("el-pagination"),R=O("loading");return w(),H("div",E,[f("div",null,[a(P,{inline:!0},{default:o(()=>[a(m,{label:"标题"},{default:o(()=>[a(g,{modelValue:n.value.title,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value.title=e),style:{width:"130px"},clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"流程"},{default:o(()=>[a(g,{modelValue:n.value.flowName,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.flowName=e),style:{width:"130px"},clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"步骤"},{default:o(()=>[a(g,{modelValue:n.value.stepName,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.stepName=e),style:{width:"130px"},clearable:""},null,8,["modelValue"])]),_:1}),a(m,{label:"日期"},{default:o(()=>[a(j,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),style:{width:"220px"},type:"daterange","value-format":"YYYY-MM-DD","unlink-panels":"","start-placeholder":"开始日期","end-placeholder":"结束日期",shortcuts:y(s).dateShortucts},null,8,["modelValue","shortcuts"])]),_:1}),a(m,null,{default:o(()=>[a(x,{type:"primary",disabled:v.value,onClick:t[4]||(t[4]=e=>c(!0))},{default:o(()=>[_("查询")]),_:1},8,["disabled"])]),_:1})]),_:1})]),f("div",null,[I((w(),N(F,{data:C.value,stripe:l.value.tableStripe,border:l.value.tableBorder,style:{width:"100%"},"highlight-current-row":l.value.tableHighlightCurrentRow,"default-sort":V.value,onSortChange:Y},{default:o(()=>[a(p,{prop:"title",label:"标题",sortable:"custom","show-overflow-tooltip":""},{default:o(e=>[e.row.taskType>0?(w(),N(D,{key:0,effect:"dark",style:{"margin-right":"8px","border-width":"0"},color:y(s).getTaskTypeColor(e.row.taskType)},{default:o(()=>[_(k(y(s).getTaskTypeTitle(e.row.taskType)),1)]),_:2},1032,["color"])):A("",!0),f("a",{class:"roaduia",href:"javascript:;",onClick:$=>z(e.row)},k(e.row.title),9,G)]),_:1}),a(p,{prop:"flowName",label:"流程",width:"180",sortable:"custom"}),a(p,{prop:"stepName",label:"步骤",width:"180",sortable:"custom"}),a(p,{prop:"receiveTime",label:"归档时间",width:"150",sortable:"custom"}),a(p,{prop:"senderName",label:"处理人",width:"100",sortable:"custom"},{default:o(e=>[a(D,null,{default:o(()=>[_(k(e.row.senderName),1)]),_:2},1024)]),_:1}),a(p,{width:"80"},{default:o(e=>[a(x,{onClick:$=>z(e.row),type:"primary",size:"small"},{default:o(()=>[_("查看")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","stripe","border","highlight-current-row","default-sort"])),[[R,b.value]]),f("div",L,[a(M,{currentPage:l.value.number,"onUpdate:currentPage":t[5]||(t[5]=e=>l.value.number=e),"page-size":l.value.size,"onUpdate:pageSize":t[6]||(t[6]=e=>l.value.size=e),"page-sizes":l.value.sizes,background:l.value.background,layout:l.value.layout,total:l.value.total,disabled:v.value,onSizeChange:S,onCurrentChange:B},null,8,["currentPage","page-size","page-sizes","background","layout","total","disabled"])])])])}}};export{J as default};
