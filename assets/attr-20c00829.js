import{ai as y,aT as m,aF as P,c as p,a as t,W as n,bi as r,bD as s,bF as M,bv as j,aX as b,o as u,F as V,aV as g,H as x,b9 as i,U as f}from"./_@vue-5ba92de9.js";const A={class:"roadui_fromtable",style:{width:"95%",margin:"0 auto"}},H=t("th",null,"表单名称",-1),L={colspan:"3"},R=t("th",null,"管理人员",-1),W={colspan:"3"},X=t("th",{style:{width:"70px"}},"数据连接",-1),z=t("th",{style:{width:"70px","padding-left":"20px"}},"数据表",-1),G={class:"roadui_note1"},Q=t("th",null,"主键",-1),Y={class:"roadui_note1"},Z=t("th",{style:{"padding-left":"20px"}},"标题字段",-1),$={class:"roadui_note1"},ee=t("th",null,"标题表达式",-1),le={colspan:"3"},te=t("th",null,"表单分类",-1),ae=t("th",{style:{"padding-left":"20px"}},"标签宽度",-1),ne=t("span",null,"标签后缀",-1),oe=t("th",null,"检验信息",-1),se={colspan:"3"},ue={style:{"margin-left":"12px"}},re={__name:"attr",props:{query:{type:String,default:()=>""}},setup(B){const E=y("ajax"),o=y("utils"),F=y("qs"),N=y("ElSelectorg"),O=B,T=m([]),C=m([]),U=m([]),w=m([]),q=o.query("editorname",O.query),D=window.parent.CKEDITOR.instances[q],l=m(D.formAttributeJSON);P(()=>{I()});const I=()=>{const d=[{id:"system_applibrary_formtype",key:"type",children:!0,valueField:"id"}];E.post("/Dictionary/getMultipleOptions",F.stringify({json:JSON.stringify(d)})).then(a=>{T.value=a.data.type,J(),o.length(l.value.dbConn)>0&&k(l.value.dbConn)}).catch(()=>{})},J=()=>{o.getConns().then(d=>{C.value=d})},k=d=>{o.getConnTables(d).then(a=>{U.value=a,o.length(l.value.dbTable)>0&&S(l.value.dbTable)})},S=d=>{o.getConnTableFields(l.value.dbConn,d).then(a=>{w.value=a})};return(d,a)=>{const c=b("el-input"),v=b("el-option"),_=b("el-select"),K=b("el-cascader"),h=b("el-checkbox");return u(),p("table",A,[t("tr",null,[H,t("td",L,[n(c,{modelValue:l.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.name=e),clearable:""},null,8,["modelValue"])])]),t("tr",null,[R,t("td",W,[n(r(N),{modelValue:l.value.manageUser,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.manageUser=e),"select-type":"user",style:{width:"100%"},clearable:""},null,8,["modelValue"])])]),t("tr",null,[X,t("td",null,[n(_,{modelValue:l.value.dbConn,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.dbConn=e),onChange:k,style:{width:"100%"},clearable:""},{default:s(()=>[(u(!0),p(V,null,g(C.value,e=>(u(),x(v,{key:e.id,value:e.id,label:e.title},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),z,t("td",null,[n(_,{modelValue:l.value.dbTable,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.dbTable=e),style:{width:"100%"},onChange:S,filterable:"",clearable:""},{default:s(()=>[(u(!0),p(V,null,g(U.value,e=>(u(),x(v,{key:e.key,value:e.key,label:e.key+(r(o).length(e.label)>0?" - "+e.label:"")},{default:s(()=>[t("span",null,i(e.key),1),t("span",G,i(r(o).length(e.label)>0?" - "+e.label:""),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])])]),t("tr",null,[Q,t("td",null,[n(_,{modelValue:l.value.dbTablePrimaryKey,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.dbTablePrimaryKey=e),style:{width:"100%"},filterable:"",clearable:""},{default:s(()=>[(u(!0),p(V,null,g(w.value,e=>(u(),x(v,{key:e.name,value:e.name,label:e.name+(r(o).length(e.comment)>0?" - "+e.comment:"")},{default:s(()=>[t("span",null,i(e.name),1),t("span",Y,i(r(o).length(e.comment)>0?" - "+e.comment:""),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),Z,t("td",null,[n(_,{modelValue:l.value.dbTableTitle,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.dbTableTitle=e),style:{width:"100%"},filterable:"",clearable:""},{default:s(()=>[(u(!0),p(V,null,g(w.value,e=>(u(),x(v,{key:e.name,value:e.name,label:e.name+(r(o).length(e.comment)>0?" - "+e.comment:"")},{default:s(()=>[t("span",null,i(e.name),1),t("span",$,i(r(o).length(e.comment)>0?" - "+e.comment:""),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])])]),t("tr",null,[ee,t("td",le,[n(c,{type:"textarea",rows:3,modelValue:l.value.dbTableTitleExpression,"onUpdate:modelValue":a[6]||(a[6]=e=>l.value.dbTableTitleExpression=e),placeholder:"例：测试-{json<控件id>}，{json<控件id>}用当前业务数据对应的的控件值替换。"},null,8,["modelValue"])])]),t("tr",null,[te,t("td",null,[n(K,{modelValue:l.value.type,"onUpdate:modelValue":a[7]||(a[7]=e=>l.value.type=e),style:{width:"100%"},props:{expandTrigger:"hover",checkStrictly:!1},clearable:"",options:T.value},null,8,["modelValue","options"])]),ae,t("td",null,[n(c,{modelValue:l.value.labelCol,"onUpdate:modelValue":a[8]||(a[8]=e=>l.value.labelCol=e),placeholder:"默认auto",style:{width:"80px","margin-right":"12px"},clearable:""},null,8,["modelValue"]),ne,n(c,{modelValue:l.value.labelSuffix,"onUpdate:modelValue":a[9]||(a[9]=e=>l.value.labelSuffix=e),placeholder:"默认无",style:{width:"65px","margin-left":"12px"},clearable:""},null,8,["modelValue"])])]),t("tr",null,[oe,t("td",se,[n(h,{modelValue:l.value.showMessage,"onUpdate:modelValue":a[10]||(a[10]=e=>l.value.showMessage=e),style:{"margin-right":"12px"}},{default:s(()=>[f("显示")]),_:1},8,["modelValue"]),M(n(h,{modelValue:l.value.inlineMessage,"onUpdate:modelValue":a[11]||(a[11]=e=>l.value.inlineMessage=e),style:{"margin-right":"12px"}},{default:s(()=>[f("行内显示")]),_:1},8,["modelValue"]),[[j,l.value.showMessage]]),M(n(h,{modelValue:l.value.statusIcon,"onUpdate:modelValue":a[12]||(a[12]=e=>l.value.statusIcon=e)},{default:s(()=>[f("显示图标")]),_:1},8,["modelValue"]),[[j,l.value.showMessage]]),t("span",ue,[n(h,{modelValue:l.value.tableBorder,"onUpdate:modelValue":a[13]||(a[13]=e=>l.value.tableBorder=e)},{default:s(()=>[f("表格边框")]),_:1},8,["modelValue"])])])])])}}};export{re as default};
