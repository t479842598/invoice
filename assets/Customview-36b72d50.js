import{d as G,ai as c,aT as i,aF as H,c as x,W as p,bD as f,A as L,aX as h,aY as U,o as g,a as e,b9 as s,F as W,aV as X,H as D,bF as Y,aP as $,aM as K}from"./_@vue-5ba92de9.js";import{_ as Q}from"./index-823f4b27.js";import"./__vendor-5e6ac033.js";import"./_@element-plus-ad4c9002.js";import"./_crypto-js-0812dcff.js";import"./_element-plus-8c7ce171.js";import"./_@popperjs-c75af06c.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";const n=_=>($("data-v-458258f2"),_=_(),K(),_),R={class:"custom-submit",style:{height:"72vh",overflow:"hidden","overflow-y":"scroll"}},Z={border:"1",cellpadding:"1",cellspacing:"1",width:"890",class:"table",style:{color:"#000"}},ee=n(()=>e("td",{width:"100",class:"center"},"客户编号",-1)),te=n(()=>e("td",{width:"100",class:"center"},"客户名称",-1)),ae={colspan:"3"},oe=n(()=>e("td",{width:"100",class:"center"},"状态",-1)),se={style:{color:"red"}},ne=n(()=>e("td",{width:"100",class:"center"},"联系人",-1)),de={width:"150"},le=n(()=>e("td",{width:"100",class:"center"},"联系电话",-1)),ie={width:"150"},ce=n(()=>e("td",{width:"100",class:"center"},"邮箱",-1)),re={width:"150"},ue=n(()=>e("td",{width:"100",class:"center"},"业务员",-1)),pe={width:"150"},_e=n(()=>e("td",{width:"100",class:"center"},"备注",-1)),ve={colspan:"7"},he={border:"1",cellpadding:"1",cellspacing:"1",style:{"margin-left":"10px",color:"#000"},width:"900",class:"table"},me=n(()=>e("td",{width:"100",class:"center"},"开票单位",-1)),we={colspan:"3"},be=n(()=>e("td",{width:"135",class:"center"},"纳税人识别号",-1)),fe={colspan:"3"},ge=n(()=>e("td",{width:"100",class:"center"},"单位地址",-1)),ye={width:"160"},ke=n(()=>e("td",{width:"120",class:"center"},"联系电话",-1)),Se={width:"160"},xe=n(()=>e("td",{width:"135",class:"center"},"开户银行",-1)),De={width:"160"},Ve=n(()=>e("td",{width:"100",class:"center"},"银行账号",-1)),je={width:"160"},Ce=G({__name:"Customview",props:{modelValue:{type:Boolean,default:!1},id:{type:String,default:""}},emits:["update:id"],setup(_,{emit:V}){const j=c("ajax"),C=c("utils");c("config");const I=c("qs");c("index_openmenu"),c("index_removetab"),c("index_refreshtab"),c("view_dialogshow");const O=i({prop:"startDate",order:"ascending"}),B=i(C.getPager(O.value)),F=i(!1);new Date().toISOString().split("T")[0];const y=i([1]),S=i("税务单位信息1"),N=V,q=_;function E(a){return L({get:()=>q[a],set:t=>{N(`update:${a}`,t)}})}const J=E("id");H(()=>{M()});const d=i({id:"",customercode:"",customername:"",customerlinker:"",customerphone:"",customeremail:"",customersalesperson:"",status:"",remarks:"",customersalespersoncode:"",OrganizeId:"",organname:"",userid:"",username:""}),o=i([{}]),k=i({1:[{id:"",invoicedepartid:"",customerid:"",billdate:"",servicestartdate:"",serviceenddate:""}]}),m=i(""),M=()=>{j.post("/yun_customer/Get",I.stringify({id:J.value})).then(a=>{d.value=a.data.customer,d.value.customersalesperson=d.value.customersalesperson,d.value.customersalespersoncode=d.value.userid;for(let t=0;t<a.data.invoicedepartment.length;t++)o.value.push({id:"",customerid:"",invoicedepartid:"",invoicedepartname:"",taxno:"",address:"",phone:"",openbank:"",bankaccount:""}),o.value[t].id=a.data.invoicedepartment[t].invoicedepartid,o.value[t].customerid=a.data.invoicedepartment[t].customerid,o.value[t].invoicedepartid=a.data.invoicedepartment[t].invoicedepartid,o.value[t].invoicedepartname=a.data.invoicedepartment[t].invoicedepartname,o.value[t].taxno=a.data.invoicedepartment[t].taxno,o.value[t].address=a.data.invoicedepartment[t].address,o.value[t].phone=a.data.invoicedepartment[t].phone,o.value[t].openbank=a.data.invoicedepartment[t].openbank,o.value[t].bankaccount=a.data.invoicedepartment[t].bankaccount,y.value.push(t+2),m.value+=JSON.stringify(a.data.invoicedepartment[t].payrecords)+";";m.value=m.value.slice(0,-1),a.data.invoicedepartment.length>1?P(m.value):k.value=a.data.invoicedepartment[0].payrecords,o.value.length>a.data.invoicedepartment.length&&y.value.splice(o.value.length-1,1)}).catch(()=>{})},P=a=>{let t=a.split("};{");for(let l=0;l<t.length;l++){let u=l===0?t[l]+"}":l===t.length-1?"{"+t[l]:"{"+t[l]+"}",w=JSON.parse(u);Object.keys(w).forEach(b=>{k.value[b]=w[b]})}};function T(){return{color:"#000"}}return(a,t)=>{const l=h("el-card"),u=h("el-table-column"),w=h("el-table"),b=h("el-tab-pane"),z=h("el-tabs"),A=U("loading");return g(),x("div",R,[p(l,{class:"box-card",shadow:"never"},{default:f(()=>[e("table",Z,[e("tbody",null,[e("tr",null,[ee,e("td",null,s(d.value.customercode),1),te,e("td",ae,s(d.value.customername),1),oe,e("td",se,s(d.value.status),1)]),e("tr",null,[ne,e("td",de,s(d.value.customerlinker),1),le,e("td",ie,s(d.value.customerphone),1),ce,e("td",re,s(d.value.customeremail),1),ue,e("td",pe,s(d.value.customersalespersonname),1)]),e("tr",null,[_e,e("td",ve,s(d.value.remarks),1)])])])]),_:1}),p(z,{modelValue:S.value,"onUpdate:modelValue":t[0]||(t[0]=v=>S.value=v),type:"card"},{default:f(()=>[(g(!0),x(W,null,X(y.value,(v,r)=>(g(),D(b,{key:r,label:"税务单位信息"+v,name:"税务单位信息"+v},{default:f(()=>[e("table",he,[e("tbody",null,[e("tr",null,[me,e("td",we,s(o.value[r].invoicedepartname),1),be,e("td",fe,s(o.value[r].taxno),1)]),e("tr",null,[ge,e("td",ye,s(o.value[r].address),1),ke,e("td",Se,s(o.value[r].phone),1),xe,e("td",De,s(o.value[r].openbank),1),Ve,e("td",je,s(o.value[r].bankaccount),1)])])]),Y((g(),D(w,{data:k.value[v],border:"",stripe:B.value.tableStripe,"max-height":"235",style:{width:"98%",color:"#000",margin:"auto"},"header-cell-style":T},{default:f(()=>[p(u,{prop:"billdate",fit:"","show-overflow-tooltip":"",label:"续费日期",align:"center",width:"218"}),p(u,{prop:"servicestartdate",fit:"","show-overflow-tooltip":"",label:"服务开始日期",align:"center",width:"225"}),p(u,{prop:"serviceenddate",fit:"","show-overflow-tooltip":"",label:"服务到期日期",align:"center",width:"225"}),p(u,{prop:"status",fit:"","show-overflow-tooltip":"",label:"状态",align:"center",width:"225"})]),_:2},1032,["data","stripe"])),[[A,F.value]])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}});const Te=Q(Ce,[["__scopeId","data-v-458258f2"]]);export{Te as default};
