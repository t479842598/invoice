import{_ as H}from"./index-823f4b27.js";import{ai as i,aT as u,aF as K,c as P,W as l,a as w,bD as y,aX as s,o as R,U as Y,a8 as O}from"./_@vue-5ba92de9.js";import"./__vendor-5e6ac033.js";import"./_@element-plus-ad4c9002.js";import"./_crypto-js-0812dcff.js";import"./_element-plus-8c7ce171.js";import"./_@popperjs-c75af06c.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";const ee={style:{height:"inherit"}},ae={class:"rf_user_body"},ne={style:{margin:"16px"}},oe={__name:"index",props:{query:{type:String,default:()=>""}},setup(q){const{proxy:N}=O(),V=i("ajax"),t=i("utils");i("config");const b=i("qs");i("app");const g=i("indexm_openurl");i("indexm_backpage"),i("indexm_refreshpage"),i("indexm_userinfo");const v=u(!1),c=u(!1),p=u(!1),m=u(!1),k=u(""),x=u([]),r=q;t.getQuery(r.query);const M=t.query("classa",r.query),T=u(),h=[{required:!0,message:"发票类型不能为空",trigger:"onChange"}],a=u({invoiceTypeName:"",invoiceTypeCode:"",taxation:"",invoiceSpecialMark:"",invoiceSpecialMarkName:"",JAZS:""}),A=[{name:"全电专用发票",value:"01"},{name:"全电普通发票",value:"02"}],_=u([]),J=[{name:"差额征税-全额开票"},{name:"差额征税-差额开票"}],Z=[{name:"销售自己使用过的固定资产"},{name:"住房租赁"}];K(()=>{I(),M=="back"&&(a.value.JAZS=t.query("JAZS",r.query),a.value.taxation=t.query("taxation",r.query),a.value.invoiceTypeName=t.query("type",r.query),a.value.invoiceTypeCode=t.query("code",r.query),a.value.invoiceSpecialMark=t.query("invoiceSpecialMark",r.query),a.value.invoiceSpecialMarkName=t.query("invoiceSpecialMarkName",r.query))});const U=o=>{a.value.invoiceTypeName=o.name,a.value.invoiceTypeCode=o.value,v.value=!1},$=({selectedOptions:o})=>{a.value.invoiceSpecialMarkName=o[0].text,a.value.invoiceSpecialMark=o[0].value,p.value=!1},B=o=>{a.value.taxation=o.name,c.value=!1},j=o=>{a.value.JAZS=o.name,m.value=!1};function I(){V.post("/invoice_BaseInfo/GetAll",b.stringify({classtype:"invoiceSpecial"})).then(o=>{o.success?(_.value=o.data.main.map(e=>({text:e.name,value:e.code})),x.value=_.value):t.msg(o.msg,"warning",!1)}).catch(o=>{})}function L(){x.value=_.value.filter(o=>o.text.includes(k.value))}const z=o=>{N.$refs.formref.validate().then(e=>{let d={id:"mainpage_localindex",url:"/mobile/flow/main.vue?type="+a.value.invoiceTypeName+"&code="+a.value.invoiceTypeCode+"&taxation="+a.value.taxation+"&invoiceSpecialMark="+a.value.invoiceSpecialMark+"&JAZS="+a.value.JAZS+"&invoiceSpecialMarkName="+a.value.invoiceSpecialMarkName+"&id=0"};g(d.id,d.url)}).catch(e=>{})},C={id:"shortuct_localindex",url:"/mobile/home.vue"};function D(){g(C.id,C.url)}return(o,e)=>{const d=s("van-nav-bar"),f=s("van-field"),S=s("van-action-sheet"),E=s("van-search"),F=s("van-picker"),G=s("van-popup"),Q=s("van-cell-group"),W=s("van-button"),X=s("van-form");return R(),P("div",ee,[l(d,{title:"发票信息","left-text":"返回","left-arrow":"",onClickLeft:D}),w("div",ae,[l(X,{ref_key:"formref",ref:T},{default:y(()=>[l(Q,{inset:""},{default:y(()=>[l(f,{modelValue:a.value.invoiceTypeName,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.invoiceTypeName=n),"is-link":"",readonly:"",name:"picker",label:"发票类型",placeholder:"选择发票类型",onClick:e[1]||(e[1]=n=>v.value=!0),required:"","show-error":"","show-error-message":"",rules:h},null,8,["modelValue"]),l(S,{show:v.value,"onUpdate:show":e[2]||(e[2]=n=>v.value=n),actions:A,description:"发票类型",onSelect:U,"cancel-text":"取消",onCancel:e[3]||(e[3]=n=>v.value=!1)},null,8,["show"]),l(f,{modelValue:a.value.invoiceSpecialMarkName,"onUpdate:modelValue":e[4]||(e[4]=n=>a.value.invoiceSpecialMarkName=n),"is-link":"",readonly:"",name:"picker",label:"特定业务",placeholder:"选择特定业务类型",onClick:e[5]||(e[5]=n=>p.value=!0)},null,8,["modelValue"]),l(G,{show:p.value,"onUpdate:show":e[8]||(e[8]=n=>p.value=n),position:"bottom"},{default:y(()=>[l(E,{modelValue:k.value,"onUpdate:modelValue":[e[6]||(e[6]=n=>k.value=n),L],modelModifiers:{trim:!0},placeholder:"特定业务搜索"},null,8,["modelValue"]),l(F,{columns:x.value,onConfirm:$,onCancel:e[7]||(e[7]=n=>p.value=!1)},null,8,["columns"])]),_:1},8,["show"]),l(f,{modelValue:a.value.taxation,"onUpdate:modelValue":e[9]||(e[9]=n=>a.value.taxation=n),"is-link":"",readonly:"",name:"picker",label:"差额征税",placeholder:"选择差额征税类型",onClick:e[10]||(e[10]=n=>c.value=!0)},null,8,["modelValue"]),l(S,{show:c.value,"onUpdate:show":e[11]||(e[11]=n=>c.value=n),actions:J,description:"差额征税类型",onSelect:B,"cancel-text":"取消",onCancel:e[12]||(e[12]=n=>c.value=!1)},null,8,["show"]),l(f,{modelValue:a.value.JAZS,"onUpdate:modelValue":e[13]||(e[13]=n=>a.value.JAZS=n),"is-link":"",readonly:"",name:"picker",label:"减按征税",placeholder:"选择减按征税类型",onClick:e[14]||(e[14]=n=>m.value=!0)},null,8,["modelValue"]),l(S,{show:m.value,"onUpdate:show":e[15]||(e[15]=n=>m.value=n),actions:Z,description:"差额征税类型",onSelect:j,"cancel-text":"取消",onCancel:e[16]||(e[16]=n=>m.value=!1)},null,8,["show"])]),_:1}),w("div",ne,[l(W,{block:"",type:"primary",size:"small",onClick:z},{default:y(()=>[Y(" 提交 ")]),_:1})])]),_:1},512)])])}}},de=H(oe,[["__scopeId","data-v-70492747"]]);export{de as default};
