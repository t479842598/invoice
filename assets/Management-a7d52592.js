import{_ as Y,a as G}from"./index-823f4b27.js";import"./__vendor-5e6ac033.js";import{a as W}from"./_element-plus-8c7ce171.js";import{ai as u,aT as s,aF as X,b5 as J,c as S,a as k,W as l,bD as n,bF as K,H as Q,au as Z,aN as ee,aX as i,aY as ae,o as z,U as d,I as te,F as le,aV as oe,b9 as ne,bi as re,Y as se}from"./_@vue-5ba92de9.js";import"./_@element-plus-ad4c9002.js";import"./_crypto-js-0812dcff.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";import"./_@popperjs-c75af06c.js";const ie={class:"form-container"},ue={class:"table-container"},de={class:"roadui_pagerdiv"},ce={__name:"Management",setup(pe){const h=se(()=>G(()=>import("./ManagementAdd-def40bc8.js"),["./ManagementAdd-def40bc8.js","./_@vue-5ba92de9.js","./index-823f4b27.js","./__vendor-5e6ac033.js","./__vendor-693c365c.css","./_@element-plus-ad4c9002.js","./_crypto-js-0812dcff.js","./_element-plus-8c7ce171.js","./_@popperjs-c75af06c.js","./_element-plus-7d03f811.css","./_pdfjs-dist-c04561eb.js","./_@microsoft-43c4e133.js","./_vue-codemirror-50da885a.js","./index-2ccff9e2.css","./ManagementAdd-622ae1c2.css"],import.meta.url)),V=u("ajax"),w=u("utils");u("config");const D=u("qs");u("index_openmenu"),u("index_removetab");const T=u("index_refreshtab"),m=s(!1),v=s(!1),I=s({prop:"invoicedepartname",order:"ascending"}),t=s(w.getPager(I.value)),B=s([]),_=s("");X(()=>{g(!1)});const U=[{prop:"invoicedepartname",label:"单位名称",width:"220"},{prop:"taxno",label:"纳税人识别号",width:"200"},{prop:"address",label:"单位地址",width:"260"},{prop:"phone",label:"联系电话",width:"150"},{prop:"bankaccount",label:"银行账号",width:"200"},{prop:"openbank",label:"开户银行",width:"260"}],r=s({name:"",taxno:""}),g=o=>{o&&(t.value.number=1),v.value=!0,m.value=!0,r.value.size=t.value.size,r.value.number=t.value.number,r.value.order=t.value.order,V.post("/InvoiceDepartment/GetList",D.stringify(r.value)).then(e=>{B.value=e.data.rows,t.value.total=e.data.total,m.value=!1,v.value=!1}).catch(()=>{m.value=!1,v.value=!1})},y=s(""),P=J(null),c=s(!1),N=()=>{_.value="",y.value="新增",P.value=h,c.value=!0},E=o=>{_.value=o.id,y.value="修改",P.value=h,c.value=!0};async function M(o){try{await W.confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await V.post("/InvoiceDepartment/Delete",D.stringify({id:o.id})),p=e.success?"success":"error";w.msg(e.msg,p,!1),T()}catch(e){e==="cancel"&&w.msg("已取消删除","info",!1)}}const A=o=>{t.value.size=o,g(!1)},F=o=>{t.value.number=o,g(!1)};function $({row:o,column:e,rowIndex:p,columnIndex:f}){return{color:"#000",textAlign:"center"}}return ee("submit_dialogshow",c),(o,e)=>{const p=i("el-input"),f=i("el-form-item"),b=i("el-button"),j=i("el-form"),C=i("el-table-column"),L=i("el-tag"),R=i("el-table"),q=i("el-pagination"),H=i("el-dialog"),O=ae("loding");return z(),S("div",null,[k("div",ie,[l(j,{inline:!0,model:r.value},{default:n(()=>[l(f,{label:"单位名称"},{default:n(()=>[l(p,{modelValue:r.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.name=a),style:{width:"230px"},clearable:""},null,8,["modelValue"])]),_:1}),l(f,{label:"纳税人识别号"},{default:n(()=>[l(p,{modelValue:r.value.taxno,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.taxno=a),style:{width:"230px"},clearable:""},null,8,["modelValue"])]),_:1}),l(f,null,{default:n(()=>[l(b,{type:"primary",onClick:e[2]||(e[2]=a=>g(!0)),icon:"Search"},{default:n(()=>[d("查询")]),_:1}),l(b,{type:"success",onClick:N,icon:"Plus"},{default:n(()=>[d("新增")]),_:1})]),_:1})]),_:1},8,["model"])]),k("div",ue,[K((z(),Q(R,Z({data:B.value,stripe:t.value.tableStripe,border:"","highlight-current-row":t.value.tableHighlightCurrentRow,style:{width:"100%",color:"#000"},"header-cell-style":$},o.$attrs,{onCurrentChange:o.tableCurrentChange}),{default:n(()=>[d(" > "),te("",!0),(z(),S(le,null,oe(U,(a,x)=>l(C,{key:x,prop:a.prop,label:a.label,align:"center",width:a.width},null,8,["prop","label","width"])),64)),l(C,{prop:"Status",label:"状态",align:"center",width:"150"},{default:n(a=>[l(L,{effect:"light",type:a.row.status=="启用"?"success":"danger"},{default:n(()=>[d(ne(a.row.status),1)]),_:2},1032,["type"])]),_:1}),l(C,{label:"操作",align:"center",width:"170"},{default:n(a=>[l(b,{size:"small",type:"primary",onClick:x=>E(a.row)},{default:n(()=>[d("修改")]),_:2},1032,["onClick"]),l(b,{size:"small",type:"danger",onClick:x=>M(a.row)},{default:n(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},16,["data","stripe","highlight-current-row","onCurrentChange"])),[[O,v.value]]),k("div",de,[l(q,{currentPage:t.value.number,"onUpdate:currentPage":e[3]||(e[3]=a=>t.value.number=a),"page-size":t.value.size,"onUpdate:pageSize":e[4]||(e[4]=a=>t.value.size=a),"page-sizes":t.value.sizes,background:t.value.background,layout:t.value.layout,total:t.value.total,disabled:m.value,onSizeChange:A,onCurrentChange:F},null,8,["currentPage","page-size","page-sizes","background","layout","total","disabled"])]),l(H,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=a=>c.value=a),title:y.value,"align-center":"","destroy-on-close":"",width:"600px",draggable:"","close-on-click-modal":!1},{default:n(()=>[l(re(h),{id:_.value,"onUpdate:id":e[5]||(e[5]=a=>_.value=a)},null,8,["id"])]),_:1},8,["modelValue","title"])])])}}},xe=Y(ce,[["__scopeId","data-v-f5003e7b"]]);export{xe as default};
