import{ai as p,aT as N,A as T,aF as A,c as s,a as t,W as d,bD as _,b9 as l,bi as c,I as u,aX as v,o as a,U as g}from"./_@vue-5ba92de9.js";const V={class:"roadui_noprint",style:{margin:"10px 0 12px 10px"}},q={cellpadding:"0",cellspacing:"0",class:"roadui_printtable",style:{width:"98%"}},B=t("th",null,"日志标题",-1),D={colspan:"3"},L=t("th",{style:{width:"110px"}},"日志类型",-1),U=t("th",{style:{width:"110px"}},"发生ip",-1),I=t("th",null,"发生时间",-1),O=t("th",null,"操作人员",-1),R=t("th",null,"来源URL",-1),S={colspan:"3"},E=t("th",null,"操作URL",-1),F={colspan:"3"},G=t("th",null,"浏览器",-1),M={colspan:"3"},W={key:0},X=t("th",null,"日志内容",-1),z={colspan:"3"},H={key:1},J=t("th",null,"操作前",-1),K={colspan:"3"},P={key:2},Q=t("th",null,"操作后",-1),Y={colspan:"3"},Z={key:3},$=t("th",null,"其他内容",-1),tt={colspan:"3"},lt={__name:"print",props:{query:{type:String,default:()=>""}},setup(y){const m=p("ajax"),n=p("utils"),f=y;let r=n.query("logid",f.query);const e=N({}),w=[{value:"0",title:"登录日志"},{value:"1",title:"系统管理"},{value:"2",title:"流程管理"},{value:"3",title:"流程运行"},{value:"4",title:"表单管理"},{value:"100",title:"其他类型"},{value:"500",title:"系统异常"}],x=T(()=>o=>{const i=n.getArrayObj(w,o,"value");return i==null?o:i.title});A(()=>{b()});const b=()=>{n.length(r)>0&&m.post("/Log/Get?logid="+r).then(o=>{if(o.code==-1){n.msg("未找到日志！",o.success);return}e.value=o.data}).catch(()=>{})},C=()=>{window.print()},k=()=>{window.close()};return(o,i)=>{const h=v("el-button"),j=v("el-space");return a(),s("div",null,[t("div",V,[d(j,null,{default:_(()=>[d(h,{type:"primary",onClick:C},{default:_(()=>[g("打印")]),_:1}),d(h,{onClick:k},{default:_(()=>[g("关闭")]),_:1})]),_:1})]),t("table",q,[t("tr",null,[B,t("td",D,l(e.value.title),1)]),t("tr",null,[L,t("td",null,l(x.value(e.value.type)),1),U,t("td",null,l(e.value.ipAddress=="::1"?"127.0.0.1":e.value.ipAddress),1)]),t("tr",null,[I,t("td",null,l(e.value.writeTime),1),O,t("td",null,l(e.value.userName),1)]),t("tr",null,[R,t("td",S,l(e.value.referer),1)]),t("tr",null,[E,t("td",F,l(e.value.url),1)]),t("tr",null,[G,t("td",M,l(e.value.agent),1)]),c(n).length(e.value.contents)>0?(a(),s("tr",W,[X,t("td",z,l(e.value.contents),1)])):u("",!0),c(n).length(e.value.oldContents)>0?(a(),s("tr",H,[J,t("td",K,l(e.value.oldContents),1)])):u("",!0),c(n).length(e.value.newContents)>0?(a(),s("tr",P,[Q,t("td",Y,l(e.value.newContents),1)])):u("",!0),c(n).length(e.value.others)>0?(a(),s("tr",Z,[$,t("td",tt,l(e.value.others),1)])):u("",!0)])])}}};export{lt as default};
