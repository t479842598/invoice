import{_ as Y,a as G}from"./index-823f4b27.js";import"./__vendor-5e6ac033.js";import{a as J}from"./_element-plus-8c7ce171.js";import{ai as i,aT as n,aF as W,b5 as X,c as S,a as w,W as o,bD as s,bF as K,H as Q,au as Z,aN as y,aX as u,aY as ee,o as x,U as b,I as ae,F as le,aV as te,Y as oe}from"./_@vue-5ba92de9.js";import"./_@element-plus-ad4c9002.js";import"./_crypto-js-0812dcff.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";import"./_@popperjs-c75af06c.js";const ne={class:"form-container"},re={class:"table-container"},se={class:"roadui_pagerdiv"},ie={__name:"redListwait",setup(ue){const I=oe(()=>G(()=>import("./redInvoice-880e380e.js"),["./redInvoice-880e380e.js","./__vendor-5e6ac033.js","./_@vue-5ba92de9.js","./__vendor-693c365c.css","./index-823f4b27.js","./_@element-plus-ad4c9002.js","./_crypto-js-0812dcff.js","./_element-plus-8c7ce171.js","./_@popperjs-c75af06c.js","./_element-plus-7d03f811.css","./_pdfjs-dist-c04561eb.js","./_@microsoft-43c4e133.js","./_vue-codemirror-50da885a.js","./index-2ccff9e2.css","./redInvoice-7d03c41d.css"],import.meta.url)),C=i("ajax"),_=i("utils");i("config");const T=i("qs");i("index_openmenu"),i("index_removetab");const D=i("index_refreshtab"),k=n("");localStorage.getItem("sobInfo")!=""&&(k.value=JSON.parse(localStorage.getItem("sobInfo")));const p=n(!1),m=n(!1),V=n({prop:"",order:"ascending"}),a=n(_.getPager(V.value)),z=n([]),P=n(""),B=n("");W(()=>{c(!1)});const L=[{prop:"redConfirmSerialNo",label:"开票流水号"},{prop:"redConfirmNo",label:"红字确认单编号"},{prop:"redInvoiceNo",label:"红字发票号"},{prop:"confirmState",label:"确认单状态"},{prop:"invoiceDate",label:"开具日期"},{prop:"invoiceTotalPriceTax",label:"价税合计"},{prop:"invoiceTotalPrice",label:"无税金额"},{prop:"invoiceTotalTax",label:"税额"},{prop:"sellerTaxName",label:"销售方名称"},{prop:"sellerTaxNo",label:"销方税号"},{prop:"buyerTaxName",label:"购方名称"},{prop:"buyerTaxNo",label:"购方税号"},{prop:"originalInvoiceNo",label:"蓝字发票号"},{prop:"remarks",label:"备注"},{prop:"msg",label:"错误提示"}],r=n({}),c=t=>{t&&(a.value.number=1),m.value=!0,p.value=!0,r.value.size=a.value.size,r.value.number=a.value.number,r.value.order=a.value.order,C.post("/Invoice/GetRedList?srcorgid="+k.value.id,T.stringify(r.value)).then(e=>{z.value=e.data.rows,a.value.total=e.data.total,p.value=!1,m.value=!1}).catch(()=>{p.value=!1,m.value=!1})},R=n(""),A=X(null),g=n(!1),E=t=>{P.value=t.id,B.value=t.blueid,R.value="红冲发票修改",A.value=I,g.value=!0};async function U(t){try{await J.confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await C.post("/SystemAccount/Delete",T.stringify({id:t.id})),d=e.success?"success":"error";_.msg(e.msg,d,!1),D()}catch(e){e==="cancel"&&_.msg("已取消删除","info",!1)}}const F=t=>{a.value.size=t,c(!1)},$=t=>{a.value.number=t,c(!1)};function j({row:t,column:e,rowIndex:d,columnIndex:v}){return{color:"#000",textAlign:"center"}}return y("RedShow",g),y("getTableData",c),y("submit_dialogshow",g),(t,e)=>{const d=u("el-input"),v=u("el-form-item"),f=u("el-button"),O=u("el-form"),N=u("el-table-column"),q=u("el-table"),H=u("el-pagination"),M=ee("loding");return x(),S("div",null,[w("div",ne,[o(O,{inline:!0,model:r.value},{default:s(()=>[o(v,{label:"单位名称"},{default:s(()=>[o(d,{modelValue:r.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.name=l),style:{width:"230px"},clearable:""},null,8,["modelValue"])]),_:1}),o(v,{label:"纳税人识别号"},{default:s(()=>[o(d,{modelValue:r.value.taxno,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.taxno=l),style:{width:"230px"},clearable:""},null,8,["modelValue"])]),_:1}),o(v,null,{default:s(()=>[o(f,{type:"primary",onClick:e[2]||(e[2]=l=>c(!0)),icon:"Search"},{default:s(()=>[b("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),w("div",re,[K((x(),Q(q,Z({data:z.value,stripe:a.value.tableStripe,border:"","highlight-current-row":a.value.tableHighlightCurrentRow,style:{width:"100%",color:"#000"},"header-cell-style":j},t.$attrs,{onCurrentChange:t.tableCurrentChange}),{default:s(()=>[b(" > "),ae("",!0),(x(),S(le,null,te(L,(l,h)=>o(N,{fit:"","show-overflow-tooltip":"","min-width":"200%",key:h,prop:l.prop,label:l.label,align:"center",width:l.width},null,8,["prop","label","width"])),64)),o(N,{label:"操作",fixed:"right",align:"center",width:"170"},{default:s(l=>[o(f,{size:"small",type:"primary",onClick:h=>E(l.row)},{default:s(()=>[b("修改")]),_:2},1032,["onClick"]),o(f,{size:"small",type:"danger",onClick:h=>U(l.row)},{default:s(()=>[b("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},16,["data","stripe","highlight-current-row","onCurrentChange"])),[[M,m.value]]),w("div",se,[o(H,{currentPage:a.value.number,"onUpdate:currentPage":e[3]||(e[3]=l=>a.value.number=l),"page-size":a.value.size,"onUpdate:pageSize":e[4]||(e[4]=l=>a.value.size=l),"page-sizes":a.value.sizes,background:a.value.background,layout:a.value.layout,total:a.value.total,disabled:p.value,onSizeChange:F,onCurrentChange:$},null,8,["currentPage","page-size","page-sizes","background","layout","total","disabled"])])])])}}},we=Y(ie,[["__scopeId","data-v-b0db9817"]]);export{we as default};
