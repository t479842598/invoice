import{ai as N,aT as v,aF as D,c as u,a as e,b9 as f,W as d,bD as i,U as y,F as V,aV as g,aX as m,o as s,H as p,bi as S}from"./_@vue-5ba92de9.js";const j={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},q=e("th",{style:{width:"60px"}},"控件id",-1),I={class:"roadui_formfont"},R=e("th",null,"绑定字段",-1),$={class:"roadui_note1"},G={style:{"margin-left":"12px"}},H=e("th",null,"背景文字",-1),K={cellpadding:"0",cellspacing:"0",border:"0",style:{width:"100%"}},L=e("th",{style:{width:"50px"}},"流水号",-1),M=e("th",null,"条件",-1),X={__name:"serialnumber",props:{query:{type:String,default:()=>""}},setup(E){const r=N("utils"),O=N("ajax"),F=E,J=r.query("editorname",F.query),c=window.parent.CKEDITOR.instances[J],b=c.formAttributeJSON,l=v({}),x=v([]),w=v([]);D(()=>{b&&r.getConnTableFields(b.dbConn,b.dbTable).then(a=>{x.value=a}),O.post("/SerialNumber/GetOptions").then(a=>{w.value=a.data,k()}).catch(()=>{})});const k=a=>{if(l.value={id:"",label:"",field:"",serial:[{serial:"",data:""}],placeholder:""},a||(a=c.currentSelectEditorElement),a){l.value.id=a.getAttribute("data-id"),l.value.label=a.getAttribute("data-label"),l.value.field=a.getAttribute("data-bindfiled"),l.value.placeholder=a.getAttribute("data-placeholder");try{l.value.serial=JSON.parse(r.decodeURI(a.getAttribute("data-serial")))}catch{l.value.serial=[{serial:"",data:""}]}r.length(l.value.serial)===0&&(l.value.serial=[{serial:"",data:""}])}c.currentSelectEditorElementJson=l.value,c.initFunction_serialnumber=k},T=()=>{l.value.serial.push({serial:"",data:""})},B=a=>{l.value.serial.splice(a,1)};return(a,n)=>{const U=m("el-option"),C=m("el-select"),_=m("el-input"),A=m("el-button");return s(),u("table",j,[e("tr",null,[q,e("td",I,f(l.value.id),1)]),e("tr",null,[R,e("td",null,[d(C,{modelValue:l.value.field,"onUpdate:modelValue":n[0]||(n[0]=t=>l.value.field=t),filterable:"",style:{width:"260px"},clearable:""},{default:i(()=>[(s(!0),u(V,null,g(x.value,t=>(s(),p(U,{key:t.name,value:t.name,label:t.name+(S(r).length(t.comment)>0?" - "+t.comment:"")},{default:i(()=>[e("span",null,f(t.name),1),e("span",$,f(S(r).length(t.comment)>0?" - "+t.comment:""),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"]),e("span",G,[y(" 标签"),d(_,{modelValue:l.value.label,"onUpdate:modelValue":n[1]||(n[1]=t=>l.value.label=t),placeholder:"控件label",style:{width:"285px","margin-left":"12px"},clearable:""},null,8,["modelValue"])])])]),e("tr",null,[H,e("td",null,[d(_,{modelValue:l.value.placeholder,"onUpdate:modelValue":n[2]||(n[2]=t=>l.value.placeholder=t),style:{width:"601px"},clearable:"",placeholder:"没有流水号时显示的提示文字"},null,8,["modelValue"])])]),(s(!0),u(V,null,g(l.value.serial,(t,h)=>(s(),u("tr",{key:h},[e("th",null,[h===0?(s(),p(A,{key:0,onClick:n[3]||(n[3]=o=>T())},{default:i(()=>[y("添加")]),_:1})):(s(),p(A,{key:1,onClick:o=>B(h)},{default:i(()=>[y("删除")]),_:2},1032,["onClick"]))]),e("td",null,[e("table",K,[e("tr",null,[L,e("td",null,[d(C,{modelValue:t.serial,"onUpdate:modelValue":o=>t.serial=o,placeholder:"选择流水号",style:{width:"539px"},clearable:""},{default:i(()=>[(s(!0),u(V,null,g(w.value,o=>(s(),p(U,{key:o.value,value:o.value,label:o.label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),e("tr",null,[M,e("td",null,[d(_,{style:{width:"539px"},modelValue:t.data,"onUpdate:modelValue":o=>t.data=o,clearable:""},null,8,["modelValue","onUpdate:modelValue"])])])])])]))),128))])}}};export{X as default};
