import{u as a}from"./index-823f4b27.js";import{$ as T}from"./_jquery-3a83ed9f.js";const R={jquery:T,defaultValueOptions(){return[{value:"organize",label:"组织架构相关选项",children:[{value:"{<UserId>}",label:"当前用户id"},{value:"{<UserName>}",label:"当前用户姓名"},{value:"{<UserAccount>}",label:"当前用户帐号"},{value:"{<UserDeptId>}",label:"当前用户所在部门id"},{value:"{<UserDeptName>}",label:"当前用户所在部门名称"},{value:"{<UserStationId>}",label:"当前用户所在岗位id"},{value:"{<UserStationName>}",label:"当前用户所在岗位名称"},{value:"{<UserCompanyId>}",label:"当前用户所在单位id"},{value:"{<UserCompanyName>}",label:"当前用户所在单位名称"},{value:"{<UserOrganize>}",label:"当前用户组织架构关系"},{value:"{<UserOrganizeRoot>}",label:"当前用户组织架构关系包含根"},{value:"{<UserJobNumber>}",label:"当前用户工号"},{value:"{<UserIdCard>}",label:"当前用户身份证号"}]},{value:"dateTime",label:"日期时间相关选项",children:[{value:"{<ShortDate>}",label:"日期(yyyy-MM-dd)"},{value:"{<LongDate>}",label:"日期(yyyy年M月d日)"},{value:"{<ShortDateTime>}",label:"日期时间(yyyy-MM-dd HH:mm)"},{value:"{<LongDateTime>}",label:"日期时间(yyyy年M月d日 H时m分)"},{value:"{<ShortDateTimeSecond>}",label:"日期时间(yyyy-MM-dd HH:mm:ss)"},{value:"{<LongDateTimeSecond>}",label:"日期时间(yyyy年M月d日 H时m分s秒)"}]},{value:"flowInstance",label:"流程相关选项",children:[{value:"{<FlowId>}",label:"当前流程id"},{value:"{<FlowName>}",label:"当前流程名称"},{value:"{<StepId>}",label:"当前步骤id"},{value:"{<StepName>}",label:"当前步骤名称"},{value:"{<TaskId>}",label:"当前任务id"},{value:"{<TaskTitle>}",label:"当前任务标题"},{value:"{<InstanceId>}",label:"当前实例id（业务数据id）"},{value:"{<GroupId>}",label:"当前审批分组id（GroupId）"},{value:"{<TaskRecevierId>}",label:"当前任务接收者id"},{value:"{<TaskRecevierName>}",label:"当前任务接收者姓名"}]}]},valueTypeOptions(){return[{value:"string",label:"字符"},{value:"decimal",label:"数字"}]},formatOptions(){return[{value:"thousand",label:"千分符"},{value:"percentage",label:"百分比"}]},dictValueFieldOptions(){return[{value:"id",label:"id"},{value:"title",label:"标题"},{value:"value",label:"值"},{value:"code",label:"唯一代码"},{value:"note",label:"备注"},{value:"other",label:"其他"}]},dataSourceOptions(){return[{value:"dict",label:"数据字典"},{value:"string",label:"字符串"},{value:"sql",label:"SQL"},{value:"url",label:"URL"}]},escapeHTML(t){return t=""+t,t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},unescapeHTML(t){return t=""+t,t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")},getId(t,l,e){return a.length(t)===0||a.length(l)===0?a.length(e)>0&&a.startWith(e,"field_")?e:"field_"+new Date().getTime():(t+"-"+l).toLowerCase()},ctlAfterHtml:"",ctlColor:"#999",formDefaultValues:[],formFields:[],formSelectOptions:[],formCompileErrMsg:[],formSubTableIds:[],compile(t,l,e,u){this.formDefaultValues=new Array,this.formFields=new Array,this.formSelectOptions=new Array,this.formCompileErrMsg=new Array,this.formSubTableIds=new Array,l.hasCkeditor=0,l.serialNumber=[];var r=T("<div>"+t+"</div>");if(T("table",r).each(function(){a.length(T(this).attr("class"))===0&&T(this).attr("class",l.tableBorder?"roadui_formruntable1":"roadui_formruntable")}),a.isArray(e)){let d=[];for(let p=0;p<e.length;p++){if(a.isUndef(e[p])||!a.hasKey(e[p],"events")||!a.isArray(e[p].events)||a.length(e[p].id)===0){d.push(p);continue}let v=[];for(let _=0;_<e[p].events.length;_++)a.length(e[p].events[_].script)===0&&v.push(_);for(let _=0;_<v.length;_++)e[p].events.splice(v[_],1);a.length(e[p].events)==0&&d.push(p)}for(let p=0;p<d.length;p++)delete e[d[p]]}let s=[];for(let d=0;d<e.length;d++)(a.isUndef(e[d])||e[d].id.substr(0,15)==="subtable_event_")&&s.push(d);for(let d=0;d<s.length;d++)delete e[s[d]];var i=T("[data-isflow='1']",r);for(let d=0;d<i.length;d++){var c=i.eq(d),n=c.attr("data-type");switch(n){case"text":this.compile_text(c,e);break;case"textarea":this.compile_textarea(c,e);break;case"number":this.compile_number(c,e);break;case"select":this.compile_select(c,e);break;case"cascader":this.compile_cascader(c,e);break;case"radio":this.compile_radio(c,e);break;case"checkbox":this.compile_checkbox(c,e);break;case"switch":this.compile_switch(c,e);break;case"hidden":this.compile_hidden(c);break;case"datetime":this.compile_datetime(c,e);break;case"dictionary":this.compile_dictionary(c,e);break;case"organize":this.compile_organize(c,e);break;case"appraise":this.compile_appraise(c,e);break;case"html":l.hasCkeditor=1,this.compile_html(c);break;case"label":this.compile_label(c);break;case"button":this.compile_button(c,l,e);break;case"datatable":this.compile_datatable(c,l);break;case"signature":this.compile_signature(c);break;case"serialnumber":this.compile_serialnumber(c,l);break;case"files":this.compile_files(c,e);break;case"selectdiv":this.compile_selectdiv(c,e);break;case"subtable":this.compile_subtable(c,l,u,e);break}}let b=[];for(let d=0;d<u.length;d++)(a.isUndef(u[d])||a.getArrayObj(this.formSubTableIds,u[d].id)==null)&&b.push(d);for(let d=0;d<b.length;d++)delete u[b[d]];let o=l.dbTable;for(let d=0;d<this.formFields.length;d++)this.formFields[d].type!=="subtable"&&this.formFields[d].id.indexOf("field_")!==0&&(this.formFields[d].tableName=o);var y=a.toNumber(l.labelCol,0)>0?a.toNumber(l.labelCol,0)+"px":"auto",g=l.labelSuffix,f=l.showMessage,h=l.inlineMessage,m=l.statusIcon;return'<div><el-form ref="roadflowFormRef" :model="formData" :rules="formRules" label-width="'+y+'"'+(a.length(g)>0?' label-suffix="'+g+'"':"")+(f?"":' :show-message="false"')+(h?" inline-message":"")+(m?" status-icon":"")+">"+this.unescapeHTML(r.html())+"</el-form></div>"},compile_text(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-align"),i=t.attr("data-placeholder"),c=t.attr("data-maxlength"),n=t.attr("data-width"),b=t.attr("data-disabled")=="true",o=t.attr("data-readonly")=="true",y=t.attr("data-allowclear")=="true",g=t.attr("data-inputtype"),f=t.attr("data-prefix"),h=t.attr("data-suffix"),m="string",d=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';d+="<el-input",g==="password"&&(d+=' type="password" show-password'),d+=` v-if="getFieldStatus('`+e+`')==0"`,d+=` v-model="formData['`+e+`']"`,d+=' ref="formRef_'+a.replace(e,"-","_")+'"';var p="";a.length(n)>0&&(p+="width:"+n+";"),a.length(p)>0&&(d+=' style="'+p+'"'),a.length(s)>0&&(d+=` :input-style="{'text-align':'`+s+`'}"`),a.length(i,!1)>0&&(d+=' placeholder="'+i+'"'),parseInt(c)&&parseInt(c)>0&&(d+=' :maxlength="'+parseInt(c)+'"'),a.length(r)>0&&this.formDefaultValues.push({id:e,type:"string",defaultValue:r}),y&&(d+=" clearable"),b&&(d+=" disabled"),o&&(d+=" readonly"),a.length(f)>0&&(d+=' prefix-icon="'+f+'"'),a.length(h)>0&&(d+=' suffix-icon="'+h+'"');let v=a.getArrayObj(l,e,"id");if(a.isDef(v)&&a.length(v)>0)for(let _=0;_<v.events.length;_++)a.length(v.events[_].script)>0&&(d+=" @"+v.events[_].name+`="execFormEvent('`+e+"','"+v.events[_].name+`',$event)"`);d+=">",d+="</el-input>",d+=`<span class="roadui_fromreadonly" v-else-if="getFieldStatus('`+e+`')==1">{{getText('`+e+"')}}</span>",g==="url"?d+=`<span class="roadui_fromreadonly" v-else-if="getFieldStatus('`+e+`')==1"><a class="roaduia_" :href="getText('`+e+`')" target="_blank">{{getText('`+e+"')}}</a></span>":d+=`<span class="roadui_fromreadonly" v-else-if="getFieldStatus('`+e+`')==1">{{getText('`+e+"')}}</span>",d+="</el-form-item>",t.after(this.escapeHTML(d)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:m,label:u})},compile_textarea(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-placeholder"),i=t.attr("data-maxlength"),c=t.attr("data-width"),n=t.attr("data-align"),b=t.attr("data-disabled")=="true",o=t.attr("data-allowclear")=="true",y=t.attr("data-readonly")=="true",g=t.attr("data-rows"),f="string",h=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';h+='<el-input type="textarea"',h+=` v-if="getFieldStatus('`+e+`')==0"`,h+=` v-model="formData['`+e+`']"`,h+=' ref="formRef_'+a.replace(e,"-","_")+'"';var m="";a.length(c)>0&&(m+="width:"+c+";"),a.length(m)>0&&(h+=' style="'+m+'"'),a.length(n)>0&&(h+=` :input-style="{'text-align':'`+n+`'}"`),a.length(s,!1)>0&&(h+=' placeholder="'+s+'"'),parseInt(i)&&parseInt(i)>0&&(h+=' :maxlength="'+parseInt(i)+'"'),parseInt(g)&&parseInt(g)>0&&(h+=' :rows="'+parseInt(g)+'"'),a.length(r)>0&&this.formDefaultValues.push({id:e,type:"string",defaultValue:r}),o&&(h+=" clearable"),b&&(h+=" disabled"),y&&(h+=" readonly");let d=a.getArrayObj(l,e,"id");if(a.isDef(d)&&a.length(d)>0)for(let p=0;p<d.events.length;p++)a.length(d.events[p].script)>0&&(h+=" @"+d.events[p].name+`="execFormEvent('`+e+"','"+d.events[p].name+`',$event)"`);h+=">",h+="</el-input>",h+=`<pre class="roadui_fromreadonly" v-else-if="getFieldStatus('`+e+`')==1">{{getText('`+e+"')}}</pre>",h+="</el-form-item>",t.after(this.escapeHTML(h)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:f,label:u})},compile_number(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-placeholder"),i=t.attr("data-width"),c=t.attr("data-disabled")=="true",n=t.attr("data-readonly")=="true",b=t.attr("data-step"),o=t.attr("data-stepstrictly")=="true",y=t.attr("data-precision"),g=t.attr("data-min"),f=t.attr("data-max"),h=t.attr("data-controls")=="true",m=t.attr("data-controlsposition")=="true",d="number",p=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';p+="<el-input-number",p+=` v-if="getFieldStatus('`+e+`')==0"`,p+=` v-model="formData['`+e+`']"`,p+=' ref="formRef_'+a.replace(e,"-","_")+'"';var v="";a.length(i)>0&&(v+="width:"+i+";"),a.length(v)>0&&(p+=' style="'+v+'"'),a.length(s,!1)>0&&(p+=' placeholder="'+s+'"'),a.length(g)>0&&(p+=' :min="'+parseFloat(g)+'"'),a.length(f)>0&&(p+=' :max="'+parseFloat(f)+'"'),a.length(b)>0&&(p+=' :step="'+parseFloat(b)+'"'),a.length(y)>0&&(p+=' :precision="'+parseFloat(y)+'"'),o&&(p+=" step-strictly"),h||(p+=' :controls="false"'),m&&(p+=' controls-position="right"'),a.length(r)>0&&this.formDefaultValues.push({id:e,type:"number",defaultValue:r}),c&&(p+=" disabled"),n&&(p+=" readonly");let _=a.getArrayObj(l,e,"id");if(a.isDef(_)&&a.length(_)>0)for(let k=0;k<_.events.length;k++)a.length(_.events[k].script)>0&&(p+=" @"+_.events[k].name+`="execFormEvent('`+e+"','"+_.events[k].name+`',$event)"`);p+=">",p+="</el-input-number>",p+=`<span class="roadui_fromreadonly" v-else-if="getFieldStatus('`+e+`')==1">{{getText('`+e+"')}}</span>",p+="</el-form-item>",t.after(this.escapeHTML(p)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:d,label:u})},compile_select(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-placeholder"),i=t.attr("data-width"),c=t.attr("data-dataSource"),n=t.attr("data-search")=="true",b=t.attr("data-allowclear")=="true",o=t.attr("data-multiple")=="true",y=t.attr("data-datasourcesqlconn"),g=t.attr("data-linkageid"),f=t.attr("data-linkagedatasource"),h=a.replace(t.attr("data-linkagetext"),"'","%27"),m=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'"';a.length(u)===0&&(m+=' label-width="0px"'),m+=">",m+="<el-select",m+=` v-if="getFieldStatus('`+e+`')==0" v-model="formData['`+e+`']"`,m+=' ref="formRef_'+a.replace(e,"-","_")+'"',a.length(s,!1)>0&&(m+=' placeholder="'+s+'"'),a.length(r)>0&&this.formDefaultValues.push({id:e,type:o?"array":"string",defaultValue:r}),n&&(m+=" filterable"),b&&(m+=" clearable"),o&&(m+=" multiple");var d="";a.length(i)>0&&(d+="width:"+i+";"),a.length(d)>0&&(m+=' style="'+d+'"');let p=a.getArrayObj(l,e,"id"),v=a.length(g)>0&&a.length(f)>0;if(v){if(m+=` @change="linkageAddChilds('`+e+"','"+g+"','"+f+"','"+h+"', '"+y+"')",a.isDef(p)&&a.length(p.events)>0){let F=a.getArrayObj(p.events,"change","name");a.isDef(F)&&a.length(F.script)>0&&(m+=";execFormEvent('"+e+"','change',$event)")}m+='"',this.formSelectOptions.push({id:g,source:"linkage",linkageSourceId:e,linkageDataSource:f,linkageText:h,linkageConnId:y})}switch(c){case"dict":var _=t.attr("data-datasourcedict"),k=t.attr("data-datasourcedictvaluefield");this.formSelectOptions.push({id:e,source:"dict",dictId:_,valueField:k});break;case"string":this.formSelectOptions.push({id:e,source:"string",string:a.decodeURI(t.attr("data-datasourcestring"))});break;case"sql":var w=a.decodeURI(t.attr("data-datasourcesql"));this.formSelectOptions.push({id:e,source:"sql",connId:y,sql:w});break;case"url":var x=a.decodeURI(t.attr("data-datasourceurl"));this.formSelectOptions.push({id:e,source:"url",url:x});break}if(a.isDef(p)&&a.length(p.events)>0)for(let F=0;F<p.events.length;F++)v&&p.events[F].name=="change"||a.length(p.events[F].script)>0&&(m+=" @"+p.events[F].name+`="execFormEvent('`+e+"','"+p.events[F].name+`',$event)"`);m+=">",m+=`<el-option v-for="opt in formSelectOptions['`+e+`']" :key="opt.value" :value="opt.value" :label="opt.label">`,m+="</el-option>",m+="</el-select>",m+=`<span v-else-if="getFieldStatus('`+e+`')==1" class="roadui_fromreadonly">{{getSelectTitle('`+e+"',formData['"+e+"'])}}</span>",m+="</el-form-item>",t.after(this.escapeHTML(m)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:o?"json":"string",label:u})},compile_cascader(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-placeholder")||"",i=t.attr("data-width"),c=t.attr("data-expandtrigger")||"click",n=t.attr("data-dataSource"),b=t.attr("data-search")=="true",o=t.attr("data-allowclear")=="true",y=t.attr("data-datasourcesqlconn"),g=t.attr("data-emitPath"),f=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';f+=`<el-cascader v-if="getFieldStatus('`+e+`')==0"`,f+=` v-model="formData['`+e+`']"`,f+=' ref="formRef_'+a.replace(e,"-","_")+'"',a.length(s,!1)>0&&(f+=' placeholder="'+s+'"');var h="";g=="1"&&(h+="emitPath:false,"),c==="hover"&&(h+="expandTrigger:'hover',"),a.length(h)>0&&(f+=' :props="{'+h+'}"'),a.length(r)>0&&this.formDefaultValues.push({id:e,type:"array",defaultValue:r}),b&&(f+=" filterable"),o&&(f+=" clearable");var m="";switch(a.length(i)>0&&(m+="width:"+i+";"),a.length(m)>0&&(f+=' style="'+m+'"'),n){case"dict":var d=t.attr("data-datasourcedict"),p=t.attr("data-datasourcedictvaluefield");this.formSelectOptions.push({id:e,source:"cascader_dict",dictId:d,valueField:p});break;case"string":var v=a.decodeURI(t.attr("data-datasourcestring"));this.formSelectOptions.push({id:e,source:"cascader_string",string:v});break;case"sql":var _=a.decodeURI(t.attr("data-datasourcesql"));this.formSelectOptions.push({id:e,source:"cascader_sql",connId:y,sql:_});break;case"url":var k=a.decodeURI(t.attr("data-datasourceurl"));this.formSelectOptions.push({id:e,source:"cascader_url",url:k});break}f+=` :options="formSelectOptions['`+e+`']"`;let w=a.getArrayObj(l,e,"id");if(a.isDef(w)&&a.length(w)>0)for(let x=0;x<w.events.length;x++)a.length(w.events[x].script)>0&&(f+=" @"+w.events[x].name+`="execFormEvent('`+e+"','"+w.events[x].name+`',$event)"`);f+=">",f+="</el-cascader>",f+=`<span v-else-if="getFieldStatus('`+e+`')==1" class="roadui_fromreadonly">{{getCascaderTitle('`+e+"',formData['"+e+"'])}}</span>",f+="</el-form-item>",t.after(this.escapeHTML(f)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"json",label:u})},compile_radio(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-buttonstyle")||"normal",i=t.attr("data-dataSource"),c=t.attr("data-datasourcesqlconn"),n=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';switch(n+=`<el-radio-group v-if="getFieldStatus('`+e+`')==0"`,n+=` v-model="formData['`+e+`']"`,n+=' ref="formRef_'+a.replace(e,"-","_")+'"',a.length(r)>0&&this.formDefaultValues.push({id:e,type:"string",defaultValue:r}),i){case"dict":var b=t.attr("data-dataSourceDict"),o=t.attr("data-datasourcedictvaluefield");this.formSelectOptions.push({id:e,source:"dict",dictId:b,valueField:o});break;case"string":this.formSelectOptions.push({id:e,source:"string",string:a.decodeURI(t.attr("data-datasourcestring"))});break;case"sql":var y=a.decodeURI(t.attr("data-datasourcesql"));this.formSelectOptions.push({id:e,source:"sql",connId:c,sql:y});break;case"url":var g=a.decodeURI(t.attr("data-datasourceurl"));this.formSelectOptions.push({id:e,source:"url",url:g});break}let f=a.getArrayObj(l,e,"id");if(a.isDef(f)&&a.length(f)>0)for(let h=0;h<f.events.length;h++)a.length(f.events[h].script)>0&&(n+=" @"+f.events[h].name+`="execFormEvent('`+e+"','"+f.events[h].name+`',$event)"`);n+=">",n+="<el-radio"+(s==="button"?"-button":"")+` v-for="(option,index) in formSelectOptions['`+e+`']" :key="'op_'+index" :label="option.value"`+(s==="border"?" border":"")+">{{option.label}}</el-radio"+(s==="button"?"-button":"")+">",n+="</el-radio-group>",n+=`<span v-else-if="getFieldStatus('`+e+`')==1" class="roadui_fromreadonly">{{getSelectTitle('`+e+"',formData['"+e+"'])}}</span>",n+="</el-form-item>",t.after(this.escapeHTML(n)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"string",label:u})},compile_checkbox(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-buttonstyle")||"normal",i=t.attr("data-dataSource"),c=t.attr("data-datasourcesqlconn"),n=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';switch(n+=`<el-checkbox-group v-if="getFieldStatus('`+e+`')==0"`,n+=` v-model="formData['`+e+`']"`,n+=' ref="formRef_'+a.replace(e,"-","_")+'"',a.length(r)>0&&this.formDefaultValues.push({id:e,type:"array",defaultValue:r}),i){case"dict":var b=t.attr("data-dataSourceDict"),o=t.attr("data-datasourcedictvaluefield");this.formSelectOptions.push({id:e,source:"dict",dictId:b,valueField:o});break;case"string":this.formSelectOptions.push({id:e,source:"string",string:a.decodeURI(t.attr("data-datasourcestring"))});break;case"sql":var y=a.decodeURI(t.attr("data-datasourcesql"));this.formSelectOptions.push({id:e,source:"sql",connId:c,sql:y});break;case"url":var g=a.decodeURI(t.attr("data-datasourceurl"));this.formSelectOptions.push({id:e,source:"url",url:g});break}let f=a.getArrayObj(l,e,"id");if(a.isDef(f)&&a.length(f)>0)for(let h=0;h<f.events.length;h++)a.length(f.events[h].script)>0&&(n+=" @"+f.events[h].name+`="execFormEvent('`+e+"','"+f.events[h].name+`',$event)"`);n+=">",n+="<el-checkbox"+(s==="button"?"-button":"")+` v-for="(option,index) in formSelectOptions['`+e+`']" :key="'op_'+index" :label="option.value"`+(s==="border"?" border":"")+">{{option.label}}</el-checkbox"+(s==="button"?"-button":"")+">",n+="</el-checkbox-group>",n+=`<span v-else-if="getFieldStatus('`+e+`')==1" class="roadui_fromreadonly">{{getSelectTitle('`+e+"',formData['"+e+"'])}}</span>",n+="</el-form-item>",t.after(this.escapeHTML(n)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"json",label:u})},compile_switch(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=t.attr("data-defaultchecked")=="true",s=a.replace(a.replace(t.attr("data-checkedchildren"),"'",""),'"',""),i=a.replace(a.replace(t.attr("data-uncheckedchildren"),"'",""),'"',""),c=t.attr("data-checkedvalue"),n=t.attr("data-uncheckedvalue"),b=t.attr("data-checkedcolor"),o=t.attr("data-uncheckedcolor"),y=t.attr("data-inlineprompt")=="true",g=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';g+=`<el-switch v-if="getFieldStatus('`+e+`')==0"`,g+=` v-model="formData['`+e+`']"`,g+=' ref="formRef_'+a.replace(e,"-","_")+'"',r&&this.formDefaultValues.push({id:e,type:a.length(c)>0?"string":"boolean",defaultValue:a.length(c)>0?c:"true"}),a.length(s)>0&&(g+=' active-text="'+s+'"'),a.length(i)>0&&(g+=' inactive-text="'+i+'"'),a.length(c)>0&&(g+=' active-value="'+c+'"'),a.length(n)>0&&(g+=' inactive-value="'+n+'"'),a.length(b)>0&&(g+=' active-color="'+b+'"'),a.length(o)>0&&(g+=' inactive-color="'+o+'"'),y&&(g+=" inline-prompt");let f=a.getArrayObj(l,e,"id");if(a.isDef(f)&&a.length(f)>0)for(let h=0;h<f.events.length;h++)a.length(f.events[h].script)>0&&(g+=" @"+f.events[h].name+`="execFormEvent('`+e+"','"+f.events[h].name+`',$event)"`);g+=">",g+="</el-switch>",g+=`<span v-else-if="getFieldStatus('`+e+`')==1" class="roadui_fromreadonly">{{getSwitchTitle(formData['`+e+"'],'"+i+"','"+s+"','"+c+"')}}</span>",g+="</el-form-item>",t.after(this.escapeHTML(g)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"string",label:u})},compile_hidden(t){if(!a.isUndef(t)){var l=t.attr("data-id"),e=t.attr("data-label"),u=a.decodeURI(t.attr("data-defaultvalue")),r='<input type="hidden"';r+=` v-model="formData['`+l+`']"`,r+=' ref="formRef_'+a.replace(l,"-","_")+'"',a.length(u)>0&&this.formDefaultValues.push({id:l,type:"string",defaultValue:u}),r+="/>",t.after(this.escapeHTML(r)),t.remove(),a.inArray(this.formFields,l,"id")?this.formCompileErrMsg.push("控件id："+l+" 重复！"):this.formFields.push({id:l,type:"string",label:e})}},compile_datetime(t,l){if(!a.isUndef(t)){var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-width"),i=t.attr("data-placeholder"),c=t.attr("data-selecttype")||"",n=t.attr("data-shortcuts")=="true",b=t.attr("data-clearable")=="true",o=t.attr("data-format")||"",y=t.attr("data-valueformat")||"",g=t.attr("data-separator")||"",f=t.attr("data-starttime")||"",h=t.attr("data-endtime")||"",m=t.attr("data-mintime")||"",d=t.attr("data-maxtime")||"",p=t.attr("data-steptime")||"",v=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';if(c=="time"){v+=`<el-time-select v-if="getFieldStatus('`+e+`')==0" v-model="formData['`+e+`']"`,v+=' ref="formRef_'+a.replace(e,"-","_")+'"',v+=' format="'+(a.length(o)>0?o:"HH:mm:ss")+'"',a.length(f)>0&&(v+=' start="'+f+'"'),a.length(h)>0&&(v+=' end="'+h+'"'),a.length(m)>0&&(v+=' min-time="'+m+'"'),a.length(d)>0&&(v+=' max-time="'+d+'"'),a.length(p)>0&&(v+=' step="'+p+'"'),b?v+=" clearable":v+=' :clearable="false"',a.length(i,!1)>0&&(v+=' placeholder="'+i+'"');var _="";a.length(s)>0&&(_+="width:"+s+";",_+="max-width:"+s+";"),a.length(_)>0&&(v+=' style="'+_+'"');let k=a.getArrayObj(l,e,"id");if(a.isDef(k)&&a.length(k)>0)for(let w=0;w<k.events.length;w++)a.length(k.events[w].script)>0&&(v+=" @"+k.events[w].name+`="execFormEvent('`+e+"','"+k.events[w].name+`',$event)"`);v+=">",v+="</el-time-select>"}else{v+=`<el-date-picker v-if="getFieldStatus('`+e+`')==0" v-model="formData['`+e+`']" type="`+c+'"',v+=' ref="formRef_'+a.replace(e,"-","_")+'"',v+=' :editable="!isMobile"',a.length(r)>0&&this.formDefaultValues.push({id:e,type:"string",defaultValue:r}),a.length(i,!1)>0&&(v+=' placeholder="'+i+'"'),a.length(o)>0&&(v+=' format="'+o+'"'),a.length(y)>0&&(v+=' value-format="'+y+'"');var _="";a.length(s)>0&&(_+="width:"+s+";",_+="max-width:"+s+";"),a.length(_)>0&&(v+=' style="'+_+'"'),n&&(c==="daterange"||c==="datetimerange")&&(v+=' :shortcuts="utils.dateShortucts"'),a.length(g)>0&&(v+=' range-separator="'+g+'"'),b?v+=" clearable":v+=' :clearable="false"';let w=a.getArrayObj(l,e,"id");if(a.isDef(w)&&a.length(w)>0)for(let x=0;x<w.events.length;x++)a.length(w.events[x].script)>0&&(v+=" @"+w.events[x].name+`="execFormEvent('`+e+"','"+w.events[x].name+`',$event)"`);v+=">",v+="</el-date-picker>"}v+=`<span v-else-if="getFieldStatus('`+e+`')==1" class="roadui_fromreadonly">`+(c=="time"?"{{getText('"+e+"')}}":"{{getDateTimeTitle(formData['"+e+"'],'"+o+"','"+g+"')}}")+"</span>",v+="</el-form-item>",t.after(this.escapeHTML(v)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:c=="time"?"string":c.indexOf("range")>0?"json":"datetime",format:c=="time"?"":o,label:u})}},compile_dictionary(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-width"),i=t.attr("data-placeholder"),c=t.attr("data-range"),y=t.attr("data-multiple")=="true",n=t.attr("data-showroot")=="true",b=t.attr("data-selectroot")=="true",o=t.attr("data-selectparent")=="true",y=t.attr("data-multiple")=="true",g=t.attr("data-selectsize"),f=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';f+=`<el-selectdict :status="getFieldStatus('`+e+`')" v-model="formData['`+e+`']"`,f+=' ref="formRef_'+a.replace(e,"-","_")+'"',a.length(r)>0&&this.formDefaultValues.push({id:e,type:"string",defaultValue:r}),a.length(i,!1)>0&&(f+=' placeholder="'+i+'"'),a.length(c)>0&&(f+=' root="'+c+'"'),y&&(f+=" multiple"),f+=' :show-root="'+(n?"true":"false")+'"',f+=' :select-root="'+(b?"true":"false")+'"',f+=' :select-parent="'+(o?"true":"false")+'"',a.isNumberString(g)&&(f+=' :multiple-limit="'+g+'"');var h="";a.length(s)>0&&(h+="width:"+s+";"),a.length(h)>0&&(f+=' style="'+h+'"');let m=a.getArrayObj(l,e,"id");if(a.isDef(m)&&a.length(m)>0)for(let d=0;d<m.events.length;d++)a.length(m.events[d].script)>0&&(f+=" @"+m.events[d].name+`="execFormEvent('`+e+"','"+m.events[d].name+`',$event)"`);f+="></el-selectdict>",f+="</el-form-item>",t.after(this.escapeHTML(f)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"string",label:u})},compile_organize(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-width"),i=t.attr("data-placeholder"),c=t.attr("data-range"),n=t.attr("data-selecttype"),b=t.attr("data-selectrange"),o=t.attr("data-selectsize"),y=t.attr("data-multiple")=="true",g=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';g+=`<el-selectorg :status="getFieldStatus('`+e+`')" v-model="formData['`+e+`']"`,g+=' ref="formRef_'+a.replace(e,"-","_")+`" :is-mobile="'1'==isMobile"`,a.length(r)>0&&this.formDefaultValues.push({id:e,type:"string",defaultValue:r}),a.length(i,!1)>0&&(g+=' placeholder="'+i+'"'),y||(g+=' :multiple="false"'),a.isNumberString(o)&&(g+=' :multiple-limit="'+o+'"'),g+=" clearable";var f=[];a.length(c)>0&&f.push(c.split(",")),a.length(b)>0&&f.push(b),a.length(f)>0&&(g+=' select-range="'+f.join(",")+'"'),a.length(n)>0&&(g+=' select-type="'+n+'"');var h="";a.length(s)>0&&(h+="width:"+s+";"),a.length(h)>0&&(g+=' style="'+h+'"');let m=a.getArrayObj(l,e,"id");if(a.isDef(m)&&a.length(m)>0)for(let d=0;d<m.events.length;d++)a.length(m.events[d].script)>0&&(g+=" @"+m.events[d].name+`="execFormEvent('`+e+"','"+m.events[d].name+`',$event)"`);g+="></el-selectorg>",g+="</el-form-item>",t.after(this.escapeHTML(g)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"string",label:u})},compile_appraise(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")),s=t.attr("data-customicon"),i=t.attr("data-allowhalf")=="true",c=t.attr("data-count"),n=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';n+=`<el-rate v-model="formData['`+e+`']" :disabled="getFieldStatus('`+e+`')==1" size="large"`,n+=' ref="formRef_'+a.replace(e,"-","_")+'"',a.length(r)>0&&parseFloat(r)>0&&this.formDefaultValues.push({id:e,type:"number",defaultValue:r}),i&&(n+=" allow-half"),a.length(c)>0&&parseInt(c)>0&&(n+=' :max="'+c+'"'),a.length(s)>0&&(n+=` :icons="['`+s+"','"+s+"','"+s+`']" void-icon="`+s+'"');let b=a.getArrayObj(l,e,"id");if(a.isDef(b)&&a.length(b)>0)for(let o=0;o<b.events.length;o++)a.length(b.events[o].script)>0&&(n+=" @"+b.events[o].name+`="execFormEvent('`+e+"','"+b.events[o].name+`',$event)"`);n+=">",n+="</el-rate>",n+="</el-form-item>",t.after(this.escapeHTML(n)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"number",label:u})},compile_html(t){if(!a.isUndef(t)){var l=t.attr("data-id"),e=t.attr("data-label"),u=a.decodeURI(t.attr("data-defaultvalue")),r=t.attr("data-toolbar"),s=t.attr("data-width"),i=t.attr("data-height"),c=t.attr("data-placeholder"),n=`<el-form-item v-if="getFieldStatus('`+l+`')!=2" label="`+e+'" prop="'+l+'">';n+=`<el-ckeditor :status="getFieldStatus('`+l+`')" v-model="formData['`+l+`']"`,n+=' ref="formRef_'+a.replace(l,"-","_")+'"',a.length(u)>0&&this.formDefaultValues.push({id:l,type:"string",defaultValue:u}),a.length(c,!1)>0&&(n+=' placeholder="'+c+'"'),a.isNumberString(r)&&(n+=' :toolbar="'+r+'"'),a.length(s)>0&&(n+=' width="'+s+'"'),a.isNumberString(i)>0&&(n+=' :height="'+i+'"'),n+=">",n+="</el-ckeditor>",n+="</el-form-item>",t.after(this.escapeHTML(n)),t.remove(),a.inArray(this.formFields,l,"id")?this.formCompileErrMsg.push("控件id："+l+" 重复！"):this.formFields.push({id:l,type:"string",label:e})}},compile_label(t){if(!a.isUndef(t)){var l=t.attr("data-id"),e=t.attr("data-label"),u=a.decodeURI(t.attr("data-defaultvalue")),r=a.decodeURI(t.attr("data-style")),s=`<el-form-item v-if="getFieldStatus('`+l+`')!=2" label="`+e+'" prop="'+l+'">';s+="<label",s+=' ref="formRef_'+a.replace(l,"-","_")+'"';var i="color:var(--el-text-color-regular);";a.length(r)>0&&(i+=a.replace(r,'"',"")),s+=' style="'+i+'"',a.length(u)>0&&this.formDefaultValues.push({id:l,type:"string",isSet:t.attr("data-isset")=="true"?1:0,defaultValue:u}),s+=">",s+="{{formData['"+l+"']}}",s+="</label>",s+="</el-form-item>",t.after(this.escapeHTML(s)),t.remove(),a.inArray(this.formFields,l,"id")?this.formCompileErrMsg.push("控件id："+l+" 重复！"):this.formFields.push({id:l,type:"string",label:e})}},compile_button(t,l,e){if(a.isUndef(t))return;var u=t.attr("data-id"),r=t.attr("data-label"),s=t.attr("data-width"),i=t.attr("data-buttontype"),c=t.attr("data-icon"),n=`<el-form-item v-if="getFieldStatus('`+u+`')!=2">`;n+=`<el-button :disabled="getFieldStatus('`+u+`')==1"`,n+=' ref="formRef_'+a.replace(u,"-","_")+'"',a.length(i)>0&&(n+=i==="text"?" text":' type="'+i+'"'),a.length(s)>0&&(n+=' style="width:'+s+';"'),a.length(c)>0&&(n+=' icon="'+c+'"');let b=a.getArrayObj(e,u,"id");if(a.isDef(b)&&a.length(b)>0)for(let o=0;o<b.events.length;o++)a.length(b.events[o].script)>0&&(n+=" @"+b.events[o].name+`="execFormEvent('`+u+"','"+b.events[o].name+`',$event)"`);n+=">",n+=r,n+="</el-button>",n+="</el-form-item>",t.after(this.escapeHTML(n)),t.remove(),a.inArray(this.formFields,u,"id")?this.formCompileErrMsg.push("控件id："+u+" 重复！"):this.formFields.push({id:u,type:"string",label:r})},compile_datatable(t,l){if(!a.isUndef(t)){var e=t.attr("data-id"),u=t.attr("data-label"),r=t.attr("data-width"),s=t.attr("data-height"),i=t.attr("data-border")=="true",c=t.attr("data-stripe")=="true",n=t.attr("data-size"),b=a.decodeURI(t.attr("data-columns")),o=t.attr("data-datasource"),y=t.attr("data-datasourcesqlconn"),g=a.decodeURI(t.attr("data-datasourcetext"));a.length(o)>0&&a.length(g)>0&&this.formDefaultValues.push({id:e,type:"datatable",dataSource:o,dataSourceText:g,dataSourceSqlConn:y});var f="<el-form-item";a.length(u)>0&&(f+=' label="'+u+'"'),f+=">",f+=`<el-table :data="formData['`+e+`']"`,f+=' ref="formRef_'+a.replace(e,"-","_")+'"',a.length(n)>0&&(f+=' size="'+n+'"'),i&&(f+=" border"),c&&(f+=" stripe");var h="width:"+(a.length(r)>0?r:"100%");f+=' style="'+h+'"',a.length(s)>0&&(f+=a.isNumberString(s)?' :height="'+s+'"':' height="'+s+'"'),f+=">",a.length(b)>0&&(f+=b),f+="</el-table>",f+="</el-form-item>",t.after(this.escapeHTML(f)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"string",label:u})}},compile_signature(t){if(!a.isUndef(t)){var l=t.attr("data-id"),e=t.attr("data-label"),u=t.attr("data-buttontype")||"",r=t.attr("data-sign")=="true";this.formDefaultValues.push({id:l,type:"string",defaultValue:r?"{<UserSign>}":""});var s=`<el-form-item v-if="getFieldStatus('`+l+`')!=2" label="`+e+'" prop="'+l+'">';s+=`<el-button v-if="getFieldStatus('`+l+`')==0"`+(u==="text"?" text":' type="'+u+'"')+` style="margin-right:12px" @click="formData['`+l+"']=utils.length(formData['"+l+`'])===0?formSign:'';">{{utils.length(formData['`+l+"'])===0?'签章':'取消签章'}}</el-button>",s+=`<el-usersign :sign="formData['`+l+`']"`,s+=' ref="formRef_'+a.replace(l,"-","_")+'"',s+=">",s+="</el-usersign>",s+="</el-form-item>",t.after(this.escapeHTML(s)),t.remove(),a.inArray(this.formFields,l,"id")?this.formCompileErrMsg.push("控件id："+l+" 重复！"):this.formFields.push({id:l,type:"string",label:e})}},compile_serialnumber(t,l){if(!a.isUndef(t)){var e=t.attr("data-id"),u=t.attr("data-label"),r=JSON.parse(a.decodeURI(t.attr("data-serial")))||[],s=t.attr("data-placeholder")||"自动生成流水号",i=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';i+='<span class="roadui_note">',i+="{{utils.length(formData['"+e+"'])===0?'"+s+"':formData['"+e+"']}}",i+="</span>",i+="</el-form-item>",l.serialNumber.push({fieldId:e,serials:r}),t.after(this.escapeHTML(i)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"string",label:u})}},compile_files(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=t.attr("data-width"),s=t.attr("data-placeholder")||"",i=t.attr("data-filetype")||"",c=t.attr("data-showtype")||"link",n=a.decodeURI(t.attr("data-showstyle")||""),b=t.attr("data-showimg")=="true",o=t.attr("data-showindex")=="true",y=t.attr("data-limit"),g=t.attr("data-size")||"",f=t.attr("data-controlType")||"0",h=t.attr("data-controlShowType")||"0";let m=a.isNumberString(h)?h:"0";var d=a.decodeURI(t.attr("data-tip")||""),p=a.decodeURI(t.attr("data-buttonText")||""),v=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';v+=`<el-selectfile :status="getFieldStatus('`+e+`')" v-model="formData['`+e+`']"`,v+=' :ismobile="isMobile"',v+=' ref="formRef_'+a.replace(e,"-","_")+'"',a.length(s,!1)>0&&(v+=' placeholder="'+s+'"'),a.length(i)>0&&(v+=' accept="'+i+'"'),v+=' show-type="'+c+'"',b&&(v+=" show-img"),o||(v+=' :show-index="false"'),a.isNumberString(y)&&(v+=' :limit="'+y+'"'),parseFloat(g)&&(v+=' :size="'+parseFloat(g)+'"'),a.length(d)>0&&(v+=' tip="'+d+'"'),a.length(p)>0&&(v+=' button-text="'+p+'"'),v+=' :control-type="'+(f=="1"?"1":"0")+'"',v+=' :control-show-type="'+m+'"',v+=' list-type="'+(m=="2"?"picture-card":"text")+'"',a.length(n)>0&&(v+=' show-style="'+n+'"');var _="";a.length(r)>0&&(_+="width:"+r+";"),a.length(_)>0&&(v+=' style="'+_+'"');let k=a.getArrayObj(l,e,"id");if(a.isDef(k)&&a.length(k)>0)for(let w=0;w<k.events.length;w++)a.length(k.events[w].script)>0&&(v+=" @"+k.events[w].name+`="execFormEvent('`+e+"','"+k.events[w].name+`',$event)"`);v+=">",v+="</el-selectfile>",v+="</el-form-item>",t.after(this.escapeHTML(v)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"string",label:u})},compile_selectdiv(t,l){if(a.isUndef(t))return;var e=t.attr("data-id"),u=t.attr("data-label"),r=a.decodeURI(t.attr("data-defaultvalue")||""),s=t.attr("data-applibraryid")||"",i=a.decodeURI(t.attr("data-applibraryaddress")||""),c=t.attr("data-valuefield")||"",n=t.attr("data-titlefield")||"",b=t.attr("data-valueseparator")||"",o=t.attr("data-titleseparator")||"",y=t.attr("data-modaltitle")||"",g=t.attr("data-placeholder")||"",f=t.attr("data-width")||"",h=t.attr("data-modalwidth")||"",m=a.decodeURI(t.attr("data-params")||""),d=`<el-form-item v-if="getFieldStatus('`+e+`')!=2" label="`+u+'" prop="'+e+'">';d+=`<el-selectdiv :status="getFieldStatus('`+e+`')" v-model="formData['`+e+`']"`,d+=' ref="formRef_'+a.replace(e,"-","_")+'"',a.length(g,!1)>0&&(d+=' placeholder="'+g+'"'),a.length(r)>0&&this.formDefaultValues.push({id:e,type:"string",defaultValue:r}),d+=' applibrary-id="'+s+'"',d+=' applibrary-address="'+i+'"',d+=' value-field="'+c+'"',d+=' title-field="'+n+'"',a.length(b)>0&&(d+=' value-separator="'+b+'"'),a.length(o)>0&&(d+=' title-separator="'+o+'"'),d+=' modal-title="'+y+'"',a.length(h)>0&&(d+=' modal-width="'+h+'px"'),a.length(f)>0&&(d+=' style="width:'+f+';"'),a.length(m)>0&&(d+=' :query-params="'+m+'"');let p=a.getArrayObj(l,e,"id");if(a.isDef(p)&&a.length(p)>0)for(let v=0;v<p.events.length;v++)a.length(p.events[v].script)>0&&(d+=" @"+p.events[v].name+`="execFormEvent('`+e+"','"+p.events[v].name+`',$event)"`);d+=">",d+="</el-selectdiv>",d+="</el-form-item>",t.after(this.escapeHTML(d)),t.remove(),a.inArray(this.formFields,e,"id")?this.formCompileErrMsg.push("控件id："+e+" 重复！"):this.formFields.push({id:e,type:"string",label:u})},compile_subtable(t,l,e,u){if(a.isUndef(t))return;var r=t.attr("data-id");this.formSubTableIds.push(r);var s=new Array,i=a.getArrayObj(e,r,"id");if(a.isUndef(i)){t.remove();return}var c=i.label||"",n=i.columns,b={},o='<el-form-item label-width="auto" label="'+c+'"';o+=">";const y="small";o+=`<el-table v-if="'1'==isMobile" :row-key="function(row){return row.key;}"`,i.pager?o+=` v-loading="subTableLoading" :data="utils.hasKey(formData,'`+r+"')&&utils.isDef(formData['"+r+"'])?formData['"+r+"'].slice(utils.hasKey(subTablePagers,'"+r+"')&&utils.isDef(subTablePagers['"+r+"'])?subTablePagers['"+r+"'].start||0:0,utils.hasKey(subTablePagers,'"+r+"')&&utils.isDef(subTablePagers['"+r+"'])?subTablePagers['"+r+`'].end||10:10):[]"`:o+=` :data="formData['`+r+`']"`,i.bordered&&(o+=" border"),i.stripe&&(o+=" stripe"),i.height&&(o+=" "+(a.isNumberString(i.height)?":":"")+'height="'+i.height+'"'),a.inArray(n,!0,"sum")&&(o+=" show-summary",o+=' :summary-method="getSubtableSummaries"'),o+=">",o+="<el-table-column";let g=[];for(let f=0;f<n.length;f++)n[f].sum&&g.push(n[f].field+","+a.replace(n[f].name,"'",""));o+=' className="'+g.join(";")+'" labelClassName="'+r+'"',o+=">",o+="<template #header>",o+=`<el-button v-if="!getSubtableDisabled('`+r+`')" type="primary" class="roadui_fromrunsubtable_button" size="`+y+`" @click="addSubtableRow('`+r+`')"><el-icon><Plus /></el-icon></el-button>`,o+="</template>",o+='<template #default="scope">';for(let f=0;f<n.length;f++){let h=n[f].field;a.length(h)===0&&(h="field_"+n[f].key),h=h.toLowerCase();let m=n[f].edit.type||"texts",d="string",p=n[f].edit.set||{};if(m=="hidden")continue;o+=`<el-form-item label-width="auto" style="margin:14px 0;" :rules="formRulesSubtable['`+r+"."+h+`']" :prop="'`+r+".'+scope.$index+'."+h+`'">`,o+="<template #label>",o+=a.replace(n[f].name,"'",""),o+="</template>";let v={id:h,type:d,label:n[f].name};switch(m){case"texts":o+=this.compile_subtable_text(r,h,p,u,v);break;case"textareas":o+=this.compile_subtable_textarea(r,h,p,u,v);break;case"number":o+=this.compile_subtable_number(r,h,p,u,v);break;case"selects":o+=this.compile_subtable_select(r,h,p,u,v);break;case"selectdiv":o+=this.compile_subtable_selectdiv(r,h,p,u,v);break;case"cascader":o+=this.compile_subtable_cascader(r,h,p,u,v);break;case"radio":o+=this.compile_subtable_radio(r,h,p,u,v);break;case"checkbox":o+=this.compile_subtable_checkbox(r,h,p,u,v);break;case"switchs":o+=this.compile_subtable_switch(r,h,p,u,v);break;case"datetime":o+=this.compile_subtable_datetime(r,h,p,u,v);break;case"dictionary":o+=this.compile_subtable_dictionary(r,h,p,u,v);break;case"organize":o+=this.compile_subtable_organize(r,h,p,u,v);break;case"appraise":o+=this.compile_subtable_appraise(r,h,p,u,v);break;case"labels":o+=this.compile_subtable_label(r,h,p);break;case"files":o+=this.compile_subtable_files(r,h,p,u,v);break}o+="</el-form-item>"}o+=`<div v-if="!getSubtableDisabled('`+r+`')">`,o+='<el-button type="primary" class="roadui_fromrunsubtable_button" size="'+y+`" @click="insertSubtableRow('`+r+`',scope.row)"><el-icon><Plus /></el-icon></el-button>`,o+='<el-button type="primary" class="roadui_fromrunsubtable_button" style="margin-left:10px;" size="'+y+`" @click="delSubtableRow('`+r+`',scope.row)"><el-icon><Minus /></el-icon></el-button>`,o+="</div>",o+="</template>",o+="</el-table-column>",o+="</el-table>",o+='<el-table v-else size="'+(i.size||"default")+'" :row-key="function(row){return row.key;}"',i.pager?o+=` v-loading="subTableLoading" :data="utils.hasKey(formData,'`+r+"')&&utils.isDef(formData['"+r+"'])?formData['"+r+"'].slice(utils.hasKey(subTablePagers,'"+r+"')&&utils.isDef(subTablePagers['"+r+"'])?subTablePagers['"+r+"'].start||0:0,utils.hasKey(subTablePagers,'"+r+"')&&utils.isDef(subTablePagers['"+r+"'])?subTablePagers['"+r+`'].end||10:10):[]"`:o+=` :data="formData['`+r+`']"`,i.bordered&&(o+=" border"),i.stripe&&(o+=" stripe"),i.height&&(o+=" "+(a.isNumberString(i.height)?":":"")+'height="'+i.height+'"'),o+=' style="width:'+(a.length(i.width)>0?i.width:"100%")+'"',a.inArray(n,!0,"sum")&&(o+=" show-summary",o+=' :summary-method="getSummaries"'),o+=">",i.rowNumber&&(o+='<el-table-column type="index" label="#" align="center"/>');for(let f=0;f<n.length;f++){let h=n[f].field;a.length(h)===0&&(h="field_"+n[f].key),h=h.toLowerCase();let m=n[f].edit.type||"texts",d="string",p=n[f].edit.set||{};if(m=="switchs"?p.defaultChecked?b[h]=a.length(p.defaultValue)>0?p.defaultValue:!0:a.length(p.defaultValue)>0&&(b[h]=p.defaultValue):m=="appraise"||m=="number"?a.isNumberString(p.defaultValue)&&(b[h]=a.toNumber(p.defaultValue)):a.length(p.defaultValue)>0&&(b[h]=p.defaultValue),m=="hidden")continue;o+='<el-table-column prop="'+h+'" label="'+a.replace(n[f].name,"'","")+'"',n[f].order&&(o+=" sortable"),parseInt(n[f].width)&&(o+=' width="'+parseInt(n[f].width)+'"'),a.length(n[f].align)>0&&(o+=' align="'+n[f].align+'"'),n[f].sum&&(o+=' className="1" labelClassName="'+r+'"'),o+=">",o+='<template #default="scope">',o+=`<el-form-item style="margin:0;" :rules="formRulesSubtable['`+r+"."+h+`']" :prop="'`+r+".'+scope.$index+'."+h+`'">`;let v={id:h,type:d,label:n[f].name};switch(m){case"texts":o+=this.compile_subtable_text(r,h,p,u,v);break;case"textareas":o+=this.compile_subtable_textarea(r,h,p,u,v);break;case"number":o+=this.compile_subtable_number(r,h,p,u,v);break;case"selects":o+=this.compile_subtable_select(r,h,p,u,v);break;case"selectdiv":o+=this.compile_subtable_selectdiv(r,h,p,u,v);break;case"cascader":o+=this.compile_subtable_cascader(r,h,p,u,v);break;case"radio":o+=this.compile_subtable_radio(r,h,p,u,v);break;case"checkbox":o+=this.compile_subtable_checkbox(r,h,p,u,v);break;case"switchs":o+=this.compile_subtable_switch(r,h,p,u,v);break;case"datetime":o+=this.compile_subtable_datetime(r,h,p,u,v);break;case"dictionary":o+=this.compile_subtable_dictionary(r,h,p,u,v);break;case"organize":o+=this.compile_subtable_organize(r,h,p,u,v);break;case"appraise":o+=this.compile_subtable_appraise(r,h,p,u,v);break;case"labels":o+=this.compile_subtable_label(r,h,p);break;case"files":o+=this.compile_subtable_files(r,h,p,u,v);break}o+="</el-form-item></template></el-table-column>",s.push(v)}if(this.formDefaultValues.push({id:r,type:"subtable",defaultValue:b}),o+=`<el-table-column width="114" v-if="!getSubtableDisabled('`+r+`')">`,o+='<template #header><el-button type="primary" class="roadui_fromrunsubtable_button" style="padding:5px 8px;" size="'+y+`" @click="addSubtableRow('`+r+`')"><el-icon><Plus /></el-icon></el-button></template>`,o+='<template #default="scope">',o+='<el-button type="primary" class="roadui_fromrunsubtable_button" style="padding:5px 8px;" size="'+y+`" @click="insertSubtableRow('`+r+`',scope.row)"><el-icon><Plus /></el-icon></el-button>`,o+='<el-button type="primary" class="roadui_fromrunsubtable_button" style="padding:5px 8px;margin-left:10px;" size="'+y+`" @click="delSubtableRow('`+r+`',scope.row)"><el-icon><Minus /></el-icon></el-button>`,o+="</template>",o+="</el-table-column>",o+="</el-table>",i.pager&&(o+=`<div class="roadui_pagerdiv"><el-pagination style="margin-bottom:10px;" :currentPage="utils.hasKey(subTablePagers,'`+r+"')&&utils.isDef(subTablePagers['"+r+"'])?subTablePagers['"+r+`'].number:null" :page-size="utils.hasKey(subTablePagers,'`+r+"')&&utils.isDef(subTablePagers['"+r+"'])?subTablePagers['"+r+`'].size:null" :page-sizes="[5,10,15,20,25,30]" :background="true" :layout="'1'==isMobile?'total,sizes,prev,next':'total,sizes,prev,pager,next'" :total="utils.hasKey(formData,'`+r+"')&&utils.isDef(formData['"+r+"'])?formData['"+r+`'].length:0" hide-on-single-page :disabled="subTableLoading" @size-change="handleSizeChange($event,'`+r+`')" @current-change="handleCurrentChange($event,'`+r+`')" /> </div>`),o+="</el-form-item>",t.after(this.escapeHTML(o)),t.remove(),i.events){let f=[];for(let h=0;h<i.events.length;h++)a.length(i.events[h].script)>0&&f.push({name:i.events[h].value,script:i.events[h].script});f.length>0&&u.push({id:"subtable_event_"+r,events:f})}a.inArray(this.formFields,r,"id")?this.formCompileErrMsg.push("控件id："+r+" 重复！"):this.formFields.push({id:r,type:"subtable",label:c,tableName:i.table||"",fields:s})},compile_subtable_text(t,l,e,u,r){var s="string",i=`<el-input v-if="getFieldStatus('`+t+"."+l+`')==0" v-model="scope.row['`+l+`']"`;i+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`;var c="";if(a.length(e.width)>0&&(c+="width:"+e.width+";"),a.length(c)>0&&(i+=' style="'+c+'"'),a.length(e.align)>0&&(i+=` :input-style="{'text-align':'`+e.align+`'}"`),e.disabled&&(i+=" disabled"),e.readonly&&(i+=" readonly"),e.allowClear&&(i+=" clearable"),a.length(e.prefix)>0&&(i+=' prefix-icon="'+e.prefix+'"'),a.length(e.suffix)>0&&(i+=' suffix-icon="'+e.suffix+'"'),a.toNumber(e.maxLength)>0&&(i+=' :maxlength="'+a.toNumber(e.maxLength)+'"'),a.length(e.placeholder,!1)>0&&(i+=' placeholder="'+e.placeholder+'"'),e.inputType=="password"&&(i+=' type="password" show-password'),a.length(e.events)>0){let n=[],b="subtable_event_"+t+"_"+l;for(let o=0;o<e.events.length;o++)a.length(e.events[o].name)===0||a.length(e.events[o].script)===0||(i+=" @"+e.events[o].name+`="execFormEvent('`+b+"','"+e.events[o].name+`',$event,scope.row)"`,n.push(e.events[o]));n.length>0&&u.push({id:b,events:n})}return i+=" />",i+=`<span class="roadui_fromreadonly" v-else-if="getFieldStatus('`+t+"."+l+`')==1">{{scope.row['`+l+"']||''}}</span>",r.type=s,r.format=e.format||"",i},compile_subtable_number(t,l,e,u,r){var s="number",i=`<el-input-number v-if="getFieldStatus('`+t+"."+l+`')==0" v-model="scope.row['`+l+`']"`;i+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`;var c="";if(a.length(e.width)>0&&(c+="width:"+e.width+";"),a.length(c)>0&&(i+=' style="'+c+'"'),e.disabled&&(i+=" disabled"),a.length(e.min)>0&&(i+=' :min="'+parseFloat(e.min)+'"'),a.length(e.max)>0&&(i+=' :max="'+parseFloat(e.max)+'"'),a.length(e.step)>0&&(i+=' :step="'+parseFloat(e.step)+'"'),a.length(e.precision)>0&&(i+=' :precision="'+parseFloat(e.precision)+'"'),e.stepstrictly&&(i+=" step-strictly"),e.controls||(i+=' :controls="false"'),e.controlsposition&&(i+=' controls-position="right"'),a.length(e.placeholder,!1)>0&&(i+=' placeholder="'+e.placeholder+'"'),a.length(e.events)>0){let n=[],b="subtable_event_"+t+"_"+l;for(let o=0;o<e.events.length;o++)a.length(e.events[o].name)===0||a.length(e.events[o].script)===0||(i+=" @"+e.events[o].name+`="execFormEvent('`+b+"','"+e.events[o].name+`',$event,scope.row)"`,n.push(e.events[o]));n.length>0&&u.push({id:b,events:n})}return i+=" />",i+=`<span class="roadui_fromreadonly" v-else-if="getFieldStatus('`+t+"."+l+`')==1">{{scope.row['`+l+"']||''}}</span>",r.type=s,r.format=e.format||"",i},compile_subtable_textarea(t,l,e,u,r){var s="string",i=`<el-input type="textarea" v-if="getFieldStatus('`+t+"."+l+`')==0" v-model="scope.row['`+l+`']"`;i+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`;var c="";if(a.length(e.width)>0&&(c+="width:"+e.width+";"),a.length(c)>0&&(i+=' style="'+c+'"'),a.length(e.align)>0&&(i+=` :input-style="{'text-align':'`+e.align+`'}"`),e.disabled&&(i+=" disabled"),e.allowClear&&(i+=" clearable"),e.readOnly&&(i+=" readonly"),a.toNumber(e.maxLength)>0&&(i+=' :maxlength="'+a.toNumber(e.maxLength)+'"'),a.length(e.placeholder,!1)>0&&(i+=' placeholder="'+e.placeholder+'"'),parseInt(e.rows)&&parseInt(e.rows)>0&&(i+=' :rows="'+parseInt(e.rows)+'"'),a.length(e.events)>0){let n=[],b="subtable_event_"+t+"_"+l;for(let o=0;o<e.events.length;o++)a.length(e.events[o].name)===0||a.length(e.events[o].script)===0||(i+=" @"+e.events[o].name+`="execFormEvent('`+b+"','"+e.events[o].name+`',$event,scope.row)"`,n.push(e.events[o]));n.length>0&&u.push({id:b,events:n})}return i+=" />",i+=`<span class="roadui_fromreadonly" v-else-if="getFieldStatus('`+t+"."+l+`')==1">{{scope.row['`+l+"']||''}}</span>",r.type=s,r.format=e.format||"",i},compile_subtable_select(t,l,e,u,r){var s=`<el-select v-if="getFieldStatus('`+t+"."+l+`')==0" v-model="scope.row['`+l+`']"`;s+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`;var i="";switch(a.length(e.width)>0&&(i+="width:"+e.width+";"),a.length(i)>0&&(s+=' style="'+i+'"'),e.search&&(s+=" filterable"),e.allowClear&&(s+=" clearable"),e.multiple&&(s+=" multiple",r.type="json"),a.length(e.placeholder,!1)>0&&(s+=' placeholder="'+e.placeholder+'"'),e.dataSource){case"dict":this.formSelectOptions.push({id:t+"__"+l,source:"dict",dictId:e.dataSourceDict,valueField:e.dataSourceDictValueField});break;case"string":this.formSelectOptions.push({id:t+"__"+l,source:"string",string:e.dataSourceString});break;case"sql":this.formSelectOptions.push({id:t+"__"+l,source:"sql",connId:e.dataSourceSqlConn,sql:e.dataSourceSql});break;case"url":this.formSelectOptions.push({id:t+"__"+l,source:"url",url:e.dataSourceUrl});break}if(a.length(e.events)>0){let c=[],n="subtable_event_"+t+"_"+l;for(let b=0;b<e.events.length;b++)a.length(e.events[b].name)===0||a.length(e.events[b].script)===0||(s+=" @"+e.events[b].name+`="execFormEvent('`+n+"','"+e.events[b].name+`',$event,scope.row)"`,c.push(e.events[b]));c.length>0&&u.push({id:n,events:c})}return s+=">",s+=`<el-option v-for="opt in (formSelectOptions['`+t+"__"+l+"_'+scope.row['key']]||formSelectOptions['"+t+"__"+l+`'])" :key="opt.value" :value="opt.value" :label="opt.label">`,s+="</el-option>",s+="</el-select>",s+=`<span v-else-if="getFieldStatus('`+t+"."+l+`')==1" class="roadui_fromreadonly">{{getSelectTitle('`+t+"__"+l+"',scope.row['"+l+"'],scope.row)}}</span>",s},compile_subtable_selectdiv(t,l,e,u){var r=`<el-selectdiv append-tobody :status="getFieldStatus('`+t+"."+l+`')" v-model="scope.row['`+l+`']"`;if(r+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`,a.length(e.width)>0&&(r+=' style="width:'+e.width+';"'),r+=' applibrary-id="'+e.applibraryId+'"',r+=' applibrary-address="'+e.applibraryAddress+'"',r+=' value-field="'+e.valueField+'"',r+=' title-field="'+e.titleField+'"',a.length(e.valueSeparator)>0&&(r+=' value-separator="'+e.valueSeparator+'"'),a.length(e.titleSeparator)>0&&(r+=' title-separator="'+e.titleSeparator+'"'),a.length(e.modalTitle)>0&&(r+=' modal-title="'+e.modalTitle+'"'),a.length(e.placeholder)>0&&(r+=' placeholder="'+e.placeholder+'"'),a.toNumber(e.modalWidth,0)>0&&(r+=' modal-width="'+a.toNumber(e.modalWidth,0)+'px"'),a.length(e.params)>0&&(r+=' :query-params="'+e.params+'"'),a.length(e.events)>0){let s=[],i="subtable_event_"+t+"_"+l;for(let c=0;c<e.events.length;c++)a.length(e.events[c].name)===0||a.length(e.events[c].script)===0||(r+=" @"+e.events[c].name+`="execFormEvent('`+i+"','"+e.events[c].name+`',$event,scope.row)"`,s.push(e.events[c]));s.length>0&&u.push({id:i,events:s})}return r+=" />",r},compile_subtable_cascader(t,l,e,u,r){var s=`<el-cascader v-if="getFieldStatus('`+t+"."+l+`')==0" v-model="scope.row['`+l+`']"`;s+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`;var i="";e.emitPath=="1"&&(i+="emitPath:false,"),e.expandTrigger==="hover"&&(i+="expandTrigger:'hover',"),a.length(i)>0&&(s+=' :props="{'+i+'}"');var c="";switch(a.length(e.width)>0&&(c+="width:"+e.width+";"),a.length(c)>0&&(s+=' style="'+c+'"'),e.allowClear&&(s+=" clearable"),e.search&&(s+=" filterable"),a.length(e.placeholder,!1)>0&&(s+=' placeholder="'+e.placeholder+'"'),e.dataSource){case"dict":this.formSelectOptions.push({id:t+"__"+l,source:"cascader_dict",dictId:e.dataSourceDict,valueField:e.dataSourceDictValueField});break;case"string":this.formSelectOptions.push({id:t+"__"+l,source:"cascader_string",string:e.dataSourceString});break;case"sql":this.formSelectOptions.push({id:t+"__"+l,source:"cascader_sql",connId:e.dataSourceSqlConn,sql:e.dataSourceSql});break;case"url":this.formSelectOptions.push({id:t+"__"+l,source:"cascader_url",url:e.dataSourceUrl});break}if(s+=` :options="formSelectOptions['`+t+"__"+l+`']"`,a.length(e.events)>0){let n=[],b="subtable_event_"+t+"_"+l;for(let o=0;o<e.events.length;o++)a.length(e.events[o].name)===0||a.length(e.events[o].script)===0||(s+=" @"+e.events[o].name+`="execFormEvent('`+b+"','"+e.events[o].name+`',$event,scope.row)"`,n.push(e.events[o]));n.length>0&&u.push({id:b,events:n})}return s+=" />",s+=`<span v-else-if="getFieldStatus('`+t+"."+l+`')==1" class="roadui_fromreadonly">{{getCascaderTitle('`+t+"__"+l+"',scope.row['"+l+"'])}}</span>",r.type="json",s},compile_subtable_radio(t,l,e,u){var r=`<el-radio-group v-if="getFieldStatus('`+t+"."+l+`')==0" v-model="scope.row['`+l+`']"`;switch(r+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`,e.dataSource){case"dict":this.formSelectOptions.push({id:t+"__"+l,source:"dict",dictId:e.dataSourceDict,valueField:e.dataSourceDictValueField});break;case"string":this.formSelectOptions.push({id:t+"__"+l,source:"string",string:e.dataSourceString});break;case"sql":this.formSelectOptions.push({id:t+"__"+l,source:"sql",connId:e.dataSourceSqlConn,sql:e.dataSourceSql});break;case"url":this.formSelectOptions.push({id:t+"__"+l,source:"url",url:e.dataSourceUrl});break}if(a.length(e.events)>0){let s=[],i="subtable_event_"+t+"_"+l;for(let c=0;c<e.events.length;c++)a.length(e.events[c].name)===0||a.length(e.events[c].script)===0||(r+=" @"+e.events[c].name+`="execFormEvent('`+i+"','"+e.events[c].name+`',$event,scope.row)"`,s.push(e.events[c]));s.length>0&&u.push({id:i,events:s})}return r+=">",r+="<el-radio"+(e.buttonStyle==="button"?"-button":"")+` v-for="(option,index) in formSelectOptions['`+t+"__"+l+`']" :key="'op_'+index" :label="option.value"`+(e.buttonStyle==="border"?" border":"")+">{{option.label}}</el-radio"+(e.buttonStyle==="button"?"-button":"")+">",r+="</el-radio-group>",r+=`<span v-else-if="getFieldStatus('`+t+"."+l+`')==1" class="roadui_fromreadonly">{{getSelectTitle('`+t+"__"+l+"',scope.row['"+l+"'])}}</span>",r},compile_subtable_checkbox(t,l,e,u,r){var s=`<el-checkbox-group v-if="getFieldStatus('`+t+"."+l+`')==0" v-model="scope.row['`+l+`']"`;switch(s+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`,e.dataSource){case"dict":this.formSelectOptions.push({id:t+"__"+l,source:"dict",dictId:e.dataSourceDict,valueField:e.dataSourceDictValueField});break;case"string":this.formSelectOptions.push({id:t+"__"+l,source:"string",string:e.dataSourceString});break;case"sql":this.formSelectOptions.push({id:t+"__"+l,source:"sql",connId:e.dataSourceSqlConn,sql:e.dataSourceSql});break;case"url":this.formSelectOptions.push({id:t+"__"+l,source:"url",url:e.dataSourceUrl});break}if(a.length(e.events)>0){let i=[],c="subtable_event_"+t+"_"+l;for(let n=0;n<e.events.length;n++)a.length(e.events[n].name)===0||a.length(e.events[n].script)===0||(s+=" @"+e.events[n].name+`="execFormEvent('`+c+"','"+e.events[n].name+`',$event,scope.row)"`,i.push(e.events[n]));i.length>0&&u.push({id:c,events:i})}return s+=">",s+="<el-checkbox"+(e.buttonStyle==="button"?"-button":"")+` v-for="(option,index) in formSelectOptions['`+t+"__"+l+`']" :key="'op_'+index" :label="option.value"`+(e.buttonStyle==="border"?" border":"")+">{{option.label}}</el-checkbox"+(e.buttonStyle==="button"?"-button":"")+">",s+="</el-checkbox-group>",s+=`<span v-else-if="getFieldStatus('`+t+"."+l+`')==1" class="roadui_fromreadonly">{{getSelectTitle('`+t+"__"+l+"',scope.row['"+l+"'])}}</span>",r.type="json",s},compile_subtable_switch(t,l,e,u){var r=`<el-switch v-if="getFieldStatus('`+t+"."+l+`')==0" v-model="scope.row['`+l+`']"`;if(r+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`,a.length(e.checkedChildren)>0&&(r+=' active-text="'+e.checkedChildren+'"'),a.length(e.unCheckedChildren)>0&&(r+=' inactive-text="'+e.unCheckedChildren+'"'),a.length(e.checkedValue)>0&&(r+=' active-value="'+e.checkedValue+'"'),a.length(e.unCheckedValue)>0&&(r+=' inactive-value="'+e.unCheckedValue+'"'),a.length(e.checkedColor)>0&&(r+=' active-color="'+e.checkedColor+'"'),a.length(e.unCheckedColor)>0&&(r+=' inactive-color="'+e.unCheckedColor+'"'),e.inlinePrompt&&(r+=" inline-prompt"),a.length(e.events)>0){let s=[],i="subtable_event_"+t+"_"+l;for(let c=0;c<e.events.length;c++)a.length(e.events[c].name)===0||a.length(e.events[c].script)===0||(r+=" @"+e.events[c].name+`="execFormEvent('`+i+"','"+e.events[c].name+`',$event,scope.row)"`,s.push(e.events[c]));s.length>0&&u.push({id:i,events:s})}return r+=" />",r+=`<span v-else-if="getFieldStatus('`+t+"."+l+`')==1" class="roadui_fromreadonly">{{getSwitchTitle(scope.row['`+l+"'],'"+e.unCheckedChildren+"','"+e.checkedChildren+"','"+e.checkedValue+"')}}</span>",r},compile_subtable_datetime(t,l,e,u,r){var s="";if(e.selectType!="time"){s+=`<el-date-picker v-if="getFieldStatus('`+t+"."+l+`')==0" v-model="scope.row['`+l+`']" type="`+e.selectType+'"',s+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`,s+=' :editable="!isMobile"',a.length(e.placeholder,!1)>0&&(s+=' placeholder="'+e.placeholder+'"'),a.length(e.format||"")>0&&(s+=' format="'+e.format+'"'),a.length(e.valueFormat||"")>0&&(s+=' value-format="'+e.valueFormat+'"'),a.length(e.separator||"")>0&&(s+=' range-separator="'+e.separator+'"');var i="";a.length(e.width)>0&&(i+="width:"+e.width+";",i+="max-width:"+e.width+";"),a.length(i)>0&&(s+=' style="'+i+'"'),e.shortcuts&&(e.selectType==="daterange"||e.selectType==="datetimerange")&&(s+=' :shortcuts="utils.dateShortucts"'),e.clearable?s+=" clearable":s+=' :clearable="false"'}else{s+=`<el-time-select v-if="getFieldStatus('`+t+"."+l+`')==0" v-model="scope.row['`+l+`']"`,s+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`,a.length(e.placeholder,!1)>0&&(s+=' placeholder="'+e.placeholder+'"'),a.length(e.format||"")>0&&(s+=' format="'+e.format+'"'),a.length(e.startTime)>0&&(s+=' start="'+e.startTime+'"'),a.length(e.endTime)>0&&(s+=' end="'+e.endTime+'"'),a.length(e.minTime)>0&&(s+=' min-time="'+e.minTime+'"'),a.length(e.maxTime)>0&&(s+=' max-time="'+e.maxTime+'"'),a.length(e.stepTime)>0&&(s+=' step="'+e.stepTime+'"');var i="";a.length(e.width)>0&&(i+="width:"+e.width+";",i+="max-width:"+e.width+";"),a.length(i)>0&&(s+=' style="'+i+'"'),e.clearable?s+=" clearable":s+=' :clearable="false"'}if(a.length(e.events)>0){let c=[],n="subtable_event_"+t+"_"+l;for(let b=0;b<e.events.length;b++)a.length(e.events[b].name)===0||a.length(e.events[b].script)===0||(s+=" @"+e.events[b].name+`="execFormEvent('`+n+"','"+e.events[b].name+`',$event,scope.row)"`,c.push(e.events[b]));c.length>0&&u.push({id:n,events:c})}return s+=" />",s+=`<span v-else-if="getFieldStatus('`+t+"."+l+`')==1" class="roadui_fromreadonly">`+(e.selectType=="time"?"{{scope.row['"+l+"']||''}}":"{{getDateTimeTitle(scope.row['"+l+"'],'"+(e.format||"")+"','"+(e.separator||"")+"')}}")+"</span>",r.format=e.selectType=="time"?"":e.format||"",r.type=e.selectType=="time"?"string":(e.selectType||"").indexOf("range")>0?"json":"datetime",s},compile_subtable_dictionary(t,l,e,u){var r=`<el-selectdict :status="getFieldStatus('`+t+"."+l+`')" v-model="scope.row['`+l+`']"`;r+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`,a.length(e.placeholder,!1)>0&&(r+=' placeholder="'+e.placeholder+'"'),a.length(e.range)>0&&(r+=' root="'+e.range+'"'),e.multiple&&(r+=" multiple"),r+=' :show-root="'+(e.showRoot?"true":"false")+'"',r+=' :select-root="'+(e.selectRoot?"true":"false")+'"',r+=' :select-parent="'+(e.selectParent?"true":"false")+'"',a.isNumberString(e.selectSize)&&(r+=' :multiple-limit="'+e.selectSize+'"');var s="";if(a.length(e.width)>0&&(s+="width:"+e.width+";"),a.length(s)>0&&(r+=' style="'+s+'"'),a.length(e.events)>0){let i=[],c="subtable_event_"+t+"_"+l;for(let n=0;n<e.events.length;n++)a.length(e.events[n].name)===0||a.length(e.events[n].script)===0||(r+=" @"+e.events[n].name+`="execFormEvent('`+c+"','"+e.events[n].name+`',$event,scope.row)"`,i.push(e.events[n]));i.length>0&&u.push({id:c,events:i})}return r+=" />",r},compile_subtable_organize(t,l,e,u){var r=`<el-selectorg :status="getFieldStatus('`+t+"."+l+`')" v-model="scope.row['`+l+`']"`;r+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key" :is-mobile="'1'==isMobile"`,a.length(e.placeholder,!1)>0&&(r+=' placeholder="'+e.placeholder+'"'),e.multiple||(r+=' :multiple="false"'),a.isNumberString(e.selectSize)&&(r+=' :multiple-limit="'+e.selectSize+'"'),r+=" clearable";var s=[];a.length(e.range)>0&&s.push(e.range.split(",")),a.length(e.selectRange)>0&&s.push(e.selectRange.join(",")),s.length>0&&(r+=' select-range="'+s.join(",")+'"'),a.length(e.selectType)>0&&(r+=' select-type="'+e.selectType+'"');var i="";if(a.length(e.width)>0&&(i+="width:"+e.width+";"),a.length(i)>0&&(r+=' style="'+i+'"'),a.length(e.events)>0){let c=[],n="subtable_event_"+t+"_"+l;for(let b=0;b<e.events.length;b++)a.length(e.events[b].name)===0||a.length(e.events[b].script)===0||(r+=" @"+e.events[b].name+`="execFormEvent('`+n+"','"+e.events[b].name+`',$event,scope.row)"`,c.push(e.events[b]));c.length>0&&u.push({id:n,events:c})}return r+=" />",r},compile_subtable_appraise(t,l,e,u,r){var s=`<el-rate v-if="getFieldStatus('`+t+"."+l+`')!=2" :disabled="getFieldStatus('`+t+"."+l+`')==1" v-model="scope.row['`+l+`']"`;if(s+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`,e.allowHalf&&(s+=" allow-half"),a.length(e.count)>0&&parseInt(e.count)>0&&(s+=' :max="'+e.count+'"'),a.length(e.customIcon)>0&&(s+=` :icons="['`+e.customIcon+"','"+e.customIcon+"','"+e.customIcon+`']" void-icon="`+e.customIcon+'"'),a.length(e.events)>0){let i=[],c="subtable_event_"+t+"_"+l;for(let n=0;n<e.events.length;n++)a.length(e.events[n].name)===0||a.length(e.events[n].script)===0||(s+=" @"+e.events[n].name+`="execFormEvent('`+c+"','"+e.events[n].name+`',$event,scope.row)"`,i.push(e.events[n]));i.length>0&&u.push({id:c,events:i})}return s+="/>",r.type="number",s},compile_subtable_label(t,l,e){var u=`<label v-if="getFieldStatus('`+t+"."+l+`')!=2"`;u+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`;var r="color:var(--el-text-color-regular);";return a.length(e.style)>0&&(r+=a.replace(e.style,'"',"")),u+=' style="'+r+'"',u+=">",u+="{{scope.row['"+l+"']}}",u+="</label>",u},compile_subtable_files(t,l,e,u){var r=`<el-selectfile :status="getFieldStatus('`+t+"."+l+`')" v-model="scope.row['`+l+`']"`;r+=` :ref="'formRef_`+t+"_"+l+`_'+scope.row.key"`,r+=' :ismobile="isMobile"',a.length(e.placeholder,!1)>0&&(r+=' placeholder="'+e.placeholder+'"'),a.length(e.fileType)>0&&(r+=' accept="'+e.fileType+'"'),r+=' show-type="'+e.showType+'"',e.showImg&&(r+=" show-img"),e.showIndex||(r+=' :show-index="false"'),a.isNumberString(e.limit)&&(r+=' :limit="'+e.limit+'"');var s="";a.length(e.width)>0&&(s+="width:"+e.width+";"),a.length(s)>0&&(r+=' style="'+s+'"'),parseFloat(e.size)&&(r+=' :size="'+parseFloat(e.size)+'"'),a.length(e.tip)>0&&(r+=' tip="'+e.tip+'"'),a.length(e.buttonText)>0&&(r+=' button-text="'+e.buttonText+'"'),r+=' :control-type="'+(e.controlType=="1"?"1":"0")+'"';let i=a.isNumberString(e.controlShowType)?e.controlShowType:"0";if(r+=' :control-show-type="'+i+'"',r+=' list-type="'+(i=="2"?"picture-card":"text")+'"',a.length(e.showStyle)>0&&(r+=' show-style="'+e.showStyle+'"'),a.length(e.events)>0){let c=[],n="subtable_event_"+t+"_"+l;for(let b=0;b<e.events.length;b++)a.length(e.events[b].name)===0||a.length(e.events[b].script)===0||(r+=" @"+e.events[b].name+`="execFormEvent('`+n+"','"+e.events[b].name+`',$event,scope.row)"`,c.push(e.events[b]));c.length>0&&u.push({id:n,events:c})}return r+="/>",r}};export{R as d};
