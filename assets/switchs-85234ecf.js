import{ai as N,aT as V,aF as H,H as k,bD as r,aX as s,o as c,W as o,a as t,b9 as g,c as b,aV as C,bi as _,F as y,U as h,bF as I,bv as K}from"./_@vue-5ba92de9.js";import{d as L}from"./form-design-8c117009.js";import"./index-823f4b27.js";import"./__vendor-5e6ac033.js";import"./_@element-plus-ad4c9002.js";import"./_crypto-js-0812dcff.js";import"./_element-plus-8c7ce171.js";import"./_@popperjs-c75af06c.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";import"./_jquery-3a83ed9f.js";const M={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},R=t("th",{style:{width:"60px"}},"控件id",-1),W={class:"roadui_formfont"},X=t("th",null,"绑定字段",-1),z={class:"roadui_note1"},G={style:{"margin-left":"12px"}},Q=t("th",null,"默认值",-1),Y=t("th",null,"选中文本",-1),Z=t("th",null,"选中时值",-1),$=t("th",null,"选中颜色",-1),ee={style:{"margin-left":"12px"}},le={style:{"margin-left":"12px"}},te={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},ae=t("th",{style:{width:"50px"}},"事件",-1),ne=t("th",null,"脚本",-1),be={__name:"switchs",props:{query:{type:String,default:()=>""}},setup(O){const d=N("utils"),J=N("ElCodemirror"),F=O,T=d.query("editorname",F.query),m=window.parent.CKEDITOR.instances[T],f=m.formAttributeJSON,l=V({}),u=V({}),v=V(""),x=V([]),D=L.defaultValueOptions();H(()=>{f&&d.getConnTableFields(f.dbConn,f.dbTable).then(n=>{x.value=n}),w()});const B=n=>{d.length(n)!==0&&(l.value.defaultValue+=n[n.length-1])},w=n=>{if(l.value={id:"",label:"",field:"",width:"",defaultChecked:!1,unCheckedChildren:"",checkedChildren:"",inlinePrompt:!1,unCheckedValue:"",checkedValue:"",unCheckedColor:"",checkedColor:""},u.value={},n||(n=m.currentSelectEditorElement),n){if(l.value.id=n.getAttribute("data-id"),l.value.label=n.getAttribute("data-label"),l.value.field=n.getAttribute("data-bindfiled"),l.value.defaultChecked=n.getAttribute("data-defaultchecked")=="true",l.value.unCheckedChildren=n.getAttribute("data-uncheckedchildren"),l.value.checkedChildren=n.getAttribute("data-checkedchildren"),l.value.inlinePrompt=n.getAttribute("data-inlineprompt")=="true",l.value.unCheckedValue=n.getAttribute("data-uncheckedvalue"),l.value.checkedValue=n.getAttribute("data-checkedvalue"),l.value.unCheckedColor=n.getAttribute("data-uncheckedcolor"),l.value.checkedColor=n.getAttribute("data-checkedcolor"),u.value=d.getArrayObj(m.formEventsJSON,l.value.id,"id"),d.isUndef(u.value))u.value={id:l.value.id,events:[{name:"change",script:""},{name:"click",script:""}]},m.formEventsJSON.push(u.value);else if(d.length(u.value.events)===0)u.value={id:l.value.id,events:[{name:"change",script:""},{name:"click",script:""}]};else{let a=["change","click"];for(let i=0;i<a.length;i++)d.inArray(u.value.events,a[i],"name")||u.value.events.push({name:a[i],script:""})}v.value=u.value.events[0].name}m.currentSelectEditorElementJson=l.value,m.initFunction_switch=w};return(n,a)=>{const i=s("el-option"),U=s("el-select"),p=s("el-input"),P=s("el-cascader"),A=s("el-checkbox"),E=s("el-color-picker"),S=s("el-tab-pane"),j=s("el-tabs");return c(),k(j,null,{default:r(()=>[o(S,{name:"0",label:"属性",style:{height:"100%"}},{default:r(()=>[t("table",M,[t("tr",null,[R,t("td",W,g(l.value.id),1)]),t("tr",null,[X,t("td",null,[o(U,{modelValue:l.value.field,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.field=e),filterable:"",style:{width:"260px"},clearable:""},{default:r(()=>[(c(!0),b(y,null,C(x.value,e=>(c(),k(i,{key:e.name,value:e.name,label:e.name+(_(d).length(e.comment)>0?" - "+e.comment:"")},{default:r(()=>[t("span",null,g(e.name),1),t("span",z,g(_(d).length(e.comment)>0?" - "+e.comment:""),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"]),t("span",G,[h(" 标签"),o(p,{modelValue:l.value.label,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.label=e),placeholder:"控件label",style:{width:"285px","margin-left":"12px"},clearable:""},null,8,["modelValue"])])])]),t("tr",null,[Q,t("td",null,[o(P,{placeholder:"选择默认值",options:_(D),props:{expandTrigger:"hover",checkStrictly:!1},clearable:"",onChange:B,style:{width:"260px","margin-right":"18px"}},null,8,["options"]),o(p,{modelValue:l.value.defaultValue,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.defaultValue=e),style:{width:"323px"},clearable:""},null,8,["modelValue"])])]),t("tr",null,[Y,t("td",null,[o(p,{modelValue:l.value.checkedChildren,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.checkedChildren=e),clearable:"",style:{width:"140px","margin-right":"12px"}},null,8,["modelValue"]),t("span",null,[h(" 非选中文本 "),o(p,{modelValue:l.value.unCheckedChildren,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.unCheckedChildren=e),clearable:"",style:{width:"140px",margin:"0 12px"}},null,8,["modelValue"]),o(A,{modelValue:l.value.inlinePrompt,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.inlinePrompt=e)},{default:r(()=>[h("是否显示在点内")]),_:1},8,["modelValue"])])])]),t("tr",null,[Z,t("td",null,[o(p,{modelValue:l.value.checkedValue,"onUpdate:modelValue":a[6]||(a[6]=e=>l.value.checkedValue=e),clearable:"",style:{width:"140px","margin-right":"12px"}},null,8,["modelValue"]),t("span",null,[h(" 非选中时值 "),o(p,{modelValue:l.value.unCheckedValue,"onUpdate:modelValue":a[7]||(a[7]=e=>l.value.unCheckedValue=e),clearable:"",style:{width:"140px",margin:"0 12px"}},null,8,["modelValue"]),o(A,{modelValue:l.value.defaultChecked,"onUpdate:modelValue":a[8]||(a[8]=e=>l.value.defaultChecked=e)},{default:r(()=>[h("默认是否选中")]),_:1},8,["modelValue"])])])]),t("tr",null,[$,t("td",null,[o(E,{modelValue:l.value.checkedColor,"onUpdate:modelValue":a[9]||(a[9]=e=>l.value.checkedColor=e)},null,8,["modelValue"]),t("span",ee,[h(" 非选中颜色 "),t("span",le,[o(E,{modelValue:l.value.unCheckedColor,"onUpdate:modelValue":a[10]||(a[10]=e=>l.value.unCheckedColor=e)},null,8,["modelValue"])])])])])])]),_:1}),o(S,{name:"1",label:"事件",style:{height:"100%"}},{default:r(()=>[t("table",te,[t("tr",null,[ae,t("td",null,[o(U,{modelValue:v.value,"onUpdate:modelValue":a[11]||(a[11]=e=>v.value=e)},{default:r(()=>[(c(!0),b(y,null,C(u.value.events,e=>(c(),k(i,{key:e.name,value:e.name,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),t("tr",null,[ne,t("td",null,[(c(!0),b(y,null,C(u.value.events,e=>I((c(),b("div",{style:{width:"620px"},key:"script_"+e.name},[o(_(J),{modelValue:e.script,"onUpdate:modelValue":q=>e.script=q,height:"260px"},null,8,["modelValue","onUpdate:modelValue"])])),[[K,v.value==e.name]])),128))])])])]),_:1})]),_:1})}}};export{be as default};
