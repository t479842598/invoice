import{ai as g,aT as V,by as M,aF as W,c as r,W as o,bD as n,aX as d,o as u,a as t,bi as _,F as h,aV as b,H as S,U as m,b9 as O,bF as p,bv as c}from"./_@vue-5ba92de9.js";import{d as D}from"./form-design-8c117009.js";import"./index-823f4b27.js";import"./__vendor-5e6ac033.js";import"./_@element-plus-ad4c9002.js";import"./_crypto-js-0812dcff.js";import"./_element-plus-8c7ce171.js";import"./_@popperjs-c75af06c.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";import"./_jquery-3a83ed9f.js";const X={class:"roadui_formdesign_subtablediv"},z={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},A=t("th",null,"默认值",-1),G=t("th",null,"选项来源",-1),I={style:{"margin-left":"12px"}},P={style:{"margin-left":"12px"}},Y={style:{"margin-left":"12px"}},Z=t("th",null,"字典项",-1),$=t("th",null,"字符串",-1),ee=t("th",null,"SQL",-1),le=t("th",null,"URL",-1),ae={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},te=t("th",{style:{width:"50px"}},"事件",-1),oe=t("th",null,"脚本",-1),be={__name:"selects",setup(ue){const v=g("utils"),R=g("ElSelectdict"),T=g("ElCodemirror"),x=g("setEditRecord"),C=V(null),l=V({}),B=D.defaultValueOptions(),f=V(""),F=V("属性"),L=D.dataSourceOptions(),N=D.dictValueFieldOptions(),q=V([]);M(()=>l.value.dataSource,s=>{s=="sql"&&v.getConns().then(a=>{q.value=a})}),W(()=>{l.value=x.value.set,v.length(l.value.events)>0&&(f.value=l.value.events[0].name),v.length(x.value.title)>0&&(F.value=x.value.title),C.value.initTitle(l.value.dataSourceDict)});const j=s=>{v.length(s)!==0&&(v.hasKey(l.value,"defaultValue")||(l.value.defaultValue=""),l.value.defaultValue+=s[s.length-1])};return(s,a)=>{const Q=d("el-cascader"),i=d("el-input"),H=d("el-radio"),J=d("el-radio-group"),y=d("el-option"),w=d("el-select"),U=d("el-checkbox"),E=d("el-tab-pane"),K=d("el-tabs");return u(),r("div",X,[o(K,null,{default:n(()=>[o(E,{name:"0",label:F.value,style:{height:"100%"}},{default:n(()=>[t("table",z,[t("tr",null,[A,t("td",null,[o(Q,{placeholder:"选择默认值",options:_(B),props:{expandTrigger:"hover",checkStrictly:!1},clearable:"",onChange:j,style:{width:"260px","margin-right":"18px"}},null,8,["options"]),o(i,{modelValue:l.value.defaultValue,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.defaultValue=e),style:{width:"730px"},clearable:""},null,8,["modelValue"])])]),t("tr",null,[G,t("td",null,[o(J,{modelValue:l.value.dataSource,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.dataSource=e),style:{"vertical-align":"middle"}},{default:n(()=>[(u(!0),r(h,null,b(_(L),e=>(u(),S(H,{key:e.value,label:e.value},{default:n(()=>[m(O(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),p(t("span",I,[m(" 数据连接 "),o(w,{modelValue:l.value.dataSourceSqlConn,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.dataSourceSqlConn=e),placeholder:"选择执行SQL的数据连接",clearable:"",style:{width:"120px","margin-left":"12px","vertical-align":"middle"}},{default:n(()=>[(u(!0),r(h,null,b(q.value,(e,k)=>(u(),S(y,{key:"conn_"+k,value:e.id,label:e.title},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])],512),[[c,l.value.dataSource=="sql"]]),t("span",P,[m(" 宽度"),o(i,{modelValue:l.value.width,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.width=e),placeholder:"px或%",style:{width:"80px","margin-left":"12px"},clearable:""},null,8,["modelValue"])]),t("span",Y,[m(" 背景文字"),o(i,{modelValue:l.value.placeholder,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.placeholder=e),placeholder:"",style:{width:"88px","margin-left":"12px"},clearable:""},null,8,["modelValue"])]),o(U,{modelValue:l.value.search,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.search=e),label:"搜索",style:{margin:"0 12px"}},null,8,["modelValue"]),o(U,{modelValue:l.value.allowClear,"onUpdate:modelValue":a[6]||(a[6]=e=>l.value.allowClear=e),label:"清空",style:{"margin-right":"12px"}},null,8,["modelValue"]),o(U,{modelValue:l.value.multiple,"onUpdate:modelValue":a[7]||(a[7]=e=>l.value.multiple=e),label:"多选",style:{"margin-right":"12px"}},null,8,["modelValue"])])]),p(t("tr",null,[Z,t("td",null,[o(_(R),{modelValue:l.value.dataSourceDict,"onUpdate:modelValue":a[8]||(a[8]=e=>l.value.dataSourceDict=e),ref_key:"dataSourceDictRef",ref:C,style:{width:"400px","margin-right":"12px"},clearable:""},null,8,["modelValue"]),m(" 值字段 "),o(w,{modelValue:l.value.dataSourceDictValueField,"onUpdate:modelValue":a[9]||(a[9]=e=>l.value.dataSourceDictValueField=e),style:{width:"127px","margin-left":"12px"},clearable:""},{default:n(()=>[(u(!0),r(h,null,b(_(N),e=>(u(),S(y,{key:e.value,value:e.value,label:e.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])],512),[[c,l.value.dataSource=="dict"]]),p(t("tr",null,[$,t("td",null,[o(i,{type:"textarea",rows:3,modelValue:l.value.dataSourceString,"onUpdate:modelValue":a[10]||(a[10]=e=>l.value.dataSourceString=e),clearable:"",placeholder:"格式：选项1值,选项1标题;选项2值,选项2标题...（字符串不能有单引号)"},null,8,["modelValue"])])],512),[[c,l.value.dataSource=="string"]]),p(t("tr",null,[ee,t("td",null,[o(i,{type:"textarea",rows:3,modelValue:l.value.dataSourceSql,"onUpdate:modelValue":a[11]||(a[11]=e=>l.value.dataSourceSql=e),clearable:"",placeholder:"查询返回两个字段，选项值和选项标题。如果只返回一个字段，则选项值和选项标题一样。"},null,8,["modelValue"])])],512),[[c,l.value.dataSource=="sql"]]),p(t("tr",null,[le,t("td",null,[o(i,{type:"textarea",rows:3,modelValue:l.value.dataSourceUrl,"onUpdate:modelValue":a[12]||(a[12]=e=>l.value.dataSourceUrl=e),clearable:"",placeholder:"post一个url地址，地址返回[{value:'值',label:'标题'},...]格式json字符串。"},null,8,["modelValue"])])],512),[[c,l.value.dataSource=="url"]])])]),_:1},8,["label"]),o(E,{name:"1",label:"事件",style:{height:"100%"}},{default:n(()=>[t("table",ae,[t("tr",null,[te,t("td",null,[o(w,{modelValue:f.value,"onUpdate:modelValue":a[13]||(a[13]=e=>f.value=e)},{default:n(()=>[(u(!0),r(h,null,b(l.value.events,e=>(u(),S(y,{key:e.name,value:e.name},{default:n(()=>[m(O(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),t("tr",null,[oe,t("td",null,[(u(!0),r(h,null,b(l.value.events,e=>p((u(),r("div",{style:{width:"1040px"},key:"script_"+e.name},[o(_(T),{modelValue:e.script,"onUpdate:modelValue":k=>e.script=k,height:"250px"},null,8,["modelValue","onUpdate:modelValue"])])),[[c,f.value==e.name]])),128))])])])]),_:1})]),_:1})])}}};export{be as default};
