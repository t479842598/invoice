import{i as init}from"./_echarts-675f6544.js";import{ai as inject,aT as ref,aF as onMounted,c as createElementBlock,a as createBaseVNode,W as createVNode,bD as withCtx,F as Fragment,aV as renderList,aX as resolveComponent,o as openBlock,ay as normalizeStyle,bi as unref,H as createBlock,aZ as resolveDynamicComponent,b9 as toDisplayString}from"./_@vue-5ba92de9.js";import"./__vendor-5e6ac033.js";const _hoisted_1={class:"roadui_home_count"},_hoisted_2=["onClick"],_hoisted_3={class:"roadui_home_countamount"},_hoisted_4={class:"roadui_home_countamount_count"},_hoisted_5=createBaseVNode("div",{style:{clear:"both",height:"6px"}},null,-1),_hoisted_6={class:"roadui_home_left"},_hoisted_7={class:"roadui_home_right"},_sfc_main={__name:"home",setup(__props){const ajax=inject("ajax"),utils=inject("utils"),index_openmenu=inject("index_openmenu"),index_regcomponent=inject("index_regcomponent"),app=inject("app"),homeSets=ref({});onMounted(()=>{loadData()});const loadData=()=>{ajax.post("/HomeSet/GetUserList").then(o=>{homeSets.value=o.data;for(let a=0;a<o.data.type_1.length;a++){const t=o.data.type_1[a];if(utils.length(t.dataSource)===0)continue;if(t.isCharts===1){loadCharts(t);continue}const e="home_left_"+t.id,n=t.dataSource.split("?"),r=n[0];t.query=n.length>1?n[1]:"",index_regcomponent(e,r),t.componentId=e}for(let a=0;a<o.data.type_2.length;a++){const t=o.data.type_2[a];if(utils.length(t.dataSource)===0)continue;if(t.isCharts===1){loadCharts(t);continue}const e=t.dataSource.split("?"),n=e[0];t.query=e.length>1?e[1]:"";const r="home_left_"+t.id;index_regcomponent(r,n),t.componentId=r}}).catch(()=>{})},openLinkUrl=o=>{const a={title:o.title,id:"home_item_"+o.id,url:o.linkUrl,ico:o.icon,openMode:0};index_openmenu(a)},loadCharts=c=>{const componentId_chart="roadflow_home_chart_"+utils.createGuid(!1),component_chart={data(){return{width:"100%",height:300,chartOption:{},rows:[],data:[]}},mounted(){this.$nextTick(()=>{setTimeout(()=>{this.loadChart()},100)})},methods:{loadChart(){var programChart=init(document.getElementById("programChartRef_"+c.id),"");this.chartOption=c.charts,this.rows=c.chartsData,this.data=c.chartsData,this.height=c.chartsHeight||300,utils.length(c.chartsScripts)>0&&eval(c.chartsScripts),programChart.setOption(this.chartOption)}},template:`<div id="programChartRef_${c.id}" ref="programChartRef_${c.id}" :style="'padding:12px;width:'+width+'px;height:'+height+'px'"></div>`};app.component(componentId_chart,component_chart),c.componentId=componentId_chart};return(o,a)=>{const t=resolveComponent("el-space");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1,[createVNode(t,{size:50,wrap:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(homeSets.value.type_0,(e,n)=>(openBlock(),createElementBlock("div",{key:"home_left_"+n,onClick:r=>openLinkUrl(e),class:"roadui_home_countdiv"},[createBaseVNode("div",{class:"roadui_home_counticon",style:normalizeStyle("background-color:"+(unref(utils).length(e.background)>0?e.background:""))},[(openBlock(),createBlock(resolveDynamicComponent(unref(utils).length(e.icon)>0?e.icon:"bar-chart")))],4),createBaseVNode("div",_hoisted_3,[createBaseVNode("div",null,toDisplayString(e.title),1),createBaseVNode("div",_hoisted_4,toDisplayString(e.dataSource),1)])],8,_hoisted_2))),128))]),_:1})]),_hoisted_5,createBaseVNode("div",null,[createBaseVNode("div",_hoisted_6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(homeSets.value.type_1,(e,n)=>(openBlock(),createElementBlock("div",{class:"roadui_home_leftdiv",key:"home_left_"+n},[(openBlock(),createBlock(resolveDynamicComponent(e.componentId),{query:e.query},null,8,["query"]))]))),128))]),createBaseVNode("div",_hoisted_7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(homeSets.value.type_2,(e,n)=>(openBlock(),createElementBlock("div",{class:"roadui_home_leftdiv",key:"home_right_"+n},[(openBlock(),createBlock(resolveDynamicComponent(e.componentId),{query:e.query},null,8,["query"]))]))),128))])])])}}};export{_sfc_main as default};
