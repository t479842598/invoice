import{ai as S,aT as c,aF as I,H as x,bD as i,aX as m,o as p,W as o,a as t,b9 as w,c as b,aV as T,bi as g,F as U,U as A,bF as V,bv as _}from"./_@vue-5ba92de9.js";import{d as R}from"./form-design-8c117009.js";import"./index-823f4b27.js";import"./__vendor-5e6ac033.js";import"./_@element-plus-ad4c9002.js";import"./_crypto-js-0812dcff.js";import"./_element-plus-8c7ce171.js";import"./_@popperjs-c75af06c.js";import"./_pdfjs-dist-c04561eb.js";import"./_@microsoft-43c4e133.js";import"./_vue-codemirror-50da885a.js";import"./_jquery-3a83ed9f.js";const H={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},K=t("th",{style:{width:"60px"}},"控件id",-1),L={class:"roadui_formfont"},W=t("th",null,"绑定字段",-1),X={class:"roadui_note1"},z={style:{"margin-left":"12px"}},G=t("th",null,"默认值",-1),P=t("th",null,"宽度",-1),Q=t("th",null,"选择类型",-1),Z={style:{"margin-left":"12px"}},$={style:{"margin-left":"12px"}},ee={style:{"margin-left":"12px"}},le=t("th",null,"开始时间",-1),te={style:{"margin-left":"12px"}},ae=t("span",{style:{"margin-right":"12px"}},"结束",-1),oe={style:{"margin-left":"12px"}},ue=t("span",{style:{"margin-right":"12px"}},"最早",-1),ne={style:{"margin-left":"12px"}},de=t("span",{style:{"margin-right":"12px"}},"最晚",-1),se={style:{"margin-left":"12px"}},re=t("span",{style:{"margin-right":"12px"}},"步长",-1),ie=t("th",null,"显示格式",-1),me=t("span",null,"值格式",-1),pe={class:"roadui_formtable",style:{width:"98%",margin:"0 auto"}},ve=t("th",{style:{width:"50px"}},"事件",-1),he=t("th",null,"脚本",-1),ke={__name:"datetime",props:{query:{type:String,default:()=>""}},setup(C){const r=S("utils"),N=S("ElCodemirror"),O=C,Y=r.query("editorname",O.query),v=window.parent.CKEDITOR.instances[Y],y=v.formAttributeJSON,e=c({}),s=c({}),h=c(""),k=c([]),J=R.defaultValueOptions();I(()=>{y&&r.getConnTableFields(y.dbConn,y.dbTable).then(u=>{k.value=u}),E()});const M=u=>{r.length(u)!==0&&(e.value.defaultValue+=u[u.length-1])},E=u=>{e.value={id:"",label:"",field:"",width:"",defaultValue:"",placeholder:"",selectType:"date",clearable:!0,shortcuts:!1},s.value={},u||(u=v.currentSelectEditorElement),u&&(e.value.id=u.getAttribute("data-id"),e.value.label=u.getAttribute("data-label"),e.value.field=u.getAttribute("data-bindfiled"),e.value.defaultValue=r.decodeURI(u.getAttribute("data-defaultvalue")),e.value.width=u.getAttribute("data-width"),e.value.placeholder=u.getAttribute("data-placeholder"),e.value.selectType=u.getAttribute("data-selecttype"),e.value.shortcuts=u.getAttribute("data-shortcuts")=="true",e.value.clearable=u.getAttribute("data-clearable")=="true",e.value.format=u.getAttribute("data-format"),e.value.valueFormat=u.getAttribute("data-valueformat"),e.value.separator=u.getAttribute("data-separator")||"",e.value.startTime=u.getAttribute("data-starttime")||"",e.value.endTime=u.getAttribute("data-endtime")||"",e.value.minTime=u.getAttribute("data-mintime")||"",e.value.maxTime=u.getAttribute("data-maxtime")||"",e.value.stepTime=u.getAttribute("data-steptime")||"",s.value=r.getArrayObj(v.formEventsJSON,e.value.id,"id"),r.isUndef(s.value)?(s.value={id:e.value.id,events:[{name:"change",script:""}]},v.formEventsJSON.push(s.value)):r.length(s.value.events)===0&&(s.value={id:e.value.id,events:[{name:"change",script:""}]}),h.value=s.value.events[0].name),v.currentSelectEditorElementJson=e.value,v.initFunction_datetime=E};return(u,a)=>{const n=m("el-option"),f=m("el-select"),d=m("el-input"),B=m("el-cascader"),D=m("el-checkbox"),F=m("el-tab-pane"),j=m("el-tabs");return p(),x(j,null,{default:i(()=>[o(F,{name:"0",label:"属性",style:{height:"100%"}},{default:i(()=>[t("table",H,[t("tr",null,[K,t("td",L,w(e.value.id),1)]),t("tr",null,[W,t("td",null,[o(f,{modelValue:e.value.field,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.field=l),filterable:"",style:{width:"260px"},clearable:""},{default:i(()=>[(p(!0),b(U,null,T(k.value,l=>(p(),x(n,{key:l.name,value:l.name,label:l.name+(g(r).length(l.comment)>0?" - "+l.comment:"")},{default:i(()=>[t("span",null,w(l.name),1),t("span",X,w(g(r).length(l.comment)>0?" - "+l.comment:""),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"]),t("span",z,[A(" 标签"),o(d,{modelValue:e.value.label,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.label=l),placeholder:"控件label",style:{width:"285px","margin-left":"12px"},clearable:""},null,8,["modelValue"])])])]),t("tr",null,[G,t("td",null,[o(B,{placeholder:"选择默认值",options:g(J),props:{expandTrigger:"hover",checkStrictly:!1},clearable:"",onChange:M,style:{width:"260px","margin-right":"18px"}},null,8,["options"]),o(d,{modelValue:e.value.defaultValue,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.defaultValue=l),style:{width:"323px"},clearable:""},null,8,["modelValue"])])]),t("tr",null,[P,t("td",null,[o(d,{modelValue:e.value.width,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.width=l),placeholder:"%或px",clearable:"",style:{width:"260px","margin-right":"12px"}},null,8,["modelValue"]),A(" 背景文字"),o(d,{modelValue:e.value.placeholder,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.placeholder=l),placeholder:"placeholder",clearable:"",style:{width:"257px","margin-left":"12px"}},null,8,["modelValue"])])]),t("tr",null,[Q,t("td",null,[o(f,{modelValue:e.value.selectType,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.selectType=l),clearable:"",style:{width:"260px"}},{default:i(()=>[o(n,{value:"date",label:"日期 - date"}),o(n,{value:"datetime",label:"日期时间 - datetime"}),o(n,{value:"daterange",label:"日期范围 - daterange"}),o(n,{value:"datetimerange",label:"日期时间范围 - datetimerange"}),o(n,{value:"year",label:"年 - year"}),o(n,{value:"month",label:"月 - month"}),o(n,{value:"monthrange",label:"月范围 - monthrange"}),o(n,{value:"week",label:"周 - week"}),o(n,{value:"dates",label:"多个日期 - dates"}),o(n,{value:"time",label:"时间 - time"})]),_:1},8,["modelValue"]),t("span",Z,[o(D,{modelValue:e.value.clearable,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.clearable=l),label:"可清除"},null,8,["modelValue"])]),V(t("span",$,[o(D,{modelValue:e.value.shortcuts,"onUpdate:modelValue":a[7]||(a[7]=l=>e.value.shortcuts=l),label:"快捷选项"},null,8,["modelValue"])],512),[[_,e.value.selectType==="daterange"||e.value.selectType==="datetimerange"]]),V(t("span",ee,[A("分隔符"),o(d,{modelValue:e.value.separator,"onUpdate:modelValue":a[8]||(a[8]=l=>e.value.separator=l),style:{width:"109px","margin-left":"12px"},placeholder:"默认-"},null,8,["modelValue"])],512),[[_,e.value.selectType==="daterange"||e.value.selectType==="datetimerange"||e.value.selectType==="monthrange"]])])]),V(t("tr",null,[le,t("td",null,[o(d,{modelValue:e.value.startTime,"onUpdate:modelValue":a[9]||(a[9]=l=>e.value.startTime=l),placeholder:"",style:{width:"75px"}},null,8,["modelValue"]),t("span",te,[ae,o(d,{modelValue:e.value.endTime,"onUpdate:modelValue":a[10]||(a[10]=l=>e.value.endTime=l),placeholder:"",style:{width:"75px"}},null,8,["modelValue"])]),t("span",oe,[ue,o(d,{modelValue:e.value.minTime,"onUpdate:modelValue":a[11]||(a[11]=l=>e.value.minTime=l),placeholder:"",style:{width:"75px"}},null,8,["modelValue"])]),t("span",ne,[de,o(d,{modelValue:e.value.maxTime,"onUpdate:modelValue":a[12]||(a[12]=l=>e.value.maxTime=l),placeholder:"",style:{width:"75px"}},null,8,["modelValue"])]),t("span",se,[re,o(d,{modelValue:e.value.stepTime,"onUpdate:modelValue":a[13]||(a[13]=l=>e.value.stepTime=l),placeholder:"",style:{width:"75px"}},null,8,["modelValue"])])])],512),[[_,e.value.selectType==="time"]]),t("tr",null,[ie,t("td",null,[o(d,{modelValue:e.value.format,"onUpdate:modelValue":a[14]||(a[14]=l=>e.value.format=l),placeholder:"例：YYYY-MM-DD",style:{width:"260px","margin-right":"12px"}},null,8,["modelValue"]),me,o(d,{modelValue:e.value.valueFormat,"onUpdate:modelValue":a[15]||(a[15]=l=>e.value.valueFormat=l),placeholder:"例：YYYY-MM-DD",style:{width:"275px","margin-left":"12px"}},null,8,["modelValue"])])])])]),_:1}),o(F,{name:"1",label:"事件",style:{height:"100%"}},{default:i(()=>[t("table",pe,[t("tr",null,[ve,t("td",null,[o(f,{modelValue:h.value,"onUpdate:modelValue":a[16]||(a[16]=l=>h.value=l)},{default:i(()=>[(p(!0),b(U,null,T(s.value.events,l=>(p(),x(n,{key:l.name,value:l.name,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),t("tr",null,[he,t("td",null,[(p(!0),b(U,null,T(s.value.events,l=>V((p(),b("div",{style:{width:"620px"},key:"script_"+l.name},[o(g(N),{modelValue:l.script,"onUpdate:modelValue":q=>l.script=q,height:"340px"},null,8,["modelValue","onUpdate:modelValue"])])),[[_,h.value==l.name]])),128))])])])]),_:1})]),_:1})}}};export{ke as default};
